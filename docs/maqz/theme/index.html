<!DOCTYPE html><html lang="ja"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>テーマ - アキウス</title><!--**
*
* 🌟
*
*
*
--><link rel="canonical" href="https://tmin.xyz/docs/maqz/theme/"><meta name="author" content="aqz"><meta name="description" content="テーマの編集方法"><link rel="shortcut icon" href="/docs/favicon.ico" type="image/vnd.microsoft.icon"><link rel="apple-touch-icon" href="/docs/files/images/icons/icon.svg" sizes="600x600"><link rel="shortcut icon" href="/docs/files/images/icons/icon.svg" sizes="600x600" type="image/svg+xml"><link rel="apple-touch-icon" href="/docs/files/images/icons/icon.png" sizes="600x600"><link rel="shortcut icon" href="/docs/files/images/icons/icon.png" sizes="600x600" type="image/png"><link rel="manifest" href="/docs/manifest.json"><link href="/docs/assets/style.min.css" rel="stylesheet"><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" crossorigin="anonymous"><link href="https://cdn.jsdelivr.net/npm/yakuhanjp/dist/css/yakuhanjp.min.css" rel="stylesheet" crossorigin="anonymous"><script src="/docs/assets/main.min.js" defer></script><script src="/docs/assets/fab.js" defer></script><script src="/docs/assets/pjax-api.min.js" defer></script><script src="/docs/assets/pjax-init.js" defer></script><script class='pjax-reload'>
  var disqus_config = function () {
    this.page.url = "https://tmin.xyz/docs/maqz/theme/";
    this.page.identifier = "tmin.xyz/docs/maqz/theme/";
  };
 // twbs/bootstrap build/sw.jsより借用
  if ('serviceWorker' in navigator) {
    navigator.serviceWorker.register('https://tmin.xyz/docs/service_worker.js').then(function(registration) {
      console.log('Service Workerは正常に登録されました: ', registration.scope);
        registration.onupdatefound = function () {
        var installingWorker = registration.installing
        installingWorker.onstatechange = function () {
          switch (installingWorker.state) {
            case 'installed':
              if (navigator.serviceWorker.controller) {
                console.log('ページの更新があります……')
                location.reload(true)
              }
              break
            default:
          }
        }
      }
    }).catch(function(err) {
      console.log('Service Workerを登録できませんでした: ', err);
    });
  }
// twbs/bootstrap build/sw.jsより借用
</script><meta name="theme-color" content="#2d88ef"><link rel="manifest" href="/docs/manifest.json"><link rel="alternate" href="https://github.com/tamaina/tamaina.github.io/commits/master.atom" type="application/atom+xml" title="アキウス"><meta property="og:type" content="website"><meta property="og:title" content="テーマ - アキウス"><meta property="og:description" content="テーマの編集方法"><meta property="og:image" content="https://tmin.xyz/docs/files/images/icons/icon.png"><meta property="og:image" content="https://tmin.xyz/docs/files/images/icons/icon.png"><meta property="og:url" content="https://tmin.xyz/docs/maqz/theme/"><meta property="og:site_name" content="アキウス"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:image" content="https://tmin.xyz/docs/files/images/icons/icon.png"><meta name="twitter:title" content="テーマ - アキウス"><meta name="twitter:description" content="テーマの編集方法"><meta name="twitter:site" content="aqzti"><script async src="https://www.googletagmanager.com/gtag/js?id=UA-107753466-1"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-107753466-1');
</script>
</head><body><nav class="navbar navbar-dark bg-dark sticky-top flex-row p-1" id="mainnav"><a class="navbar-brand" href="/docs/" id="navbar_brand"><img class="d-inline-block align-top" src="/docs/files/images/icons/icon.svg" width="30" height="30" alt="ICON"><div class="navbar-brand-text">tmin.xyz</div></a><div id="navbar_items"><div class="navbar-nav flex-row justify-content-center"><a class="text-light nav-item nav-link px-3" href="/docs/maqz/">maqz</a><a class="text-light nav-item nav-link px-3" href="/docs/blog/">ブログ</a><a class="text-light nav-item nav-link px-3" href="https://chirno.tmin.xyz/" target="_blank" rel="noopener">Chirno<i class="fa fa-external-link fa-fw" aria-hidden="true"></i></a><a class="text-light nav-item nav-link px-3" href="http://tmin.xyz/The-Japanese-Web-Fonts/#!index.md" target="_blank" rel="noopener">🇯🇵WebFont<i class="fa fa-external-link fa-fw" aria-hidden="true"></i></a></div></div></nav><nav class="bg-dark" aria-label="breadcrumb" id="breadcrumb"><div class="container"><ol class="breadcrumb bg-dark text-white m-0 py-1"><li class="breadcrumb-item"><a class="py-1" href="/docs/">Home</a></li><li class="breadcrumb-item"><a class="py-1" href="/docs/maqz/">About maqz</a></li><li class="breadcrumb-item" aria-current="page">テーマ</li></ol></div></nav><div class="container py-5" id="main"><article class="row" id="article_maincontent"><header class="w-100 order-1 p-2"><h1>テーマ</h1><small class="text-muted"><ul class="list-unstyled"><li><i class="fa fa-file-text-o fa-fw" aria-hidden="true"></i><time datetime="2017-08-18T18:37:57.811Z">2017年8月19日 03:37</time> 作成</li><li><i class="fa fa-clock-o fa-fw" aria-hidden="true"></i><time datetime="2017-11-01T15:28:00.904Z">2017年11月2日 00:28</time> 更新</li></ul></small></header><div class="my-2 p-3 col-lg-3 col-12 order-lg-3 order-2 bg-light" id="article_sidenav"><ul class="list-unstyled ml-3"><li><a href="#%E3%83%86%E3%83%B3%E3%83%97%E3%83%AC%E3%83%BC%E3%83%88">テンプレート</a></li><ul class="list-unstyled ml-3"><li><a href="#%E6%9B%B8%E3%81%8D%E6%96%B9">書き方</a></li><li><a href="#%E3%83%86%E3%83%B3%E3%83%97%E3%83%AC%E3%83%BC%E3%83%88%E3%81%8B%E3%82%89%E3%83%9A%E3%83%BC%E3%82%B8%E3%82%92%E6%9B%B8%E3%81%8D%E5%87%BA%E3%81%99%E3%81%97%E3%81%8F%E3%81%BF">テンプレートからページを書き出すしくみ</a></li><li><a href="#%E3%83%93%E3%83%AB%E3%83%89%E6%99%82%E3%81%AB%E5%AE%9F%E8%A1%8C%E3%81%95%E3%82%8C%E3%82%8B%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%97%E3%83%88">ビルド時に実行されるスクリプト</a></li><ul class="list-unstyled ml-3"><li><a href="#-md-better"><code>md_better()</code></a></li><li><a href="#-gettl"><code>getTL()</code></a></li></ul></ul><li><a href="#%E3%82%B9%E3%82%BF%E3%82%A4%E3%83%AB">スタイル</a></li><li><a href="#%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%97%E3%83%88">スクリプト</a></li></ul></div><section class="py-2 col-lg-9 col-12 order-lg-2 order-3"><p>テーマファイルのソースは、themeフォルダに格納されています。</p><p>htmlの素のpugを<strong>テンプレート</strong>、cssの素のstylus(.styl)やcssファイルを<strong>スタイル</strong>と呼称します。</p><p>また、jsフォルダのjsファイルはスクリプトと呼称します。ビルド時に実行されるビルドスクリプトとは区別してください。</p><h2 class="pt-5" id="%E3%83%86%E3%83%B3%E3%83%97%E3%83%AC%E3%83%BC%E3%83%88">テンプレート</h2><p>各文書のFront Matterの、layout:の値が、適用するテンプレートのファイル名です。</p><p>何も指定がなければdefault.pugを読みます。</p><h3 class="pt-5" id="%E6%9B%B8%E3%81%8D%E6%96%B9">書き方</h3><p>pugの書き方に関しては、<a href="https://pugjs.org" target="_blank" rel="noopener">pugjs.org</a>を参照してください。</p><p>変数として<code>docs/info.json</code>の内容が利用可能です。<a href="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Array" target="_blank" rel="noopener">様々な配列操作</a>を利用してページ一覧や検索機能を作成できます。<br>すべてのページの情報が記されているpages配列の扱い方は<strong><a href="./pages">pagesチートシート</a></strong>を参照してください。</p><p>これは、テンプレートだけでなくpug形式の個々の文書でも利用できます。</p><p>さらに他になにか利用したい変数がある場合は、<code>Gruntfile.js</code>のオプションに書き足してください。</p><h3 class="pt-5" id="%E3%83%86%E3%83%B3%E3%83%97%E3%83%AC%E3%83%BC%E3%83%88%E3%81%8B%E3%82%89%E3%83%9A%E3%83%BC%E3%82%B8%E3%82%92%E6%9B%B8%E3%81%8D%E5%87%BA%E3%81%99%E3%81%97%E3%81%8F%E3%81%BF">テンプレートからページを書き出すしくみ</h3><p>ビルドの様子をよく見ているとわかりますが、一時ファイルが<code>pug/templates</code>以下に書き出されます。</p><p>一時ファイルの中を見てみると秘密がわかると思います。</p><h3 class="pt-5" id="%E3%83%93%E3%83%AB%E3%83%89%E6%99%82%E3%81%AB%E5%AE%9F%E8%A1%8C%E3%81%95%E3%82%8C%E3%82%8B%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%97%E3%83%88">ビルド時に実行されるスクリプト</h3><p>ビルドスクリプトは<code>theme/pug/includes/script.pug</code>に記述されています。</p><p>読みこまれた文書はいくつかの関数を通してhtmlになります。</p><p>以下の関数は、カスタマイズする際に特に必要となる関数です。</p><h4 class="pt-5" id="-md-better"><code>md_better()</code></h4><p>Markdownから変換されたHTMLを整形します。String.replace()を多用しています。</p><h4 class="pt-5" id="-gettl"><code>getTL()</code></h4><p>HTMLに変換した文書をテンプレートリテラルとして扱い、<code>${～}</code>で囲まれた変数値や計算値を代入します。<br>Markdownでちょっとした変数を代入する場合に役立ちます。<code>info.json</code>の内容はすべて表示できます。</p><p>省力化のため、この関数には<strong>あのeval()関数を利用</strong>しています。大丈夫です。変な処理を${～}に書いたり変な`を書いたりしなければ。多分。</p><p>この関数を適用しているときに<code>${～}</code>という文字列を表示させるには、&#036;を<code>\$</code>と書くか<code>&amp;amp;#036;</code>と書くとよいのではないでしょうか。</p><p>不具合を防ぐために、テンプレートごとに有効か無効かを切り替えるとよいでしょう。<br>また、文書内で関数・条件式・繰り返し等複雑な処理をしたい場合は、pugの利用を強くお勧めします。</p><h2 class="pt-5" id="%E3%82%B9%E3%82%BF%E3%82%A4%E3%83%AB">スタイル</h2><p>main.stylファイルをコンパイルしてcssを出力しています。</p><p>stylusの書き方に関しては、<a href="http://stylus-lang.com/" target="_blank" rel="noopener">stylus-lang.com</a>を参照してください。</p><p>cssやstylusを追加するには、どこかにcss/stylファイルを作成・コピーし、それに応じて<code>@import</code>をmain.stylに追加します。</p><h2 class="pt-5" id="%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%97%E3%83%88">スクリプト</h2><p><strong>クライアント側で処理するスクリプトファイルです。</strong></p><p>MDBuilderの趣向としては、極力ビルド時にhtmlの簡単な変更や値の代入は済ませるようにしてください。</p><p>main.jsを起点としてwebpackでまとめます。</p><p>pjax-apiスクリプトは別に読み込んでいます。</p></section></article></div><div class="container py-5"><div id="disqus_wrap"><div id="disqus_thread"></div></div></div><div class="py-3 bg-light" id="footer_wrap"><footer class="container"><p>Copyright: tamaina</p><p class="m-0">This site built by maqz</p></footer></div><div id="share_modal_open_button"><button class="btn btn-primary rounded-circle ml-lg-5 m-3" type="button" data-toggle="modal" data-target="#share_modal" aria-labelledby="share_modal_label"><i class="fa fa-share-square-o fa-fw" aria-hidden="true"></i></button></div><div class="modal fade" id="share_modal" tabindex="-1" role="dialog" aria-labelledby="share_modal_label" aria-hidden="true"><div class="modal-dialog modal-dialog-centered" role="document"><div class="modal-content"><div class="modal-header"><h5 class="modal-title"><i class="fa fa-share-square-o fa-fw" aria-hidden="true"></i>シェア</h5><button class="close" type="button" data-dismiss="modal" aria-label="閉じる"><span aria-hidden="true">&times;</span></button></div><div class="modal-body" id="share_modal_body"><p id="share_modal_label">「テーマ」をSNSで共有</p><a class="twitter-share-button" href="https://twitter.com/share?ref_src=twsrc%5Etfw" data-show-count="true">Tweet</a> <a class="twitter-follow-button" href="https://twitter.com/aqzti?ref_src=twsrc%5Etfw" data-show-count="false">Follow @aqzti</a> <br><div class="line-it-button" style="display: none;" data-lang="ja" data-type="share-a" data-url="https://tmin.xyz/docs/maqz/theme/"></div><br><div class="fb-share-button" data-href="https://tmin.xyz/docs/maqz/theme/" data-layout="button_count" data-size="small" data-mobile-iframe="true"><a class="fb-xfbml-parse-ignore" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Ftmin.xyz%2Fdocs%2Fmaqz%2Ftheme%2F">シェア</a></div></div></div></div></div><div id="fb-root"></div><script src='https://connect.facebook.net/ja_JP/sdk.js#xfbml=1&version=v2.11&appId=1216117028459212' id='facebook-jssdk'></script>
<script src='https://platform.twitter.com/widgets.js'></script>
<script src='https://d.line-scdn.net/r/web/social-plugin/js/thirdparty/loader.min.js'></script><!--WE'RE SUPER CREW
--><script>(function() {var d = document, s = d.createElement('script');s.src = 'https://tminxyz.disqus.com/embed.js';s.setAttribute('data-timestamp', +new Date());(d.head || d.body).appendChild(s);})();</script></body></html>