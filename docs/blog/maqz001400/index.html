<!DOCTYPE html><html lang="ja"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>webpackとWorkboxを使い始めた - tmin.xyz</title><!--**
*
* 🌟
*
*
*
--><link rel="canonical" href="https://tmin.xyz/docs/blog/maqz001400/"><meta name="description" content="Browserifyと自家製ServiceWorkerを置き換えました。"><link rel="shortcut icon" href="/docs/favicon.ico" type="image/vnd.microsoft.icon"><link rel="apple-touch-icon" href="/docs/files/images/icons/favicon-16x16.png" sizes="16x16"><link rel="shortcut icon" href="/docs/files/images/icons/favicon-16x16.png" sizes="16x16" type="image/png"><link rel="apple-touch-icon" href="/docs/files/images/icons/favicon-32x32.png" sizes="32x32"><link rel="shortcut icon" href="/docs/files/images/icons/favicon-32x32.png" sizes="32x32" type="image/png"><link rel="apple-touch-icon" href="/docs/files/images/icons/favicon-36x36.png" sizes="36x36"><link rel="shortcut icon" href="/docs/files/images/icons/favicon-36x36.png" sizes="36x36" type="image/png"><link rel="apple-touch-icon" href="/docs/files/images/icons/favicon-48x48.png" sizes="48x48"><link rel="shortcut icon" href="/docs/files/images/icons/favicon-48x48.png" sizes="48x48" type="image/png"><link rel="apple-touch-icon" href="/docs/files/images/icons/favicon-57x57.png" sizes="57x57"><link rel="shortcut icon" href="/docs/files/images/icons/favicon-57x57.png" sizes="57x57" type="image/png"><link rel="apple-touch-icon" href="/docs/files/images/icons/favicon-60x60.png" sizes="60x60"><link rel="shortcut icon" href="/docs/files/images/icons/favicon-60x60.png" sizes="60x60" type="image/png"><link rel="apple-touch-icon" href="/docs/files/images/icons/favicon-72x72.png" sizes="72x72"><link rel="shortcut icon" href="/docs/files/images/icons/favicon-72x72.png" sizes="72x72" type="image/png"><link rel="apple-touch-icon" href="/docs/files/images/icons/favicon-76x76.png" sizes="76x76"><link rel="shortcut icon" href="/docs/files/images/icons/favicon-76x76.png" sizes="76x76" type="image/png"><link rel="apple-touch-icon" href="/docs/files/images/icons/favicon-96x96.png" sizes="96x96"><link rel="shortcut icon" href="/docs/files/images/icons/favicon-96x96.png" sizes="96x96" type="image/png"><link rel="apple-touch-icon" href="/docs/files/images/icons/favicon-114x114.png" sizes="114x114"><link rel="shortcut icon" href="/docs/files/images/icons/favicon-114x114.png" sizes="114x114" type="image/png"><link rel="apple-touch-icon" href="/docs/files/images/icons/favicon-120x120.png" sizes="120x120"><link rel="shortcut icon" href="/docs/files/images/icons/favicon-120x120.png" sizes="120x120" type="image/png"><link rel="apple-touch-icon" href="/docs/files/images/icons/favicon-152x152.png" sizes="152x152"><link rel="shortcut icon" href="/docs/files/images/icons/favicon-152x152.png" sizes="152x152" type="image/png"><link rel="apple-touch-icon" href="/docs/files/images/icons/favicon-160x160.png" sizes="160x160"><link rel="shortcut icon" href="/docs/files/images/icons/favicon-160x160.png" sizes="160x160" type="image/png"><link rel="apple-touch-icon" href="/docs/files/images/icons/favicon-180x180.png" sizes="180x180"><link rel="shortcut icon" href="/docs/files/images/icons/favicon-180x180.png" sizes="180x180" type="image/png"><link rel="apple-touch-icon" href="/docs/files/images/icons/favicon-192x192.png" sizes="192x192"><link rel="shortcut icon" href="/docs/files/images/icons/favicon-192x192.png" sizes="192x192" type="image/png"><link rel="apple-touch-icon" href="/docs/files/images/icons/favicon-196x196.png" sizes="196x196"><link rel="shortcut icon" href="/docs/files/images/icons/favicon-196x196.png" sizes="196x196" type="image/png"><link rel="apple-touch-icon" href="/docs/files/images/icons/favicon-600x600.png" sizes="600x600"><link rel="shortcut icon" href="/docs/files/images/icons/favicon-600x600.png" sizes="600x600" type="image/png"><link rel="manifest" href="/docs/manifest.json"><link href="/docs/assets/style.min.css" rel="stylesheet"><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" crossorigin="anonymous"><link href="https://cdn.jsdelivr.net/npm/yakuhanjp/dist/css/yakuhanjp.min.css" rel="stylesheet" crossorigin="anonymous"><script src="/docs/assets/main.min.js" defer></script><script src="/docs/assets/pjax-api.min.js" defer></script><script src="/docs/assets/pjax-init.js" defer></script><script class='pjax-reload'>
  var disqus_config = function () {
    this.page.url = "https://tmin.xyz/docs/blog/maqz001400/";
    this.page.identifier = "tmin.xyz/docs/blog/maqz001400/";
  };
 // twbs/bootstrap build/sw.jsより借用
  if ('serviceWorker' in navigator) {
    navigator.serviceWorker.register('https://tmin.xyz/docs/service_worker.js').then(function(registration) {
      console.log('Service Workerは正常に登録されました: ', registration.scope);
        registration.onupdatefound = function () {
        var installingWorker = registration.installing
        installingWorker.onstatechange = function () {
          switch (installingWorker.state) {
            case 'installed':
              if (navigator.serviceWorker.controller) {
                console.log('ページの更新があります……')
                location.reload(true)
              }
              break
            default:
          }
        }
      }
    }).catch(function(err) {
      console.log('Service Workerを登録できませんでした: ', err);
    });
  }
// twbs/bootstrap build/sw.jsより借用
</script><meta name="theme-color" content="#2d88ef"><link rel="manifest" href="/docs/manifest.json"><link rel="alternate" href="https://github.com/tamaina/tamaina.github.io/commits/master.atom" type="application/atom+xml" title="tmin.xyz"><meta property="og:type" content="website"><meta property="og:title" content="webpackとWorkboxを使い始めた - tmin.xyz"><meta property="og:description" content="Browserifyと自家製ServiceWorkerを置き換えました。"><meta property="og:image" content="https://tmin.xyz/docs/files/images/icons/favicon-600x600.png"><meta property="og:image" content="https://tmin.xyz/docs/files/images/icons/favicon-600x600.png"><meta property="og:url" content="https://tmin.xyz/docs/blog/maqz001400/"><meta property="og:site_name" content="tmin.xyz"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:image" content="https://tmin.xyz/docs/files/images/icons/favicon-600x600.png"><meta name="twitter:title" content="webpackとWorkboxを使い始めた - tmin.xyz"><meta name="twitter:description" content="Browserifyと自家製ServiceWorkerを置き換えました。"><meta name="twitter:site" content="t_ma1n"><script async src="https://www.googletagmanager.com/gtag/js?id=UA-107753466-1"></script>
<script>
 window.dataLayer = window.dataLayer || [];
 function gtag(){dataLayer.push(arguments);}
 gtag('js', new Date());
 gtag('config', 'UA-107753466-1');
</script></head><body><nav class="navbar navbar-dark bg-dark sticky-top flex-row"><a class="navbar-brand" href="/docs/" id="navbar_brand"><img class="d-inline-block align-top" src="/docs/files/images/icons/favicon-96x96.png" width="30" height="30" alt="ICON"><div class="navbar-brand-text">tmin.xyz</div></a><div id="navbar_items"><div class="navbar-nav flex-row justify-content-center"><a class="nav-item nav-link px-3" href="/docs/">Home</a><a class="nav-item nav-link px-3" href="/docs/MDBuilder/">MDBuilder</a><a class="nav-item nav-link px-3" href="/docs/blog/">ブログ</a><a class="nav-item nav-link px-3" href="https://chirno.tmin.xyz/" target="_blank">Chirno<i class="fa fa-external-link fa-fw" aria-hidden="true"></i></a><a class="nav-item nav-link px-3" href="http://tmin.xyz/The-Japanese-Web-Fonts/#!index.md" target="_blank">🇯🇵WebFont<i class="fa fa-external-link fa-fw" aria-hidden="true"></i></a></div></div></nav><div class="pb-5 pt-0" id="main"><article><header class="text-light" id="main_header" style="background-color: #212121;"><div class="container"><h1 id="blogheader_top">webpackとWorkboxを使い始めた</h1><div class="mb-1"><ul class="list-unstyled"><li><i class="fa fa-file-text-o fa-fw" aria-hidden="true"></i><time datetime="2017-11-02T06:43:23.599Z">2017年11月2日 15:43</time> 作成</li><li><i class="fa fa-clock-o fa-fw" aria-hidden="true"></i><time datetime="2017-11-02T08:54:06.407Z">2017年11月2日 17:54</time> 更新</li></ul></div><div class="mb-3"><i class="fa fa-folder-open fa-fw" aria-hidden="true"></i><span class="badge badge-success">Web</span> &emsp;<i class="fa fa-tags fa-fw" aria-hidden="true"></i><span class="badge badge-secondary">maqz</span> </div><div class="mb-3" id="blogheader_description">Browserifyと自家製ServiceWorkerを置き換えました。</div></div><div class="d-flex flex-wrap" id="blogheader_footer"><a class="py-3 text-light" href="/docs/blog/getval_test/" id="blogheader_prev"><div class="container">前: Markdown代入テスト</div></a><a class="py-3 text-light" href="/docs/blog/about_me/" id="blogheader_next"><div class="container">次: 私について</div></a></div></header><div class="container pt-3"><p>ちゃんと&quot;近代化&quot;を施しました。</p><p>タスクツールのGruntは永遠に変わらない気がしますが……</p><h2 class="pt-5" id="browserify-%E2%86%92-webpack">Browserify → webpack</h2><p>highlight.jsのビルド組み込みも同時に行いました。これによってビルド・クライアント両方の共通化を図ります。</p><p>highlight.jsの処理部は<code>_script.pug</code>、webpackの処理部は<code>Gruntfile.js</code>および<code>webpack.config.js</code>です。</p><h2 class="pt-5" id="workbox">Workbox</h2><p>あまり日本語の情報がありませし……英語の文書もそこまで丁寧ってわけじゃなくない？という感じですが……</p><p><strong>twbs/bootstrapのv4-devブランチからコードを借用しました。</strong><br>若干の変更はありますが、ほぼ全てをbuild/sw.jsから引用しました。</p><p>ビルド処理部は<code>Gruntfile.js</code>の<code>sw</code>タスクです。<code>workboxer()</code>関数が指定されています。<br>クライアント処理部は、ServiceWorkerエンドポイントは上記タスクによって<code>theme/js/sw.js</code>が加工され、<code>docs/service_worker.js</code>として出力されます。<br>workbox-sw(Workboxのクライアント側の中核スクリプト)は上記タスクによって<code>docs/assets/workbox-*.js</code>が自動的にコピーされます。<br>bootstrapのビルドスクリプトがどちゃくそ有能なのでぜひ使ってみて……</p></div></article></div><div class="container py-5"><div id="disqus_wrap"><div id="disqus_thread"></div></div></div><div class="py-3 bg-light" id="footer_wrap"><footer class="container"><p>Copyright: tamaina</p><p class="m-0">Site published by MarkDown Builder</p></footer></div><!--WE'RE SUPER CREW
--><script>(function() {var d = document, s = d.createElement('script');s.src = 'https://tminxyz.disqus.com/embed.js';s.setAttribute('data-timestamp', +new Date());(d.head || d.body).appendChild(s);})();</script></body></html>