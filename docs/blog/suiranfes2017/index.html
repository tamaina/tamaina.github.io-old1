<!DOCTYPE html><html lang="ja"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>高校の文化祭の2017年版のウェブサイト - アキウス</title><!--**
*
* 🌟
*
*
*
--><link rel="canonical" href="https://tmin.xyz/docs/blog/suiranfes2017/"><meta name="author" content="aqz"><meta name="description" content="あの頃はまだ若かった。"><link rel="shortcut icon" href="/docs/favicon.ico" type="image/vnd.microsoft.icon"><link rel="apple-touch-icon" href="/docs/files/images/icons/icon.svg" sizes="600x600"><link rel="shortcut icon" href="/docs/files/images/icons/icon.svg" sizes="600x600" type="image/svg+xml"><link rel="apple-touch-icon" href="/docs/files/images/icons/icon.png" sizes="600x600"><link rel="shortcut icon" href="/docs/files/images/icons/icon.png" sizes="600x600" type="image/png"><link rel="manifest" href="/docs/manifest.json"><link href="/docs/assets/style.min.css" rel="stylesheet"><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" crossorigin="anonymous"><link href="https://cdn.jsdelivr.net/npm/yakuhanjp/dist/css/yakuhanjp.min.css" rel="stylesheet" crossorigin="anonymous"><script src="/docs/assets/main.min.js" defer></script><script src="/docs/assets/fab.js" defer></script><script src="/docs/assets/pjax-api.min.js" defer></script><script src="/docs/assets/pjax-init.js" defer></script><script class='pjax-reload'>
  var disqus_config = function () {
    this.page.url = "https://tmin.xyz/docs/blog/suiranfes2017/";
    this.page.identifier = "tmin.xyz/docs/blog/suiranfes2017/";
  };
 // twbs/bootstrap build/sw.jsより借用
  if ('serviceWorker' in navigator) {
    navigator.serviceWorker.register('https://tmin.xyz/docs/service_worker.js').then(function(registration) {
      console.log('Service Workerは正常に登録されました: ', registration.scope);
        registration.onupdatefound = function () {
        var installingWorker = registration.installing
        installingWorker.onstatechange = function () {
          switch (installingWorker.state) {
            case 'installed':
              if (navigator.serviceWorker.controller) {
                console.log('ページの更新があります……')
                location.reload(true)
              }
              break
            default:
          }
        }
      }
    }).catch(function(err) {
      console.log('Service Workerを登録できませんでした: ', err);
    });
  }
// twbs/bootstrap build/sw.jsより借用
</script><meta name="theme-color" content="#2d88ef"><link rel="manifest" href="/docs/manifest.json"><link rel="alternate" href="https://github.com/tamaina/tamaina.github.io/commits/master.atom" type="application/atom+xml" title="アキウス"><meta property="og:type" content="website"><meta property="og:title" content="高校の文化祭の2017年版のウェブサイト - アキウス"><meta property="og:description" content="あの頃はまだ若かった。"><meta property="og:image" content="https://tmin.xyz/docs/files/images/icons/icon.png"><meta property="og:image" content="https://tmin.xyz/docs/files/images/icons/icon.png"><meta property="og:url" content="https://tmin.xyz/docs/blog/suiranfes2017/"><meta property="og:site_name" content="アキウス"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:image" content="https://tmin.xyz/docs/files/images/icons/icon.png"><meta name="twitter:title" content="高校の文化祭の2017年版のウェブサイト - アキウス"><meta name="twitter:description" content="あの頃はまだ若かった。"><meta name="twitter:site" content="aqzti"><script async src="https://www.googletagmanager.com/gtag/js?id=UA-107753466-1"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-107753466-1');
</script>
</head><body><nav class="navbar navbar-dark bg-dark sticky-top flex-row p-1" id="mainnav"><a class="navbar-brand" href="/docs/" id="navbar_brand"><img class="d-inline-block align-top" src="/docs/files/images/icons/icon.svg" width="30" height="30" alt="ICON"><div class="navbar-brand-text">tmin.xyz</div></a><div id="navbar_items"><div class="navbar-nav flex-row justify-content-center"><a class="text-light nav-item nav-link px-3" href="/docs/maqz/">maqz</a><a class="text-light nav-item nav-link px-3" href="/docs/blog/">ブログ</a><a class="text-light nav-item nav-link px-3" href="https://chirno.tmin.xyz/" target="_blank" rel="noopener">Chirno<i class="fa fa-external-link fa-fw" aria-hidden="true"></i></a><a class="text-light nav-item nav-link px-3" href="http://tmin.xyz/The-Japanese-Web-Fonts/#!index.md" target="_blank" rel="noopener">🇯🇵WebFont<i class="fa fa-external-link fa-fw" aria-hidden="true"></i></a></div></div></nav><nav class="bg-dark" aria-label="breadcrumb" id="breadcrumb"><div class="container"><ol class="breadcrumb bg-dark text-white m-0 py-1"><li class="breadcrumb-item"><a class="py-1" href="/docs/">Home</a></li><li class="breadcrumb-item"><a class="py-1" href="/docs/blog/">ブログ</a></li><li class="breadcrumb-item" aria-current="page">高校の文化祭の2017年版のウェブサイト</li></ol></div></nav><div class="pb-5 pt-0" id="main"><article><header class="text-light" id="main_header" style="background-color: #212121;"><div class="container"><h1 id="blogheader_top">高校の文化祭の2017年版のウェブサイト</h1><div class="mb-1"><ul class="list-unstyled"><li><i class="fa fa-file-text-o fa-fw" aria-hidden="true"></i><time datetime="2017-08-21T07:27:20.341Z">2017年8月21日 16:27</time> 作成</li><li><i class="fa fa-clock-o fa-fw" aria-hidden="true"></i><time datetime="2017-11-20T03:50:52.515Z">2017年11月20日 12:50</time> 更新</li></ul></div><div class="mb-3"><i class="fa fa-folder-open fa-fw" aria-hidden="true"></i><span class="badge badge-success">学校</span> &emsp;<i class="fa fa-tags fa-fw" aria-hidden="true"></i><span class="badge badge-info">翠巒祭</span> </div><div class="mb-3" id="blogheader_description">あの頃はまだ若かった。</div></div><div class="d-flex flex-wrap" id="blogheader_footer"><a class="py-3 text-light" href="/docs/blog/bootstrap-v4-beta/" id="blogheader_next"><div class="container">次: bootstrap v4について</div></a></div></header><div class="container pt-3"><h2 class="pt-5" id="%E6%9B%B4%E6%96%B0">更新</h2><p>◎2017/05/04 文章が雑だったのを若干修正しました<br>◎2017/05/06 バージョンアップ・Barba.jsを取り入れてpjaxに<br>◎2017/06/13 Service Worker部分だけ別立てで記事とリポジトリ作成<br>◎2017/08/10 記事の名前を変えてみる、あと色々直す<br>◎2017/08/19 grunt-fontmin-exをnpmにリリース<br>◎2017/11/02 Workbox使おうぜ</p><h2 class="pt-5" id="%E5%88%9D%E3%82%81%E3%81%AB">初めに</h2><p>殴り書きで何言ってるかわかりませんが私が何やったかわからなくなってきただけです。1人月ぐらい費やした気がします。</p><p>MDBuilderの原点です。MDBuilderはこのサイトから汎用できるように作り始めました。</p><p>qiitaに投稿した記事の転載です。</p><h2 class="pt-5" id="%E3%81%AA%E3%81%9C%E7%B4%B9%E4%BB%8B%E3%81%99%E3%82%8B%EF%BC%9F">なぜ紹介する？</h2><p>無駄に時間を掛けたのと、Googleとかが提唱するウェブページの新たなあり方がわかりそうだから。</p><h2 class="pt-5" id="%E3%81%A8%E3%82%8A%E3%81%82%E3%81%88%E3%81%9A">とりあえず</h2><p>まずリポジトリを晒すと早いんだなぁ</p><p><a href="https://github.com/suiranfes/2017.suiranfes.com" target="_blank" rel="noopener">https://github.com/suiranfes/2017.suiranfes.com</a></p><p>★Readmeに大体のことが書いてあるから、読んでね、てかReadmeあればぶっちゃけこの記事要らないくないか……？<br>どっかからそのまんま引っ張ってきたソースコードあるらしいけど、どっから引っ張ってきたか書いてない、恐るべし昔の俺(怒られる前になんとかしろ感)</p><p>と、とりあえず現物を見ると早いと思います</p><p><a href="https://2017.suiranfes.com/" target="_blank" rel="noopener">https://2017.suiranfes.com/</a></p><h2 class="pt-5" id="%E3%81%A9%E3%82%93%E3%81%AA%E3%82%B5%E3%82%A4%E3%83%88%E3%81%AA%E3%81%AE%E3%81%8B">どんなサイトなのか</h2><p><strong>Node.js</strong>の<strong>Grunt</strong>でビルドされて<strong>Pug</strong>と<strong>Stylus</strong>で書かれていてjsは<strong>Browserify</strong>と<strong>Uglify</strong>されて<strong>WebFont</strong>と<strong>Bootstrap4.0.0-alpha.6</strong>と独自で作った和紙っぽい背景が多用されていて<strong>RSS2.0</strong>や<strong>Service Worker</strong>や<strong>Web Notification</strong>が設定されているmixhost上に置かれている<strong>静的サイト</strong></p><p>Googleのいうところの<strong>PWA</strong></p><p>適切に設定されればgithubでも動く、というか本来githubで動かすはずだったがmixhostに課金した。mixhostにした結果、CloudFlareが御用になった。</p><p>いちいちビルドする必要があるけど、Travis-CIでビルド結果をpushしたりもできた(ftpするので今は切ってる、っていうか完全にお遊び機能……)</p><p>ビルドごとにフォントをサブセットするので読み込みが非常に軽い(ただし作成が時間かかる、そして文字数が多いと変わらない感じ)。</p><p>表示上唯一の欠点はIEで動かないこと(どういうわけかレンダリングがぼろぼろになる、なんだこれは……)</p><h3 class="pt-5" id="%E6%8A%80%E8%A1%93%E7%9A%84%E3%81%AA%E6%AE%B4%E3%82%8A%E6%9B%B8%E3%81%8D">技術的な殴り書き</h3><p>もはや説明する気になれない(本が書けそう、まあブログ記事とかリファレンスとかの盗用の塊なだけなんだけど)<br>いろんなサイトを読み漁った結果ちゃんと参照できてないです。どうすんだよ。</p><h2 class="pt-5" id="%E3%81%B2%E3%81%A8%E3%81%A4%E3%81%A5%E3%81%A4%E8%A6%8B%E3%81%A6%E3%81%84%E3%81%93%E3%81%86">ひとつづつ見ていこう</h2><p>とは言ったものの<strong>Gruntfile.jsを全部読むのが近道</strong></p><h3 class="pt-5" id="json%E3%81%AB%E3%82%88%E3%82%8B%E6%83%85%E5%A0%B1%E7%AE%A1%E7%90%86">jsonによる情報管理</h3><p>ねえねえ、文化祭で扱う情報量ってばかにならないんだよ？っていうわけで、とりあえずそういうことをしてみる。<strong>extend</strong>ってそんな便利なもんあったのかよ感。</p><p>って感じで、PugとStylusで操作できるようにイベントや食べ物、サイトの情報を全てjson(連想配列)で流します。</p><p>config内のすべてのファイルを統合した<a href="https://2017.suiranfes.com/api/v1/index.jsonが利用可能です。" target="_blank" rel="noopener">https://2017.suiranfes.com/api/v1/index.jsonが利用可能です。</a></p><h3 class="pt-5" id="bootstrap-4-0-0-alpha-6">bootstrap 4.0.0-alpha.6</h3><p>1月ぐらいから弄っている立派なお友達です。</p><p>いろんなものの余白が全部なくなって、p-2とかpt-2とかp-autoとかm-2とか指定しないといけないみたいです。<strong>ドチャクソ便利だわこれ。</strong></p><p>もとをたどるとHonokaから派生してv4-alpha.6を載っけてSuikaって名付けたやつだけど、WebFontとか完全にうち仕様でscssでビルドなんて知るかっていう感じのやつです。ごめんなさい。これもうHonokaどころじゃないし、Honokaって完全移植できてないのねー。あと、HonokaのStylus化にも取り組みたいところ(変数共有的な意味が強い、あと必要な機能の無効化、そしてさらに吐き出したしたCSSの省力化が期待できる云々)</p><p>デザインとかビルドとかはさておき、CSSとDocumentationの仕様対応してるのが重要です。と言うより、v4.0.0-alpha.5から突然変わってかなり焦りました。</p><h3 class="pt-5" id="browserify%E3%81%A8uglify">BrowserifyとUglify</h3><p>Browserifyの書き方でつまづいたけど、今ちゃんと動いてます(ドキュメント少なすぎぃ)</p><p>書き方に困ってる人は参考にしてほしいかな(<code>src/js</code>の、メインはmain.js)</p><h3 class="pt-5" id="webfont">WebFont</h3><p>grunt-fontminを利用。ちょっとだけ弄ってwoff2とttfが出てくるようになりました。<br><del>Gruntfile.jsの前半が思いっきりfontminに割かれてます(別にして公開しろって?めんどい、だれか登録して)</del><br>→npmに上げた(<a href="https://www.npmjs.com/package/grunt-fontmin-ex" target="_blank" rel="noopener">https://www.npmjs.com/package/grunt-fontmin-ex</a>)</p><p>これやると<a href="http://jikasei.me/font/genshin/" target="_blank" rel="noopener">源真ゴシック(源ノ角フォント=Source Han Sans、の改良版)</a>のサイズがめっちゃ小さくなる。Google早期アクセスもTypekitも知るかって感じになります。やばいです。</p><p>ちなみに手法は変化していて、「とりあえず全部読ましとく(1MBが3ウェイトで3MB)→Typekit導入→grunt-fontmin」と変化しています。<br>まあ大まかな流れなので、細かいのはソース解読してね(ぇ</p><h3 class="pt-5" id="service-worker">Service Worker</h3><p>別立てで記事作成 <a href="http://qiita.com/aqz/items/804a2d9e38dfb82a33be" target="_blank" rel="noopener">http://qiita.com/aqz/items/804a2d9e38dfb82a33be</a></p><h2 class="pt-5" id="%E7%B5%90%E5%B1%80%E4%BD%95%E3%81%8C%E8%A8%80%E3%81%84%E3%81%9F%E3%81%84">結局何が言いたい</h2><p>文化祭のHPにしては先進的だろう？そうであろう？(そういうのを変態と言う？)</p><p>以上、Node.jsはサイトビルダー(ただしgrunt)</p></div></article></div><div class="container py-5"><div id="disqus_wrap"><div id="disqus_thread"></div></div></div><div class="py-3 bg-light" id="footer_wrap"><footer class="container"><p>Copyright: tamaina</p><p class="m-0">This site built by maqz</p></footer></div><div id="share_modal_open_button"><button class="btn btn-primary rounded-circle ml-lg-5 m-3" type="button" data-toggle="modal" data-target="#share_modal" aria-labelledby="share_modal_label"><i class="fa fa-share-square-o fa-fw" aria-hidden="true"></i></button></div><div class="modal fade" id="share_modal" tabindex="-1" role="dialog" aria-labelledby="share_modal_label" aria-hidden="true"><div class="modal-dialog modal-dialog-centered" role="document"><div class="modal-content"><div class="modal-header"><h5 class="modal-title"><i class="fa fa-share-square-o fa-fw" aria-hidden="true"></i>シェア</h5><button class="close" type="button" data-dismiss="modal" aria-label="閉じる"><span aria-hidden="true">&times;</span></button></div><div class="modal-body" id="share_modal_body"><p id="share_modal_label">「高校の文化祭の2017年版のウェブサイト」をSNSで共有</p><a class="twitter-share-button" href="https://twitter.com/share?ref_src=twsrc%5Etfw" data-show-count="true">Tweet</a> <a class="twitter-follow-button" href="https://twitter.com/aqzti?ref_src=twsrc%5Etfw" data-show-count="false">Follow @aqzti</a> <br><div class="line-it-button" style="display: none;" data-lang="ja" data-type="share-a" data-url="https://tmin.xyz/docs/blog/suiranfes2017/"></div><br><div class="fb-share-button" data-href="https://tmin.xyz/docs/blog/suiranfes2017/" data-layout="button_count" data-size="small" data-mobile-iframe="true"><a class="fb-xfbml-parse-ignore" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Ftmin.xyz%2Fdocs%2Fblog%2Fsuiranfes2017%2F">シェア</a></div></div></div></div></div><div id="fb-root"></div><script src='https://connect.facebook.net/ja_JP/sdk.js#xfbml=1&version=v2.11&appId=1216117028459212' id='facebook-jssdk'></script>
<script src='https://platform.twitter.com/widgets.js'></script>
<script src='https://d.line-scdn.net/r/web/social-plugin/js/thirdparty/loader.min.js'></script><!--WE'RE SUPER CREW
--><script>(function() {var d = document, s = d.createElement('script');s.src = 'https://tminxyz.disqus.com/embed.js';s.setAttribute('data-timestamp', +new Date());(d.head || d.body).appendChild(s);})();</script></body></html>