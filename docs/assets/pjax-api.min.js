/*! pjax-api v3.15.0 https://github.com/falsandtru/pjax-api | (c) 2016, falsandtru | (Apache-2.0 AND MPL-2.0) License */
require=function e(t,n,r){function o(u,c){if(!n[u]){if(!t[u]){var a="function"==typeof require&&require;if(!c&&a)return a(u,!0);if(i)return i(u,!0);var s=new Error("Cannot find module '"+u+"'");throw s.code="MODULE_NOT_FOUND",s}var f=n[u]={exports:{}};t[u][0].call(f.exports,function(e){var n=t[u][1][e];return o(n||e)},f,f.exports,e,t,n,r)}return n[u].exports}for(var i="function"==typeof require&&require,u=0;u<r.length;u++)o(r[u]);return o}({1:[function(e,t,n){},{}],2:[function(e,t,n){arguments[4][1][0].apply(n,arguments)},{dup:1}],3:[function(e,t,n){"use strict";function r(e){return function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];if(void 0===t||null===t)throw new TypeError("Spica: assign: Cannot walk on "+t+".");for(var o=0,i=n;o<i.length;o++){var u=i[o];if(void 0!==u&&null!==u)for(var c=0,a=Object.keys(Object(u));c<a.length;c++){var s=a[c],f=Object.getOwnPropertyDescriptor(Object(u),s);void 0!==f&&f.enumerable&&e(s,Object(t),Object(u))}}return Object(t)}}Object.defineProperty(n,"__esModule",{value:!0});var o=e("./type");n.assign=r(function(e,t,n){return t[e]=n[e]}),n.clone=r(function(e,t,r){switch(o.type(r[e])){case"Array":return t[e]=n.clone([],r[e]);case"Object":return t[e]=n.clone({},r[e]);default:return t[e]=r[e]}}),n.extend=r(function(e,t,r){switch(o.type(r[e])){case"Array":return t[e]=n.extend([],r[e]);case"Object":switch(o.type(t[e])){case"Function":case"Object":return t[e]=n.extend(t[e],r[e]);default:return t[e]=n.extend({},r[e])}default:return t[e]=r[e]}})},{"./type":74}],4:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("./exception"),o=e("./monad/maybe"),i=e("./monad/either"),u=function(){return function(e){void 0===e&&(e=[]);var t=this;this.done=!1,this.listeners=new Set,this.register=function(e){function n(t){try{e(t)}catch(t){r.causeAsyncException(t)}}return t.canceled?(n(t.reason),function(){}):t.done?function(){}:(t.listeners.add(n),function(){return t.done?void 0:void t.listeners.delete(n)})},this.cancel=function(e){t.done||(t.done=!0,t.canceled=!0,t.reason=e,Object.freeze(t.listeners),Object.freeze(t),t.listeners.forEach(function(t){return void t(e)}))},this.close=function(){t.done||(t.done=!0,Object.freeze(t.listeners),Object.freeze(t))},this.canceled=!1,this.promise=function(e){return t.canceled?new Promise(function(e,n){return void n(t.reason)}):Promise.resolve(e)},this.maybe=function(e){return t.canceled?o.Nothing:o.Just(e)},this.either=function(e){return t.canceled?i.Left(t.reason):i.Right(e)},Array.from(e).forEach(function(e){return void e.register(t.cancel)})}}();n.Cancellation=u},{"./exception":10,"./monad/either":16,"./monad/maybe":20}],5:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("./assign");n.compose=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.reduce(function(e,t){r.assign(e.prototype,t.prototype);for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},e)}},{"./assign":3}],6:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.concat=function(e,t){for(var n=0,r=t.length,o=e.length;n<r;++n)e[n+o]=t[n];return e}},{}],7:[function(e,t,n){"use strict";function r(e,t,n){return e.length<=t.length?e.apply(n,t.slice(0,e.length)):function(){for(var o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];return r(e,t.concat(o),n)}}Object.defineProperty(n,"__esModule",{value:!0}),n.curry=function(e,t){return 0===e.length?function(){return e.call(t)}:r(e,[],t)}},{}],8:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),function(e){for(var t in e)n.hasOwnProperty(t)||(n[t]=e[t])}(e("./monad/either"))},{"./monad/either":16}],9:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.findIndex=function(e,t){for(var n=e!==e,r=0;r<t.length;++r){var o=t[r];if(n?o!==o:o===e)return r}return-1}},{}],10:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.causeAsyncException=function(e){new Promise(function(t,n){return void n(e)})}},{}],11:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("./curry");n.flip=function(e){return r.curry(function(t,n){return e.length>1?e(n,t):e(n)(t)})}},{"./curry":7}],12:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("./concat"),o=function(){function e(){this.NIL}return e.prototype.push=function(e){return new i(e,this)},e.prototype.extend=function(e){return this.push(e())},e.prototype.array=function(){return[]},e}();n.HNil=o;var i=function(){function e(e,t){this.head=e,this.tail=t,this.CONS}return e.prototype.push=function(t){return new e(t,this)},e.prototype.walk=function(e){return e(this.head),this.tail},e.prototype.modify=function(e){return this.tail.push(e(this.head))},e.prototype.extend=function(e){return this.push(e(this.head))},e.prototype.compact=function(e){var t=this;return this.tail.modify(function(n){return e(t.head,n)})},e.prototype.reverse=function(){return this.array().reduce(function(e,t){return e.push(t)},new o)},e.prototype.tuple=function(){return this.array()},e.prototype.array=function(){return r.concat([this.head],this.tail.array())},e}()},{"./concat":6}],13:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),function(e){for(var t in e)n.hasOwnProperty(t)||(n[t]=e[t])}(e("./monad/maybe"))},{"./monad/maybe":20}],14:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("./functor"),i=e("../curry"),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t}(o.Functor);n.Applicative=u,function(e){function t(e,n){return n?e.bind(function(e){return n.fmap(function(t){return 0===e.length?e(t):i.curry(e)(t)})}):function(n){return t(e,n)}}e.ap=t}(u=n.Applicative||(n.Applicative={})),n.Applicative=u},{"../curry":7,"./functor":17}],15:[function(e,t,n){"use strict";function r(){throw new Error("Spica: Either: Invalid thunk call.")}var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var i=function(e){function t(t){var n=e.call(this,t)||this;return n.EITHER,n}return o(t,e),t.prototype.fmap=function(e){return this.bind(function(t){return new c(e(t))})},t.prototype.ap=function(e){return t.ap(this,e)},t.prototype.bind=function(e){var n=this;return new t(function(){var r=n.evaluate();if(r instanceof u)return r;if(r instanceof c)return e(r.extract());if(r instanceof t)return r.bind(e);throw new TypeError("Spica: Either: Invalid monad value.\n\t"+r)})},t.prototype.extract=function(e,t){return t?this.fmap(t).extract(e):this.evaluate().extract(e)},t}(e("./monad").Monad);n.Either=i,function(e){function t(e){return new c(e)}e.pure=t,e.Return=t}(i=n.Either||(n.Either={})),n.Either=i;var u=function(e){function t(t){var n=e.call(this,r)||this;return n.a=t,n.LEFT,n}return o(t,e),t.prototype.bind=function(e){return this},t.prototype.extract=function(e){if(!e)throw this.a;return e(this.a)},t}(i);n.Left=u;var c=function(e){function t(t){var n=e.call(this,r)||this;return n.b=t,n.RIGHT,n}return o(t,e),t.prototype.bind=function(e){var t=this;return new i(function(){return e(t.extract())})},t.prototype.extract=function(e,t){return t?t(this.b):this.b},t}(i);n.Right=c},{"./monad":21}],16:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("./either.impl");!function(e){e.fmap=r.Either.fmap,e.pure=r.Either.pure,e.ap=r.Either.ap,e.Return=r.Either.Return,e.bind=r.Either.bind}(n.Either||(n.Either={})),n.Left=function(e){return new r.Left(e)},n.Right=function(e){return new r.Right(e)}},{"./either.impl":15}],17:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t}(e("./lazy").Lazy);n.Functor=o,function(e){e.fmap=function(e,t){return t?e.fmap(t):function(t){return e.fmap(t)}}}(o=n.Functor||(n.Functor={})),n.Functor=o},{"./lazy":18}],18:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e){this.thunk=e}return e.prototype.evaluate=function(){return this.memory_=this.memory_||this.thunk()},e}();n.Lazy=r},{}],19:[function(e,t,n){"use strict";function r(){throw new Error("Spica: Maybe: Invalid thunk call.")}var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var i=function(e){function t(t){var n=e.call(this,t)||this;return n.MAYBE,n}return o(t,e),t.prototype.fmap=function(e){return this.bind(function(t){return new u(e(t))})},t.prototype.ap=function(e){return t.ap(this,e)},t.prototype.bind=function(e){var n=this;return new t(function(){var r=n.evaluate();if(r instanceof u)return e(r.extract());if(r instanceof c)return r;if(r instanceof t)return r.bind(e);throw new TypeError("Spica: Maybe: Invalid monad value.\n\t"+r)})},t.prototype.extract=function(e,t){return t?this.fmap(t).extract(e):this.evaluate().extract(e)},t}(e("./monadplus").MonadPlus);n.Maybe=i,function(e){function t(e){return new u(e)}e.pure=t,e.Return=t}(i=n.Maybe||(n.Maybe={})),n.Maybe=i;var u=function(e){function t(t){var n=e.call(this,r)||this;return n.a=t,n.JUST,n}return o(t,e),t.prototype.bind=function(e){var t=this;return new i(function(){return e(t.extract())})},t.prototype.extract=function(e,t){return t?t(this.a):this.a},t}(i);n.Just=u;var c=function(e){function t(){var t=e.call(this,r)||this;return t.NOTHING,t}return o(t,e),t.prototype.bind=function(e){return this},t.prototype.extract=function(e){if(!e)throw void 0;return e()},t}(i);n.Nothing=c,function(e){e.mzero=new c,e.mplus=function(t,n){return new e(function(){return t.fmap(function(){return t}).extract(function(){return n})})}}(i=n.Maybe||(n.Maybe={})),n.Maybe=i},{"./monadplus":22}],20:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("./maybe.impl");!function(e){e.fmap=r.Maybe.fmap,e.pure=r.Maybe.pure,e.ap=r.Maybe.ap,e.Return=r.Maybe.Return,e.bind=r.Maybe.bind,e.mzero=r.Maybe.mzero,e.mplus=r.Maybe.mplus}(n.Maybe||(n.Maybe={})),n.Just=function(e){return new r.Just(e)},n.Nothing=r.Maybe.mzero},{"./maybe.impl":19}],21:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t}(e("./applicative").Applicative);n.Monad=o,function(e){function t(e,n){return n?e.bind(n):function(n){return t(e,n)}}e.bind=t}(o=n.Monad||(n.Monad={})),n.Monad=o},{"./applicative":14}],22:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t}(e("./monad").Monad);n.MonadPlus=o,o=n.MonadPlus||(n.MonadPlus={}),n.MonadPlus=o},{"./monad":21}],23:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("./sequence/core");n.Sequence=r.Sequence;var o=e("./sequence/member/static/resume"),i=e("./sequence/member/static/from"),u=e("./sequence/member/static/cycle"),c=e("./sequence/member/static/random"),a=e("./sequence/member/static/concat"),s=e("./sequence/member/static/zip"),f=e("./sequence/member/static/difference"),p=e("./sequence/member/static/union"),l=e("./sequence/member/static/intersect"),d=e("./sequence/member/static/pure"),h=e("./sequence/member/static/return"),v=e("./sequence/member/static/mempty"),y=e("./sequence/member/static/mconcat"),m=e("./sequence/member/static/mappend"),_=e("./sequence/member/static/mzero"),b=e("./sequence/member/static/mplus"),w=e("./sequence/member/instance/extract"),q=e("./sequence/member/instance/iterate"),O=e("./sequence/member/instance/memoize"),S=e("./sequence/member/instance/reduce"),g=e("./sequence/member/instance/take"),P=e("./sequence/member/instance/drop"),j=e("./sequence/member/instance/takeWhile"),x=e("./sequence/member/instance/dropWhile"),k=e("./sequence/member/instance/takeUntil"),T=e("./sequence/member/instance/dropUntil"),M=e("./sequence/member/instance/sort"),E=e("./sequence/member/instance/fmap"),A=e("./sequence/member/instance/ap"),I=e("./sequence/member/instance/bind"),R=e("./sequence/member/instance/mapM"),L=e("./sequence/member/instance/filterM"),U=e("./sequence/member/instance/map"),z=e("./sequence/member/instance/filter"),D=e("./sequence/member/instance/scan"),F=e("./sequence/member/instance/foldr"),N=e("./sequence/member/instance/group"),C=e("./sequence/member/instance/inits"),H=e("./sequence/member/instance/tails"),J=e("./sequence/member/instance/segs"),G=e("./sequence/member/instance/subsequences"),W=e("./sequence/member/instance/permutations");e("../compose").compose(r.Sequence,o.default,i.default,u.default,c.default,a.default,s.default,f.default,p.default,l.default,d.default,h.default,v.default,y.default,m.default,_.default,b.default,w.default,q.default,O.default,S.default,g.default,P.default,j.default,x.default,k.default,T.default,M.default,E.default,A.default,I.default,R.default,L.default,U.default,z.default,D.default,F.default,N.default,C.default,H.default,J.default,G.default,W.default)},{"../compose":5,"./sequence/core":24,"./sequence/member/instance/ap":25,"./sequence/member/instance/bind":26,"./sequence/member/instance/drop":27,"./sequence/member/instance/dropUntil":28,"./sequence/member/instance/dropWhile":29,"./sequence/member/instance/extract":30,"./sequence/member/instance/filter":31,"./sequence/member/instance/filterM":32,"./sequence/member/instance/fmap":33,"./sequence/member/instance/foldr":34,"./sequence/member/instance/group":35,"./sequence/member/instance/inits":36,"./sequence/member/instance/iterate":37,"./sequence/member/instance/map":38,"./sequence/member/instance/mapM":39,"./sequence/member/instance/memoize":40,"./sequence/member/instance/permutations":41,"./sequence/member/instance/reduce":42,"./sequence/member/instance/scan":43,"./sequence/member/instance/segs":44,"./sequence/member/instance/sort":45,"./sequence/member/instance/subsequences":46,"./sequence/member/instance/tails":47,"./sequence/member/instance/take":48,"./sequence/member/instance/takeUntil":49,"./sequence/member/instance/takeWhile":50,"./sequence/member/static/concat":51,"./sequence/member/static/cycle":52,"./sequence/member/static/difference":53,"./sequence/member/static/from":54,"./sequence/member/static/intersect":55,"./sequence/member/static/mappend":56,"./sequence/member/static/mconcat":57,"./sequence/member/static/mempty":58,"./sequence/member/static/mplus":59,"./sequence/member/static/mzero":60,"./sequence/member/static/pure":61,"./sequence/member/static/random":62,"./sequence/member/static/resume":63,"./sequence/member/static/return":64,"./sequence/member/static/union":65,"./sequence/member/static/zip":66}],24:[function(e,t,n){"use strict";function r(){throw new Error("Spica: Sequence: Invalid thunk call.")}var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var i=function(e){function t(t){var n=e.call(this,r)||this;return n.cons=t,n}return o(t,e),t.prototype[Symbol.iterator]=function(){var e=this,n=function(){return e.iterate()};return{next:function(){var e=n();return n=t.Thunk.iterator(e),{done:!t.isIterable(e),value:t.Thunk.value(e)}}}},t}(e("../monadplus").MonadPlus);n.Sequence=i,i=n.Sequence||(n.Sequence={}),n.Sequence=i,function(e){!function(t){t.cons=function(t,n){switch(arguments.length){case 0:return[];case 1:return[t];case 2:return[t,n];default:throw e.Exception.invalidConsError(arguments)}}}(e.Data||(e.Data={}));var t;!function(e){e.value=function(e){return e[0]},e.iterator=function(e){return e[1]},e.index=function(e){return e[2]}}(t=e.Thunk||(e.Thunk={}));var n;!function(n){function r(n,o,i){return e.isIterable(n)?i(n,function(){return r(t.iterator(n)(),o,i)}):o(n)}n.done=function(){return[void 0,n.done,-1]},n.when=r}(n=e.Iterator||(e.Iterator={})),e.isIterable=function(e){return t.iterator(e)!==n.done};!function(e){e.invalidConsError=function(e){return console.error(e,e.length,e[0],e[1]),new TypeError("Spica: Sequence: Invalid parameters of cons.")},e.invalidDataError=function(e){return console.error(e),new TypeError("Spica: Sequence: Invalid data.")},e.invalidThunkError=function(e){return console.error(e),new TypeError("Spica: Sequence: Invalid thunk.")}}(e.Exception||(e.Exception={}))}(i=n.Sequence||(n.Sequence={})),n.Sequence=i},{"../monadplus":22}],25:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../core"),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.ap=function(e){return o.Sequence.ap(this,e)},t}(o.Sequence);n.default=i},{"../../core":24}],26:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../core"),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.bind=function(e){return o.Sequence.concat(this.fmap(e))},t}(o.Sequence);n.default=i},{"../../core":24}],27:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../core"),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.drop=function(e){var t=this;return new o.Sequence(function(n,r){return void 0===n&&(n=function(){return t.iterate()}),o.Sequence.Iterator.when(n(),function(){return r()},function(t,n){return o.Sequence.Thunk.index(t)<e?n():r(o.Sequence.Thunk.value(t),o.Sequence.Thunk.iterator(t))})})},t}(o.Sequence);n.default=i},{"../../core":24}],28:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../core"),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.dropUntil=function(e){var t=this;return new o.Sequence(function(n,r){return void 0===n&&(n=function(){return t.iterate()}),o.Sequence.Iterator.when(n(),function(){return r()},function(t,n){return e(o.Sequence.Thunk.value(t))?n():r(o.Sequence.Thunk.value(t),o.Sequence.Thunk.iterator(t))})})},t}(o.Sequence);n.default=i},{"../../core":24}],29:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../core"),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.dropWhile=function(e){var t=this;return new o.Sequence(function(n,r){return void 0===n&&(n=function(){return t.iterate()}),o.Sequence.Iterator.when(n(),function(){return r()},function(t,n){return e(o.Sequence.Thunk.value(t))?n():r(o.Sequence.Thunk.value(t),o.Sequence.Thunk.iterator(t))})})},t}(o.Sequence);n.default=i},{"../../core":24}],30:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../core"),i=e("../../../../concat"),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.extract=function(){for(var e=this,t=[],n=function(){return e.iterate()};;){var r=n();if(!o.Sequence.isIterable(r))return t;i.concat(t,[o.Sequence.Thunk.value(r)]),n=o.Sequence.Thunk.iterator(r)}},t}(o.Sequence);n.default=u},{"../../../../concat":6,"../../core":24}],31:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../core"),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.filter=function(e){var t=this;return new o.Sequence(function(n,r){return void 0===n&&(n=function(){return t.iterate()}),o.Sequence.Iterator.when(n(),function(){return r()},function(t,n){return e(o.Sequence.Thunk.value(t),o.Sequence.Thunk.index(t))?r(o.Sequence.Thunk.value(t),o.Sequence.Thunk.iterator(t)):n()})})},t}(o.Sequence);n.default=i},{"../../core":24}],32:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../core"),i=e("../../../../concat"),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.filterM=function(e){var t=this;return o.Sequence.from([0]).bind(function(){var n=t.extract();switch(n.length){case 0:return o.Sequence.from([[]]);default:var r=n.shift();return e(r).bind(function(t){return t?0===n.length?o.Sequence.from([[r]]):o.Sequence.from(n).filterM(e).fmap(function(e){return i.concat([r],e)}):0===n.length?o.Sequence.from([[]]):o.Sequence.from(n).filterM(e)})}})},t}(o.Sequence);n.default=u},{"../../../../concat":6,"../../core":24}],33:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../core"),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.fmap=function(e){var t=this;return new o.Sequence(function(n){return void 0===n&&(n=function(){return t.iterate()}),o.Sequence.Iterator.when(n(),function(){return o.Sequence.Data.cons()},function(t){return o.Sequence.Data.cons(e(o.Sequence.Thunk.value(t)),o.Sequence.Thunk.iterator(t))})})},t}(o.Sequence);n.default=i},{"../../core":24}],34:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../core"),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.foldr=function(e,t){var n=this;return new o.Sequence(function(r){return void 0===r&&(r=function(){return n.reduce().iterate()}),o.Sequence.Iterator.when(r(),function(){return o.Sequence.Data.cons(t)},function(n){return o.Sequence.Data.cons(e(o.Sequence.Thunk.value(n),o.Sequence.resume(o.Sequence.Thunk.iterator(n)).foldr(e,t)))})}).bind(function(e){return e})},t}(o.Sequence);n.default=i},{"../../core":24}],35:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../core"),i=e("../../../../concat"),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.group=function(e){var t=this;return new o.Sequence(function(n,r){var u=void 0===n?[function(){return t.iterate()},[]]:n,c=u[0],a=u[1];return o.Sequence.Iterator.when(c(),function(){return 0===a.length?r():r(a)},function(t,n){return 0===a.length||e(a[0],o.Sequence.Thunk.value(t))?(i.concat(a,[o.Sequence.Thunk.value(t)]),n()):r(a,[o.Sequence.Thunk.iterator(t),i.concat([],[o.Sequence.Thunk.value(t)])])})})},t}(o.Sequence);n.default=u},{"../../../../concat":6,"../../core":24}],36:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../core"),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.inits=function(){return o.Sequence.mappend(o.Sequence.from([[]]),this.scan(function(e,t){return e.concat([t])},[]).dropWhile(function(e){return 0===e.length}))},t}(o.Sequence);n.default=i},{"../../core":24}],37:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../core"),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.iterate=function(){return this.iterate_()},t.prototype.iterate_=function(e,t){var n=this;void 0===t&&(t=0);var r=this.cons(e,o.Sequence.Data.cons);switch(r.length){case 0:return[void 0,o.Sequence.Iterator.done,-1];case 1:return[r[0],function(){return o.Sequence.Iterator.done()},t];case 2:return[r[0],function(){return n.iterate_(r[1],t+1)},t];default:throw o.Sequence.Exception.invalidDataError(r)}},t}(o.Sequence);n.default=i},{"../../core":24}],38:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../core"),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.map=function(e){var t=this;return new o.Sequence(function(n){return void 0===n&&(n=function(){return t.iterate()}),o.Sequence.Iterator.when(n(),function(){return o.Sequence.Data.cons()},function(t){return o.Sequence.Data.cons(e(o.Sequence.Thunk.value(t),o.Sequence.Thunk.index(t)),o.Sequence.Thunk.iterator(t))})})},t}(o.Sequence);n.default=i},{"../../core":24}],39:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../core"),i=e("../../../../concat"),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.mapM=function(e){var t=this;return o.Sequence.from([0]).bind(function(){var n=t.extract();switch(n.length){case 0:return o.Sequence.mempty;default:var r=n.shift();return e(r).bind(function(t){return 0===n.length?o.Sequence.from([[t]]):o.Sequence.from(n).mapM(e).fmap(function(e){return i.concat([t],e)})})}})},t}(o.Sequence);n.default=u},{"../../../../concat":6,"../../core":24}],40:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../core"),i=new WeakMap,u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.memoize=function(){var e=this;return new o.Sequence(function(t,n){var r=void 0===t?[0,i.get(e)||i.set(e,new Map).get(e)]:t,u=r[0],c=r[1];return o.Sequence.Iterator.when(c.get(u)||c.set(u,u>0&&c.has(u-1)?o.Sequence.Thunk.iterator(c.get(u-1))():e.iterate()).get(u),function(){return n()},function(e){return n(o.Sequence.Thunk.value(e),[u+1,c])})})},t}(o.Sequence);n.default=u},{"../../core":24}],41:[function(e,t,n){"use strict";function r(e,t){return i.Sequence.Iterator.when(e.iterate(),function(){return i.Sequence.mempty},function(e){return new i.Sequence(function(n,o){return i.Sequence.Iterator.when(e,function(){return o()},function(e){function n(e,t){return u(function(e){return e},e,t)[1]}function u(e,t,n){return i.Sequence.Iterator.when(t.iterate(),function(){return[a,n]},function(t){var r=i.Sequence.Thunk.value(t),o=u(function(t){return e(i.Sequence.mappend(i.Sequence.from([r]),t))},i.Sequence.resume(i.Sequence.Thunk.iterator(t)),n),a=o[0],s=o[1];return[i.Sequence.mappend(i.Sequence.from([r]),a),i.Sequence.mappend(i.Sequence.from([e(i.Sequence.mappend(i.Sequence.from([c]),i.Sequence.mappend(i.Sequence.from([r]),a))).extract()]),s)]})}var c=i.Sequence.Thunk.value(e),a=i.Sequence.resume(i.Sequence.Thunk.iterator(e)).memoize();return o(t.permutations().foldr(function(e,t){return n(i.Sequence.from(e),t)},r(a,i.Sequence.mappend(i.Sequence.from([c]),t))))})}).bind(function(e){return e})})}var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../core"),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.permutations=function(){var e=this;return i.Sequence.from([0]).bind(function(){var t=e.extract();return 0===t.length?i.Sequence.mempty:i.Sequence.from([t])}).bind(function(e){return i.Sequence.mappend(i.Sequence.from([e]),r(i.Sequence.from(e),i.Sequence.mempty))})},t}(i.Sequence);n.default=u},{"../../core":24}],42:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../core"),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.reduce=function(){var e=this;return new o.Sequence(function(t,n){var r=void 0===t?[0,new Map]:t,i=r[0],u=r[1];return o.Sequence.Iterator.when(u.get(i)||u.set(i,i>0&&u.has(i-1)?o.Sequence.Thunk.iterator(u.get(i-1))():e.iterate()).get(i),function(){return n()},function(e){return n(o.Sequence.Thunk.value(e),[i+1,u])})})},t}(o.Sequence);n.default=i},{"../../core":24}],43:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../core"),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.scan=function(e,t){var n=this;return new o.Sequence(function(r){var i=void 0===r?[t,function(){return n.iterate()},0]:r,u=i[0],c=i[1],a=i[2];return o.Sequence.Iterator.when(c(),function(){return 0===a?o.Sequence.Data.cons(t):o.Sequence.Data.cons()},function(t){return o.Sequence.Data.cons(u=e(u,o.Sequence.Thunk.value(t)),[u,o.Sequence.Thunk.iterator(t),o.Sequence.Thunk.index(t)+1])})})},t}(o.Sequence);n.default=i},{"../../core":24}],44:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../core"),i=e("../../../../concat"),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.segs=function(){return o.Sequence.mappend(this.foldr(function(e,t){return t.take(1).bind(function(n){return o.Sequence.mappend(o.Sequence.from([o.Sequence.mappend(o.Sequence.from([[e]]),o.Sequence.from(n).map(function(t){return i.concat([e],t)}))]),t)})},o.Sequence.from([o.Sequence.from([])])).bind(function(e){return e}),o.Sequence.from([[]]))},t}(o.Sequence);n.default=u},{"../../../../concat":6,"../../core":24}],45:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../core"),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.sort=function(e){return o.Sequence.from(this.extract().sort(e))},t}(o.Sequence);n.default=i},{"../../core":24}],46:[function(e,t,n){"use strict";function r(e){return i.Sequence.Iterator.when(e.iterate(),function(){return i.Sequence.mempty},function(e){return i.Sequence.mappend(i.Sequence.from([[i.Sequence.Thunk.value(e)]]),new i.Sequence(function(t,n){return i.Sequence.Iterator.when(e,function(){return n()},function(e){return n(r(i.Sequence.resume(i.Sequence.Thunk.iterator(e))).foldr(function(t,n){return i.Sequence.mappend(i.Sequence.mappend(i.Sequence.from([t]),i.Sequence.from([u.concat([i.Sequence.Thunk.value(e)],t)])),n)},i.Sequence.mempty))})}).bind(function(e){return e}))})}var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../core"),u=e("../../../../concat"),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.subsequences=function(){var e=this;return i.Sequence.mappend(i.Sequence.from([[]]),i.Sequence.from([0]).bind(function(){return r(e)}))},t}(i.Sequence);n.default=c},{"../../../../concat":6,"../../core":24}],47:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../core"),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.tails=function(){return o.Sequence.mappend(o.Sequence.from(this.extract().map(function(e,t,n){return n.slice(t)})),o.Sequence.from([[]]))},t}(o.Sequence);n.default=i},{"../../core":24}],48:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../core"),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.take=function(e){var t=this;return new o.Sequence(function(n,r){return void 0===n&&(n=function(){return t.iterate()}),o.Sequence.Iterator.when(e>0?n():o.Sequence.Iterator.done(),function(){return r()},function(t){return o.Sequence.Thunk.index(t)+1<e?r(o.Sequence.Thunk.value(t),o.Sequence.Thunk.iterator(t)):r(o.Sequence.Thunk.value(t))})})},t}(o.Sequence);n.default=i},{"../../core":24}],49:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../core"),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.takeUntil=function(e){var t=this;return new o.Sequence(function(n,r){return void 0===n&&(n=function(){return t.iterate()}),o.Sequence.Iterator.when(n(),function(){return r()},function(t){return e(o.Sequence.Thunk.value(t))?r(o.Sequence.Thunk.value(t)):r(o.Sequence.Thunk.value(t),o.Sequence.Thunk.iterator(t))})})},t}(o.Sequence);n.default=i},{"../../core":24}],50:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../core"),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.takeWhile=function(e){var t=this;return new o.Sequence(function(n,r){return void 0===n&&(n=function(){return t.iterate()}),o.Sequence.Iterator.when(n(),function(){return r()},function(t){return e(o.Sequence.Thunk.value(t))?r(o.Sequence.Thunk.value(t),o.Sequence.Thunk.iterator(t)):r()})})},t}(o.Sequence);n.default=i},{"../../core":24}],51:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../core"),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.concat=function(e){return new o.Sequence(function(t,n){var r=void 0===t?[function(){return e.iterate()},o.Sequence.Iterator.done]:t,i=r[0],u=r[1];return o.Sequence.Iterator.when(i(),function(){return n()},function(e,t){return u=u===o.Sequence.Iterator.done?function(){return o.Sequence.Thunk.value(e).iterate()}:u,o.Sequence.Iterator.when(u(),function(){return u=o.Sequence.Iterator.done,t()},function(t){return n(o.Sequence.Thunk.value(t),[function(){return e},o.Sequence.Thunk.iterator(t)])})})})},t}(o.Sequence);n.default=i},{"../../core":24}],52:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../core"),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.cycle=function(e){return new o.Sequence(function t(n,r){var o=void 0===n?[e[Symbol.iterator](),0]:n,i=o[0],u=o[1],c=i.next();return c.done?t([e[Symbol.iterator](),u+1],r):r(c.value,[i,u+1])}).reduce()},t}(o.Sequence);n.default=i},{"../../core":24}],53:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../core"),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.difference=function(e,t,n){return new o.Sequence(function(r,i){var u=void 0===r?[function(){return e.iterate()},function(){return t.iterate()}]:r,c=u[0],a=u[1];return o.Sequence.Iterator.when(c(),function(){return o.Sequence.Iterator.when(a(),function(){return i()},function(e){return i(o.Sequence.Thunk.value(e),[o.Sequence.Iterator.done,o.Sequence.Thunk.iterator(e)])})},function(e,t){return o.Sequence.Iterator.when(a(),function(){return i(o.Sequence.Thunk.value(e),[o.Sequence.Thunk.iterator(e),o.Sequence.Iterator.done])},function(r){var u=n(o.Sequence.Thunk.value(e),o.Sequence.Thunk.value(r));return u<0?i(o.Sequence.Thunk.value(e),[o.Sequence.Thunk.iterator(e),function(){return r}]):u>0?i(o.Sequence.Thunk.value(r),[function(){return e},o.Sequence.Thunk.iterator(r)]):(a=function(){return o.Sequence.Thunk.iterator(r)()},t())})})})},t}(o.Sequence);n.default=i},{"../../core":24}],54:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../core"),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.from=function(e){return new o.Sequence(function(t,n){var r=void 0===t?[e[Symbol.iterator](),0]:t,o=r[0],i=r[1],u=o.next();return u.done?n():n(u.value,[o,i+1])}).reduce()},t}(o.Sequence);n.default=i},{"../../core":24}],55:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../core"),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.intersect=function(e,t,n){return new o.Sequence(function(r,i){var u=void 0===r?[function(){return e.iterate()},function(){return t.iterate()}]:r,c=u[0],a=u[1];return o.Sequence.Iterator.when(c(),function(){return i()},function(e,t){return o.Sequence.Iterator.when(a(),function(){return i()},function(r,u){var c=n(o.Sequence.Thunk.value(e),o.Sequence.Thunk.value(r));return c<0?(a=function(){return r},t()):c>0?u():i(o.Sequence.Thunk.value(e),[o.Sequence.Thunk.iterator(e),o.Sequence.Thunk.iterator(r)])})})})},t}(o.Sequence);n.default=i},{"../../core":24}],56:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../core"),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.mappend=function(e,t){return o.Sequence.mconcat([e,t])},t}(o.Sequence);n.default=i},{"../../core":24}],57:[function(e,t,n){"use strict";function r(e,t){return new i.Sequence(function(n,r){var o=void 0===n?[function(){return e.iterate()},function(){return t.iterate()}]:n,u=o[0],c=o[1];return i.Sequence.Iterator.when(u(),function(){return i.Sequence.Iterator.when(c(),function(){return r()},function(e){return r(i.Sequence.Thunk.value(e),[i.Sequence.Iterator.done,i.Sequence.Thunk.iterator(e)])})},function(e){return r(i.Sequence.Thunk.value(e),[i.Sequence.Thunk.iterator(e),c])})})}var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../core"),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.mconcat=function(e){return Array.from(e).reduce(function(e,t){return r(e,t)},i.Sequence.mempty)},t}(i.Sequence);n.default=u},{"../../core":24}],58:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../core"),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.mempty=new o.Sequence(function(e,t){return t()}),t}(o.Sequence);n.default=i},{"../../core":24}],59:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../core"),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.mplus=o.Sequence.mappend,t}(o.Sequence);n.default=i},{"../../core":24}],60:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../core"),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.mzero=o.Sequence.mempty,t}(o.Sequence);n.default=i},{"../../core":24}],61:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../core"),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.pure=function(e){return new o.Sequence(function(t,n){return n(e)})},t}(o.Sequence);n.default=i},{"../../core":24}],62:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../core"),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.random=function(e){return void 0===e&&(e=function(){return Math.random()}),"function"==typeof e?o.Sequence.from(new o.Sequence(function(t,n){return n(e(),t)})):this.random().map(function(t){return e[t*e.length|0]})},t}(o.Sequence);n.default=i},{"../../core":24}],63:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../core"),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.resume=function(e){return new o.Sequence(function(t,n){return void 0===t&&(t=e),o.Sequence.Iterator.when(t(),function(){return n()},function(e){return n(o.Sequence.Thunk.value(e),o.Sequence.Thunk.iterator(e))})})},t}(o.Sequence);n.default=i},{"../../core":24}],64:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../core"),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.Return=function(e){return new o.Sequence(function(t,n){return n(e)})},t}(o.Sequence);n.default=i},{"../../core":24}],65:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../core"),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.union=function(e,t,n){return new o.Sequence(function(r,i){var u=void 0===r?[function(){return e.iterate()},function(){return t.iterate()}]:r,c=u[0],a=u[1];return o.Sequence.Iterator.when(c(),function(){return o.Sequence.Iterator.when(a(),function(){return i()},function(e){return i(o.Sequence.Thunk.value(e),[o.Sequence.Iterator.done,o.Sequence.Thunk.iterator(e)])})},function(e){return o.Sequence.Iterator.when(a(),function(){return i(o.Sequence.Thunk.value(e),[o.Sequence.Thunk.iterator(e),o.Sequence.Iterator.done])},function(t){var r=n(o.Sequence.Thunk.value(e),o.Sequence.Thunk.value(t));return r<0?i(o.Sequence.Thunk.value(e),[o.Sequence.Thunk.iterator(e),function(){return t}]):r>0?i(o.Sequence.Thunk.value(t),[function(){return e},o.Sequence.Thunk.iterator(t)]):i(o.Sequence.Thunk.value(e),[o.Sequence.Thunk.iterator(e),o.Sequence.Thunk.iterator(t)])})})})},t}(o.Sequence);n.default=i},{"../../core":24}],66:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../core"),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.zip=function(e,t){return new o.Sequence(function(n,r){var i=void 0===n?[function(){return e.iterate()},function(){return t.iterate()}]:n,u=i[0],c=i[1];return o.Sequence.Iterator.when(u(),function(){return r()},function(e){return o.Sequence.Iterator.when(c(),function(){return r()},function(t){return r([o.Sequence.Thunk.value(e),o.Sequence.Thunk.value(t)],[o.Sequence.Thunk.iterator(e),o.Sequence.Thunk.iterator(t)])})})})},t}(o.Sequence);n.default=i},{"../../core":24}],67:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.noop=function(){}},{}],68:[function(e,t,n){"use strict";function r(e,t,n,r){return e.some(function(e){var o=e.type,i=e.namespace,u=e.listener;return o===t&&i.length===n.length&&i.every(function(e,t){return i[t]===n[t]})&&u===r})}function o(e,t){switch(typeof e){case"function":return;default:throw new TypeError("Spica: Observation: Invalid listener.\n\t"+t+" "+e)}}Object.defineProperty(n,"__esModule",{value:!0});var i,u=e("./concat"),c=e("./equal"),a=e("./exception");!function(e){e.monitor="monitor",e.subscriber="subscriber"}(i=n.RegisterItemType||(n.RegisterItemType={}));var s=function(){function e(){this.relaySources=new WeakSet,this.node_={parent:void 0,children:new Map,childrenNames:[],items:[]}}return e.prototype.monitor=function(e,t,n){var u=this,c=(void 0===n?{}:n).once,a=void 0!==c&&c;o(t,e);var s=this.seekNode_(e).items;return r(s,i.monitor,e,t)?function(){}:(s.push({type:i.monitor,namespace:e,listener:t,options:{once:a}}),function(){return u.off(e,t,i.monitor)})},e.prototype.on=function(e,t,n){var u=this,c=(void 0===n?{}:n).once,a=void 0!==c&&c;o(t,e);var s=this.seekNode_(e).items;return r(s,i.subscriber,e,t)?function(){}:(s.push({type:i.subscriber,namespace:e,listener:t,options:{once:a}}),function(){return u.off(e,t)})},e.prototype.once=function(e,t){return o(t,e),this.on(e,t,{once:!0})},e.prototype.off=function(e,t,n){var r=this;switch(void 0===n&&(n=i.subscriber),typeof t){case"function":return void this.seekNode_(e).items.some(function(e,r,o){var i=e.type;if(e.listener!==t)return!1;if(i!==n)return!1;switch(r){case 0:return!void o.shift();case o.length-1:return!void o.pop();default:return!void o.splice(r,1)}});case"undefined":var u=this.seekNode_(e);return u.childrenNames.slice().forEach(function(t){r.off(e.concat([t]));var n=u.children.get(t);n&&(n.items.length+n.childrenNames.length>0||(u.children.delete(t),u.childrenNames.splice(c.findIndex(t,u.childrenNames),1)))}),void(u.items=u.items.filter(function(e){return e.type===i.monitor}));default:throw o(t,e)}},e.prototype.emit=function(e,t,n){this.drain_(e,t,n)},e.prototype.reflect=function(e,t){var n=[];return this.emit(e,t,function(e,t){return n=t}),n},e.prototype.relay=function(e){var t=this;if(this.relaySources.has(e))return function(){};this.relaySources.add(e);var n=e.monitor([],function(e,n){return void t.emit(n,e)});return function(){return t.relaySources.delete(e),n()}},e.prototype.drain_=function(e,t,n){var r=this,o=[];if(this.refsBelow_(this.seekNode_(e)).reduce(function(u,c){var s=c.type,f=c.listener,p=c.options.once;if(s===i.subscriber){p&&r.off(e,f);try{var l=f(t,e);n&&(o[o.length]=l)}catch(e){a.causeAsyncException(e)}}},void 0),this.refsAbove_(this.seekNode_(e)).reduce(function(n,o){var u=o.type,c=o.listener,s=o.options.once;if(u===i.monitor){s&&r.off(e,c,i.monitor);try{c(t,e)}catch(e){a.causeAsyncException(e)}}},void 0),n)try{n(t,o)}catch(e){a.causeAsyncException(e)}},e.prototype.refs=function(e){return this.refsBelow_(this.seekNode_(e))},e.prototype.refsAbove_=function(e){var t=e.parent,n=e.items;for(n=u.concat([],n);t;)n=u.concat(n,t.items),t=t.parent;return n},e.prototype.refsBelow_=function(e){var t=e.childrenNames,n=e.children,r=e.items;r=u.concat([],r);for(var o=0;o<t.length;++o){var i=t[o],a=this.refsBelow_(n.get(i));r=u.concat(r,a),0===a.length&&(n.delete(i),t.splice(c.findIndex(i,t),1),--o)}return r},e.prototype.seekNode_=function(e){for(var t=this.node_,n=0,r=e;n<r.length;n++){var o=r[n],i=t.children;i.has(o)||(t.childrenNames.push(o),i.set(o,{parent:t,children:new Map,childrenNames:[],items:[]})),t=i.get(o)}return t},e}();n.Observation=s},{"./concat":6,"./equal":9,"./exception":10}],69:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),function(e){for(var t in e)n.hasOwnProperty(t)||(n[t]=e[t])}(e("./monad/sequence"))},{"./monad/sequence":23}],70:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r="0".repeat(15),o=0;n.sqid=function(e){if(arguments.length>0){if("number"!=typeof e)throw new TypeError("Spica: sqid: A parameter value must be a number: "+e);if(e>=0==0)throw new TypeError("Spica: sqid: A parameter value must be a positive number: "+e);if(e%1!=0)throw new TypeError("Spica: sqid: A parameter value must be an integer: "+e)}return void 0===e?(r+ ++o).slice(-15):(r+e).slice(-15)}},{}],71:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("./observation"),o=e("./tick"),i=e("./thenable"),u=e("./sqid"),c=e("./exception"),a=e("./noop"),s=function(){function e(t){var n=void 0===t?{}:t,s=n.name,f=void 0===s?"":s,p=n.size,l=void 0===p?1/0:p,d=n.timeout,h=void 0===d?1/0:d,v=n.destructor,y=void 0===v?a.noop:v,m=n.scheduler,_=void 0===m?o.tick:m,b=n.resource,w=void 0===b?10:b,q=this;if(this.id=u.sqid(),this.events={init:new r.Observation,loss:new r.Observation,exit:new r.Observation},this.workers=new Map,this.alive=!0,this.available=!0,this.messages=[],this.deliver=function(){for(var e,t,n=Date.now(),r=q.resource,o=0,u=q.messages.length;q.available&&o<u&&r>0;++o)!function(o,u){var a=Date.now(),s=q.messages[o],f=s[0],p=s[1],l=s[2],d=s[3],h=s[4],v=q.workers.has(f)?q.workers.get(f).call([p,h+d-a]):void 0;if(q.available&&!v&&a<h+d)return e=o,t=u,"continue";if(0===o?q.messages.shift():q.messages.splice(o,1),--o,--u,v?r=n+q.resource-a:q.events.loss.emit([f],[f,p]),!v||v instanceof Error){try{l(void 0,new Error("Spica: Supervisor: A processing has failed."))}catch(e){c.causeAsyncException(e)}return e=o,t=u,"continue"}var y=v[0];if(i.isThenable(y))Promise.resolve(y).then(function(e){return q.available?void l(e):void l(void 0,new Error("Spica: Supervisor: A processing has failed."))},function(){return void l(void 0,new Error("Spica: Supervisor: A processing has failed."))});else try{l(y)}catch(e){c.causeAsyncException(e)}e=o,t=u}(o,u),o=e,u=t;if(q.available)r<=0&&q.messages.length>0&&q.schedule();else{for(;q.messages.length>0;){var a=q.messages.shift(),s=a[0],f=a[1];q.events.loss.emit([s],[s,f])}Object.freeze(q.messages)}},this.constructor.hasOwnProperty("instances")||(this.constructor.instances=new Set),this.constructor===e)throw new Error("Spica: Supervisor: <"+this.id+"/"+this.name+">: Cannot instantiate abstract classes.");this.constructor.instances.add(this),this.name=f,this.size=l,this.timeout=h,this.destructor_=y,this.scheduler=function(){return void _(q.deliver)},this.resource=w}return Object.defineProperty(e,"count",{get:function(){return this.instances?this.instances.size:0},enumerable:!0,configurable:!0}),Object.defineProperty(e,"procs",{get:function(){return this.instances?Array.from(this.instances).reduce(function(e,t){return e+t.workers.size},0):0},enumerable:!0,configurable:!0}),e.prototype.destructor=function(e){this.available=!1,this.workers.forEach(function(t){return void t.terminate(e)}),this.deliver(),this.alive=!1,this.constructor.instances.delete(this),Object.freeze(this),this.destructor_(e)},e.prototype.validate=function(){if(!this.available)throw new Error("Spica: Supervisor: <"+this.id+"/"+this.name+">: A supervisor is already terminated.")},e.prototype.register=function(e,t,n){var r=this;if(this.validate(),this.workers.has(e))throw new Error("Spica: Supervisor: <"+this.id+"/"+this.name+"/"+e+">: Cannot register a process multiply with the same name.");return this.schedule(),t="function"==typeof t?{init:function(e){return e},call:t,exit:function(e){}}:t,this.workers.set(e,new f(this,e,t,n,function(){return void r.workers.delete(e)})).get(e).terminate},e.prototype.call=function(e,t,n,r){var o=this;for(void 0===r&&(r=this.timeout),this.validate();this.messages.length+1>this.size;){var i=this.messages.shift(),u=i[0],a=i[1],s=i[2];this.events.loss.emit([u],[u,a]);try{s(void 0,new Error("Spica: Supervisor: A message overflowed."))}catch(e){c.causeAsyncException(e)}}this.messages.push([e,t,n,r,Date.now()]),this.schedule(),r<=0||r!==1/0&&setTimeout(function(){return void o.schedule()},r+3)},e.prototype.cast=function(e,t,n){void 0===n&&(n=this.timeout),this.validate();var r=this.workers.has(e)?this.workers.get(e).call([t,n]):void 0;if(void 0===r&&this.events.loss.emit([e],[e,t]),void 0===r||r instanceof Error)return!1;var o=r[0];return i.isThenable(o)&&o.catch(function(){}),!0},e.prototype.refs=function(e){function t(e){return[e.name,e.process,e.state,e.terminate]}return this.validate(),void 0===e?Array.from(this.workers.values()).map(t):this.workers.has(e)?[t(this.workers.get(e))]:[]},e.prototype.terminate=function(e,t){return!!this.available&&(void 0===e?void 0===void this.destructor(t):Array.from(this.workers.values()).filter(function(t){return t.name===e}).filter(function(e){return e.terminate(t)}).length>0)},e.prototype.schedule=function(){o.tick(this.scheduler,!0)},e}();n.Supervisor=s;var f=function(){function e(e,t,n,r,o){var u=this;this.sv=e,this.name=t,this.process=n,this.state=r,this.destructor_=o,this.alive=!0,this.available=!0,this.called=!1,this.call=function(e){var t=e[0],n=e[1];if(u.available)try{u.available=!1,u.called||(u.called=!0,u.sv.events.init.emit([u.name],[u.name,u.process,u.state]),u.state=u.process.init(u.state));var r=u.process.call(t,u.state);if(i.isThenable(r))return[new Promise(function(e,t){return r.then(e,t),n===1/0?void 0:void setTimeout(function(){return void t(new Error)},n)}).then(function(e){return[e[0],e[1]]}).then(function(e){var t=e[0],n=e[1];return u.sv.schedule(),u.alive?(u.state=n,u.available=!0,t):Promise.reject(new Error)},function(e){throw u.sv.schedule(),u.terminate(e),e})];var o=r[0],c=r[1];return u.state=c,u.available=!0,[o]}catch(e){return u.terminate(e),new Error}},this.terminate=function(e){return!!u.alive&&(u.destructor(e),!0)}}return e.prototype.destructor=function(e){if(this.alive=!1,this.available=!1,Object.freeze(this),this.destructor_(),this.called)try{this.process.exit(e,this.state),this.sv.events.exit.emit([this.name],[this.name,this.process,this.state,e])}catch(t){this.sv.events.exit.emit([this.name],[this.name,this.process,this.state,e]),this.sv.terminate(void 0,t)}},e}()},{"./exception":10,"./noop":67,"./observation":68,"./sqid":70,"./thenable":72,"./tick":73}],72:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.isThenable=function(e){return!!e&&"object"==typeof e&&"function"==typeof e.then}},{}],73:[function(e,t,n){"use strict";function r(){var e=c;return c=[],a=new WeakSet,e}function o(){1===c.length&&Promise.resolve().then(i)}function i(){for(var e=r();;){try{for(;e.length>0;)e.shift()()}catch(e){u.causeAsyncException(e);continue}return}}Object.defineProperty(n,"__esModule",{value:!0});var u=e("./exception"),c=[],a=new WeakSet;n.tick=function(e,t){if(void 0===t&&(t=!1),t){if(a.has(e))return;a.add(e)}c.push(e),o()}},{"./exception":10}],74:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.type=function(e){return Object.prototype.toString.call(e).split(" ").pop().slice(0,-1)}},{}],75:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("./layer/interface/service/gui");n.default=r.GUI;var o=e("./layer/interface/service/gui");n.Pjax=o.GUI;var i=e("./lib/router");n.router=i.router},{"./layer/interface/service/gui":109,"./lib/router":121}],76:[function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function u(e){try{a(r.next(e))}catch(e){i(e)}}function c(e){try{a(r.throw(e))}catch(e){i(e)}}function a(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(u,c)}a((r=r.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(u=i[2&n[0]?"return":n[0]?"throw":"next"])&&!(u=u.call(i,n[1])).done)return u;switch(i=0,u&&(n=[0,u.value]),n[0]){case 0:case 1:u=n;break;case 4:return a.label++,{value:n[1],done:!1};case 5:a.label++,i=n[1],n=[0];continue;case 7:n=a.ops.pop(),a.trys.pop();continue;default:if(u=a.trys,!(u=u.length>0&&u[u.length-1])&&(6===n[0]||2===n[0])){a=0;continue}if(3===n[0]&&(!u||n[1]>u[0]&&n[1]<u[3])){a.label=n[1];break}if(6===n[0]&&a.label<u[1]){a.label=u[1],u=n;break}if(u&&a.label<u[2]){a.label=u[2],a.ops.push(n);break}u[2]&&a.ops.pop(),a.trys.pop();continue}n=t.call(e,a)}catch(e){n=[6,e],i=0}finally{o=u=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var o,i,u,c,a={label:0,sent:function(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]};return c={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c};Object.defineProperty(n,"__esModule",{value:!0});var i=e("spica/maybe"),u=e("spica/either"),c=e("../domain/data/config");n.Config=c.Config;var a=e("./config/scope"),s=e("../domain/router/api"),f=e("../domain/event/router"),p=e("./data/error");!function(e){for(var t in e)n.hasOwnProperty(t)||(n[t]=e[t])}(e("./store/path")),n.route=function(e,t,n,c){return r(this,void 0,void 0,function(){return o(this,function(r){return[2,i.Just(new f.RouterEvent(t).location).bind(function(t){var n=t.orig,r=t.dest;return a.scope(e,{orig:n.pathname,dest:r.pathname})}).fmap(function(e){return new s.RouterEntity(e,new f.RouterEvent(t),new s.RouterEntityState(n.process,n.scripts))}).fmap(function(e){return s.route(e,c)}).extract(function(){return u.Left(new p.ApplicationError("Disabled by config."))})]})})}},{"../domain/data/config":82,"../domain/event/router":84,"../domain/router/api":85,"./config/scope":77,"./data/error":78,"./store/path":79,"spica/either":8,"spica/maybe":13}],77:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("../../../lib/router"),o=e("../../domain/data/config"),i=e("spica/sequence"),u=e("spica/maybe"),c=e("spica/assign");n.scope=function(e,t){return i.Sequence.from(Object.keys(e.scope).sort().reverse()).dropWhile(function(e){return!r.compare(e,t.orig)&&!r.compare(e,t.dest)}).take(1).filter(function(e){return!!r.compare(e,t.orig)&&r.compare(e,t.dest)}).map(function(t){return e.scope[t]}).map(function(t){return t?u.Just(new o.Config(c.extend({},e,t))):u.Nothing}).extract().reduce(function(e,t){return t},u.Nothing)}},{"../../../lib/router":121,"../../domain/data/config":82,"spica/assign":3,"spica/maybe":13,"spica/sequence":69}],78:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=function(e){function t(t){return e.call(this,"Application: "+t)||this}return r(t,e),t}(e("../../../lib/error").PjaxError);n.ApplicationError=o},{"../../../lib/error":118}],79:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("../../domain/store/path");n.loadTitle=r.loadTitle,n.savePosition=r.savePosition},{"../../domain/store/path":102}],80:[function(e,t,n){"use strict";function r(e){return e.trim().replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]?|[\uDC00-\uDFFF]/g,function(e){return 2===e.length?e:""}).replace(/%(?![0-9A-F]{2})|[^%\[\]]+/gi,encodeURI).replace(/\?[^#]+/,function(e){return"?"+e.slice(1).replace(/%[0-9A-F]{2}|[^=&]/gi,function(e){return e.length<3?encodeURIComponent(e):e})}).replace(/#.+/,function(e){return"#"+e.slice(1).replace(/%[0-9A-F]{2}|./gi,function(e){return e.length<3?encodeURIComponent(e):e})}).replace(/%[0-9A-F]{2}/gi,function(e){return e.toUpperCase()})}function o(e){return u.href=e||location.href,u.href.replace(/^([^:\/?#]+:\/\/[^\/?#]*?):(?:80)?(?=$|[\/?#])/,"$1").replace(/^([^:\/?#]+:\/\/[^\/?#]*)\/?/,"$1/").replace(/%[0-9A-F]{2}/gi,function(e){return e.toUpperCase()})}Object.defineProperty(n,"__esModule",{value:!0});var i;i||(i={}),n.standardizeUrl=function(e){return r(o(e))},n.encode_=r;var u=document.createElement("a")},{}],81:[function(e,t,n){"use strict";function r(){window.history.replaceState(i.extend(window.history.state||{},{title:document.title}),document.title)}function o(){window.history.replaceState(i.extend(window.history.state||{},{position:{top:window.pageYOffset,left:window.pageXOffset}}),document.title)}Object.defineProperty(n,"__esModule",{value:!0});var i=e("spica/assign");window.history.state instanceof Object==!1&&window.history.replaceState({},document.title),r(),o(),n.loadTitle=function(){return window.history.state.title||document.title},n.saveTitle=r,n.loadPosition=function(){return window.history.state.position||{top:window.pageYOffset,left:window.pageXOffset}},n.savePosition=o},{"spica/assign":3}],82:[function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function u(e){try{a(r.next(e))}catch(e){i(e)}}function c(e){try{a(r.throw(e))}catch(e){i(e)}}function a(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(u,c)}a((r=r.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(u=i[2&n[0]?"return":n[0]?"throw":"next"])&&!(u=u.call(i,n[1])).done)return u;switch(i=0,u&&(n=[0,u.value]),n[0]){case 0:case 1:u=n;break;case 4:return a.label++,{value:n[1],done:!1};case 5:a.label++,i=n[1],n=[0];continue;case 7:n=a.ops.pop(),a.trys.pop();continue;default:if(u=a.trys,!(u=u.length>0&&u[u.length-1])&&(6===n[0]||2===n[0])){a=0;continue}if(3===n[0]&&(!u||n[1]>u[0]&&n[1]<u[3])){a.label=n[1];break}if(6===n[0]&&a.label<u[1]){a.label=u[1],u=n;break}if(u&&a.label<u[2]){a.label=u[2],a.ops.push(n);break}u[2]&&a.ops.pop(),a.trys.pop();continue}n=t.call(e,a)}catch(e){n=[6,e],i=0}finally{o=u=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var o,i,u,c,a={label:0,sent:function(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]};return c={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c};Object.defineProperty(n,"__esModule",{value:!0});var i=e("spica/assign"),u=function(){function e(e){this.areas=["body"],this.link="a:not([target])",this.form="form:not([method])",this.replace="",this.fetch={timeout:3e3,wait:0},this.update={head:"base, meta, link",css:!0,script:!0,ignore:"",ignores:{extension:'[href^="chrome-extension://"]',security:'[src*=".scr.kaspersky-labs.com/"]'},reload:"",logger:""},this.sequence=new c,this.balance={bounds:[""],weight:1,random:0,client:{hosts:[],support:{balance:/msie|trident.+ rv:|chrome|firefox|safari/i,redirect:/msie|trident.+ rv:|chrome|firefox|safari/i},cookie:{balance:"balanceable",redirect:"redirectable"}},server:{header:"X-Ajax-Host",expiry:2592e5}},this.store={expiry:108e5},this.progressbar="display:none;position:absolute;bottom:0;left:0;width:0;height:2px;background:rgb(40, 105, 255);",this.scope={"/":{}},Object.defineProperties(this.update,{ignore:{enumerable:!1,set:function(e){this.ignores._=e},get:function(){var e=this;return Object.keys(this.ignores).map(function(t){return e.ignores[t]}).filter(function(e){return e.trim().length>0}).join(",")}}}),i.extend(this,e),Object.freeze(this)}return e.prototype.filter=function(e){return!0},e.prototype.rewrite=function(e,t,n){},e.prototype.fallback=function(e,t){if(e instanceof HTMLAnchorElement)window.location.assign(e.href);else if(e instanceof HTMLFormElement)window.location.assign(e.action);else{if(!(e instanceof Window))throw t;window.location.reload(!0)}},e}();n.Config=u;var c=function(){function e(){}return e.prototype.fetch=function(){return r(this,void 0,void 0,function(){return o(this,function(e){return[2,void 0]})})},e.prototype.unload=function(){return r(this,void 0,void 0,function(){return o(this,function(e){return[2,void 0]})})},e.prototype.ready=function(){return r(this,void 0,void 0,function(){return o(this,function(e){return[2,void 0]})})},e.prototype.load=function(){},e}();n.SequenceData||(n.SequenceData={})},{"spica/assign":3}],83:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=function(e){function t(t){return e.call(this,"Domain: "+t)||this}return r(t,e),t}(e("../../../lib/error").PjaxError);n.DomainError=o},{"../../../lib/error":118}],84:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("../../../lib/url"),o=e("../../data/model/domain/url"),i=e("../../../lib/dom"),u=e("../data/error"),c=function(){return function(e){this.original=e,this.source=this.original._currentTarget,this.type=this.original.type.toLowerCase(),this.request=new f(this.source),this.location=new p(this.request.url),Object.freeze(this)}}();n.RouterEvent=c;var a;!function(e){e.Anchor=HTMLAnchorElement,e.Form=HTMLFormElement,e.Window=window.Window}(a=n.RouterEventSource||(n.RouterEventSource={}));!function(e){e.click="click",e.submit="submit",e.popstate="popstate"}(n.RouterEventType||(n.RouterEventType={}));var s;!function(e){e.GET="GET",e.POST="POST"}(s=n.RouterEventMethod||(n.RouterEventMethod={}));var f=function(){return function(e){var t=this;this.source=e,this.method=function(){if(t.source instanceof a.Anchor)return s.GET;if(t.source instanceof a.Form)return t.source.method.toUpperCase()===s.POST?s.POST:s.GET;if(t.source instanceof a.Window)return s.GET;throw new TypeError}(),this.url=function(){if(t.source instanceof a.Anchor)return o.standardizeUrl(t.source.href);if(t.source instanceof a.Form)return t.source.method.toUpperCase()===s.GET?o.standardizeUrl(t.source.action.split(/[?#]/).shift().concat("?"+i.serialize(t.source))):o.standardizeUrl(t.source.action.split(/[?#]/).shift());if(t.source instanceof a.Window)return o.standardizeUrl(window.location.href);throw new TypeError}(),this.data=t.source instanceof a.Form&&t.method===s.POST?new FormData(t.source):null,Object.freeze(this)}}();n.RouterEventRequest=f;var p=function(){return function(e){if(this.target=e,this.orig=new r.Url(o.standardizeUrl(window.location.href)),this.dest=new r.Url(this.target),this.orig.domain!==this.dest.domain)throw new u.DomainError("Cannot go to the different domain url "+this.dest.href);Object.freeze(this)}}();n.RouterEventLocation=p},{"../../../lib/dom":117,"../../../lib/url":122,"../../data/model/domain/url":80,"../data/error":83}],85:[function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function u(e){try{a(r.next(e))}catch(e){i(e)}}function c(e){try{a(r.throw(e))}catch(e){i(e)}}function a(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(u,c)}a((r=r.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(u=i[2&n[0]?"return":n[0]?"throw":"next"])&&!(u=u.call(i,n[1])).done)return u;switch(i=0,u&&(n=[0,u.value]),n[0]){case 0:case 1:u=n;break;case 4:return a.label++,{value:n[1],done:!1};case 5:a.label++,i=n[1],n=[0];continue;case 7:n=a.ops.pop(),a.trys.pop();continue;default:if(u=a.trys,!(u=u.length>0&&u[u.length-1])&&(6===n[0]||2===n[0])){a=0;continue}if(3===n[0]&&(!u||n[1]>u[0]&&n[1]<u[3])){a.label=n[1];break}if(6===n[0]&&a.label<u[1]){a.label=u[1],u=n;break}if(u&&a.label<u[2]){a.label=u[2],a.ops.push(n);break}u[2]&&a.ops.pop(),a.trys.pop();continue}n=t.call(e,a)}catch(e){n=[6,e],i=0}finally{o=u=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var o,i,u,c,a={label:0,sent:function(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]};return c={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c};Object.defineProperty(n,"__esModule",{value:!0});var i=e("spica/either"),u=e("./module/fetch"),c=e("./module/update"),a=e("./module/update/content"),s=e("../store/path"),f=e("../data/error"),p=e("./model/eav/entity");n.RouterEntity=p.RouterEntity,n.RouterEntityState=p.RouterEntityState,n.route=function(e,t){return r(this,void 0,void 0,function(){function n(e,t){return a.separate({src:e,dst:e},t).extract(function(){return!1},function(){return!0})}var p=this;return o(this,function(a){return[2,i.Right(void 0).bind(e.state.process.either).bind(function(){return n(t.document,e.config.areas)?i.Right(void 0):i.Left(new f.DomainError("Failed to match areas."))}).fmap(function(){return u.fetch(e.event.request,e.config,e.state.process)}).fmap(function(n){return r(p,void 0,void 0,function(){return o(this,function(r){switch(r.label){case 0:return[4,n];case 1:return[2,r.sent().fmap(function(n){var r=n[0],o=n[1];return c.update(e,r,o,{document:t.document,scroll:window.scrollTo,position:s.loadPosition})}).extract(i.Left)]}})})}).extract(i.Left)]})})}},{"../data/error":83,"../store/path":102,"./model/eav/entity":86,"./module/fetch":89,"./module/update":91,"./module/update/content":93,"spica/either":8}],86:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){return function(e,t,n){this.config=e,this.event=t,this.state=n,Object.freeze(this)}}();n.RouterEntity=r;var o=function(){return function(e,t){this.process=e,this.scripts=t,Object.freeze(this)}}();n.RouterEntityState=o},{}],87:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("../../../../../../lib/html"),o=e("../../../../../data/model/domain/url"),i=function(){return function(e){this.xhr=e,this.response=new function(e){var t=this;this.xhr=e,this.url=this.xhr.responseURL?o.standardizeUrl(this.xhr.responseURL):"",this.header=function(e){return t.xhr.getResponseHeader(e)},this.document="document"===this.xhr.responseType?this.xhr.responseXML:r.parse(this.xhr.responseText).extract(),Object.freeze(this)}(this.xhr),Object.freeze(this)}}();n.FetchResult=i},{"../../../../../../lib/html":119,"../../../../../data/model/domain/url":80}],88:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){return function(e){this.documents=e,Object.freeze(this.documents),Object.freeze(this)}}();n.UpdateSource=r},{}],89:[function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function u(e){try{a(r.next(e))}catch(e){i(e)}}function c(e){try{a(r.throw(e))}catch(e){i(e)}}function a(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(u,c)}a((r=r.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(u=i[2&n[0]?"return":n[0]?"throw":"next"])&&!(u=u.call(i,n[1])).done)return u;switch(i=0,u&&(n=[0,u.value]),n[0]){case 0:case 1:u=n;break;case 4:return a.label++,{value:n[1],done:!1};case 5:a.label++,i=n[1],n=[0];continue;case 7:n=a.ops.pop(),a.trys.pop();continue;default:if(u=a.trys,!(u=u.length>0&&u[u.length-1])&&(6===n[0]||2===n[0])){a=0;continue}if(3===n[0]&&(!u||n[1]>u[0]&&n[1]<u[3])){a.label=n[1];break}if(6===n[0]&&a.label<u[1]){a.label=u[1],u=n;break}if(u&&a.label<u[2]){a.label=u[2],a.ops.push(n);break}u[2]&&a.ops.pop(),a.trys.pop();continue}n=t.call(e,a)}catch(e){n=[6,e],i=0}finally{o=u=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var o,i,u,c,a={label:0,sent:function(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]};return c={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c};Object.defineProperty(n,"__esModule",{value:!0});var i=e("spica/either"),u=e("../module/fetch/xhr"),c=e("../../data/error"),a=e("../../../../lib/url");n.fetch=function(e,t,n){var s=e.method,f=e.url,p=e.data,l=t.fetch,d=l.timeout,h=l.wait,v=t.sequence;return r(this,void 0,void 0,function(){var e,t,r,l;return o(this,function(o){switch(o.label){case 0:return e=u.xhr(s,f,p,d,n),window.dispatchEvent(new Event("pjax:fetch")),[4,Promise.all([e,v.fetch(void 0,{host:"",path:new a.Url(f).path,method:s,data:p}),new Promise(function(e){return void setTimeout(e,h)})])];case 1:return t=o.sent(),r=t[0],l=t[1],[2,r.bind(n.either).bind(function(e){return""===e.response.url||new a.Url(e.response.url).domain===new a.Url(f).domain?i.Right([e,l]):i.Left(new c.DomainError("Request is redirected to the different domain url "+new a.Url(e.response.url).href))})]}})})}},{"../../../../lib/url":122,"../../data/error":83,"../module/fetch/xhr":90,"spica/either":8}],90:[function(e,t,n){"use strict";function r(e){return u.Right(e).bind(function(e){return/2..|304/.test(""+e.status)?u.Right(e):u.Left(new a.DomainError("Faild to validate a content type of response."))}).bind(function(e){return o(e.getResponseHeader("Content-Type"),s)?u.Right(e):u.Left(new a.DomainError("Faild to validate a content type of response."))})}function o(e,t){function n(e){return e.split(";").map(function(e){return e.trim()}).filter(function(e){return e.length>0})}return i.Sequence.intersect(i.Sequence.from(n(e||"").sort()),i.Sequence.from(n(t).sort()),function(e,t){return e.localeCompare(t)}).take(1).extract().length>0}Object.defineProperty(n,"__esModule",{value:!0});var i=e("spica/sequence"),u=e("spica/either"),c=e("../../model/eav/value/fetch"),a=e("../../../data/error"),s="text/html";n.xhr=function(e,t,n,o,i){var s=new XMLHttpRequest;return new Promise(function(f){return s.open(e,t,!0),s.responseType=/chrome|firefox/i.test(window.navigator.userAgent)&&!/edge/i.test(window.navigator.userAgent)?"document":"text",s.timeout=o,s.setRequestHeader("X-Pjax","1"),s.send(n),s.addEventListener("abort",function(){return void f(u.Left(new a.DomainError("Failed to request by abort.")))}),s.addEventListener("error",function(){return void f(u.Left(new a.DomainError("Failed to request by error.")))}),s.addEventListener("timeout",function(){return void f(u.Left(new a.DomainError("Failed to request by timeout.")))}),s.addEventListener("load",function(){return void r(s).extract(function(e){return void f(u.Left(e))},function(e){return void f(u.Right(new c.FetchResult(e)))})}),void i.register(function(){return void s.abort()})})},n.match=o},{"../../../data/error":83,"../../model/eav/value/fetch":87,"spica/either":8,"spica/sequence":69}],91:[function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function u(e){try{a(r.next(e))}catch(e){i(e)}}function c(e){try{a(r.throw(e))}catch(e){i(e)}}function a(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(u,c)}a((r=r.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(u=i[2&n[0]?"return":n[0]?"throw":"next"])&&!(u=u.call(i,n[1])).done)return u;switch(i=0,u&&(n=[0,u.value]),n[0]){case 0:case 1:u=n;break;case 4:return a.label++,{value:n[1],done:!1};case 5:a.label++,i=n[1],n=[0];continue;case 7:n=a.ops.pop(),a.trys.pop();continue;default:if(u=a.trys,!(u=u.length>0&&u[u.length-1])&&(6===n[0]||2===n[0])){a=0;continue}if(3===n[0]&&(!u||n[1]>u[0]&&n[1]<u[3])){a.label=n[1];break}if(6===n[0]&&a.label<u[1]){a.label=u[1],u=n;break}if(u&&a.label<u[2]){a.label=u[2],a.ops.push(n);break}u[2]&&a.ops.pop(),a.trys.pop();continue}n=t.call(e,a)}catch(e){n=[6,e],i=0}finally{o=u=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var o,i,u,c,a={label:0,sent:function(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]};return c={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c};Object.defineProperty(n,"__esModule",{value:!0});var i=e("spica/either"),u=e("spica/hlist"),c=e("../../event/router"),a=e("../model/eav/value/update"),s=e("../module/update/blur"),f=e("../module/update/url"),p=e("../module/update/title"),l=e("../module/update/head"),d=e("../module/update/content"),h=e("../module/update/css"),v=e("../module/update/script"),y=e("../module/update/focus"),m=e("../module/update/scroll"),_=e("../../store/path"),b=e("../../data/error");n.update=function(e,t,n,w){var q=e.event,O=e.config,S=e.state,g=t.response;return r(this,void 0,void 0,function(){var e,t,P=this;return o(this,function(j){return e=S.process,t=new a.UpdateSource({src:g.document,dst:w.document}).documents,[2,(new u.HNil).push(e.either(n)).modify(function(n){return n.fmap(function(n){return d.separate(t,O.areas).fmap(function(e){var n=e[0];return void O.rewrite(t.src,n,"")}).extract(function(){return r(P,void 0,void 0,function(){return o(this,function(e){return[2,i.Left(new b.DomainError("Failed to separate areas."))]})})},function(){return r(P,void 0,void 0,function(){var t,r;return o(this,function(o){switch(o.label){case 0:return window.dispatchEvent(new Event("pjax:unload")),r=(t=e).either,[4,O.sequence.unload(n,g)];case 1:return[2,r.apply(t,[o.sent()])]}})})})})}).modify(function(n){return n.fmap(function(n){return r(P,void 0,void 0,function(){var a=this;return o(this,function(P){switch(P.label){case 0:return[4,n];case 1:return[2,P.sent().fmap(function(n){return(new u.HNil).extend(function(){return r(a,void 0,void 0,function(){return o(this,function(n){return[2,(s.blur(t.dst),f.url(new c.RouterEventLocation(g.url||q.location.dest.href),t.src.title,q.type,q.source,O.replace),p.title(t),_.saveTitle(),l.head({src:t.src.head,dst:t.dst.head},O.update.head,O.update.ignore),d.content(t,O.areas).fmap(function(e){var t=e[0],n=e[1];return[t,Promise.all(n)]}).fmap(e.either).extract(function(){return i.Left(new b.DomainError("Failed to update areas."))}))]})})}).extend(function(c){return r(a,void 0,void 0,function(){var a=this;return o(this,function(s){switch(s.label){case 0:return[4,c];case 1:return[2,s.sent().fmap(function(i){var c=i[0];return Promise.all((new u.HNil).extend(function(){return r(a,void 0,void 0,function(){var n;return o(this,function(r){switch(r.label){case 0:return O.update.css&&h.css({src:t.src.head,dst:t.dst.head},O.update.ignore),O.update.css&&h.css({src:t.src.body,dst:t.dst.body},O.update.ignore),y.focus(t.dst),m.scroll(q.type,t.dst,{hash:q.location.dest.fragment,top:0,left:0},{hash:m.hash,scroll:w.scroll,position:w.position}),_.savePosition(),O.update.script?[4,v.script(t,S.scripts,O.update,e)]:[3,2];case 1:return n=r.sent(),[3,4];case 2:return[4,e.either([])];case 3:n=r.sent(),r.label=4;case 4:return[2,n]}})})}).extend(function(){return r(a,void 0,void 0,function(){var t,r;return o(this,function(o){switch(o.label){case 0:return w.document.dispatchEvent(new Event("pjax:ready")),r=(t=e).either,[4,O.sequence.ready(n,c)];case 1:return[2,r.apply(t,[o.sent()])]}})})}).reverse().tuple()).then(function(e){var t=e[0],n=e[1];return t.bind(function(e){return n.fmap(function(t){return[e,t]})})})}).extract(i.Left)]}})})}).reverse().tuple()})]}})})})}).modify(function(t){return t.fmap(function(t){return r(P,void 0,void 0,function(){var n=this;return o(this,function(u){switch(u.label){case 0:return[4,t];case 1:return[2,u.sent().fmap(function(t){var i=t[0];return t[1].then(function(t){return i.then(function(i){return i.bind(function(i){var u=i[1];return t.fmap(function(t){var i=t[1];return r(n,void 0,void 0,function(){var t,n;return o(this,function(r){switch(r.label){case 0:return n=(t=e).maybe,[4,u];case 1:return[2,n.apply(t,[r.sent()]).fmap(function(e){return window.dispatchEvent(new Event("pjax:load")),void O.sequence.load(i,e)}).extract(function(){})]}})})})}).extract(function(){})}),t.fmap(function(e){return e[0]})})}).extract(i.Left)]}})})})}).head.extract(i.Left)]})})}},{"../../data/error":83,"../../event/router":84,"../../store/path":102,"../model/eav/value/update":88,"../module/update/blur":92,"../module/update/content":93,"../module/update/css":94,"../module/update/focus":95,"../module/update/head":96,"../module/update/script":97,"../module/update/scroll":98,"../module/update/title":100,"../module/update/url":101,"spica/either":8,"spica/hlist":12}],92:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.blur=function(e){e===window.document&&e.activeElement!==e.body&&(e.activeElement.blur(),e.body.focus())}},{}],93:[function(e,t,n){"use strict";function r(e,t){function n(e,t){function n(t){return function(e){return function(e){return e.src.length>0&&e.src.length===e.dst.length}(e)?u.Just(e):u.Nothing}(function(t){return{src:a.find(e.src,t),dst:a.find(e.dst,t)}}(t))}return o(t).reduce(function(e,t){return e.bind(function(e){return n(t).fmap(function(t){return c.concat(e,[t])})})},u.Just([]))}return t.reduce(function(t,r){return u.Maybe.mplus(t,n(e,r).fmap(function(e){return[r,e]}))},u.Nothing)}function o(e){return(e.match(/(?:[^,\(\[]+|\(.*?\)|\[.*?\])+/g)||[]).map(function(e){return e.trim()})}function i(e){return Promise.race([new Promise(function(t){return void a.once(e,"load",t)}),new Promise(function(t){return void a.once(e,"abort",t)}),new Promise(function(t){return void a.once(e,"error",t)})])}Object.defineProperty(n,"__esModule",{value:!0});var u=e("spica/maybe"),c=e("spica/concat"),a=e("../../../../../lib/dom"),s=e("./script");n.content=function(e,t,n){function o(t){function r(e){var t=a.find(e.src,"script").map(s.escape).reduce(function(e,t){return function(){return e(),void t()}},function(){});n.replace(e.src,e.dst),t()}return t.src.map(function(n,r){return{src:e.dst.importNode(t.src[r].cloneNode(!0),!0),dst:t.dst[r]}}).map(function(e){return r(e),a.find(e.src,"img, iframe, frame").map(i)}).reduce(c.concat,[])}return void 0===n&&(n={replace:function(e,t){return void t.parentNode.replaceChild(e,t)}}),r(e,t).fmap(function(e){var t=e[1];return[t.map(function(e){return e.dst}).reduce(c.concat,[]),t.map(o).reduce(c.concat,[])]})},n.separate=r,n._split=o,n._wait=i},{"../../../../../lib/dom":117,"./script":97,"spica/concat":6,"spica/maybe":13}],94:[function(e,t,n){"use strict";function r(e,t){switch(e.tagName.toLowerCase()){case"link":return e.href===t.href;case"style":return e.innerHTML.trim()===t.innerHTML.trim();default:return!1}}Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../../../../lib/dom"),i=e("./sync");n.css=function(e,t){var n='link[rel~="stylesheet"], style';return void i.sync(i.pair(o.find(e.src,n).filter(function(e){return!e.matches(t.trim()||"_")}),o.find(e.dst,n).filter(function(e){return!e.matches(t.trim()||"_")}),r),e.dst)}},{"../../../../../lib/dom":117,"./sync":99}],95:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("../../../../../lib/dom");n.focus=function(e){return void r.find(e,"body, [autofocus]").slice(-1).filter(function(t){return e===window.document&&t!==e.activeElement}).forEach(function(e){return void e.focus()})}},{"../../../../../lib/dom":117}],96:[function(e,t,n){"use strict";function r(e,t){return e.outerHTML===t.outerHTML}Object.defineProperty(n,"__esModule",{value:!0});var o=e("./sync"),i=e("../../../../../lib/dom");n.head=function(e,t,n){return n+=t.indexOf("link")>-1?', link[rel~="stylesheet"]':"",void o.sync(o.pair(i.find(e.src,t).filter(function(e){return!e.matches(n.trim()||"_")}),i.find(e.dst,t).filter(function(e){return!e.matches(n.trim()||"_")}),r),e.dst)}},{"../../../../../lib/dom":117,"./sync":99}],97:[function(e,t,n){"use strict";function r(e){return i(this,void 0,void 0,function(){var t;return u(this,function(n){return e.hasAttribute("src")?((t=new XMLHttpRequest).open("GET",e.src,!0),t.send(),[2,new Promise(function(n){return["load","abort","error","timeout"].forEach(function(r){switch(r){case"load":return void t.addEventListener(r,function(){return void n(c.Right([e,t.response]))});default:return void t.addEventListener(r,function(){return void n(c.Left(new Error(e.src+": "+t.statusText)))})}})})]):[2,c.Right([e,e.innerHTML])]})})}function o(e,t){var n=e[0],r=e[1],o=n.parentElement&&n.parentElement.matches(t.trim()||"_"),i=document.querySelector(o?n.parentElement.id?"#"+n.parentElement.id:n.parentElement.tagName:"_")||document.body;n=n.ownerDocument===document?n:document.importNode(n.cloneNode(!0),!0);var u=void 0,a=s.once(window,"error",function(e){u=e.error});if(n.hasAttribute("src")){var p=n.getAttribute("src");n.removeAttribute("src"),n.innerHTML="\ndocument.currentScript.innerHTML = '';\ndocument.currentScript.setAttribute('src', \""+p.replace(/"/g,encodeURI)+'");\n'+r}else n.innerHTML="\ndocument.currentScript.innerHTML = document.currentScript.innerHTML.slice(-"+r.length+");\n"+r;return i.appendChild(n),a(),n.hasAttribute("src")&&n.dispatchEvent(new Event(u?"error":"load")),o||n.remove(),u?c.Left(new f.FatalError(u.message)):c.Right(n)}var i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function u(e){try{a(r.next(e))}catch(e){i(e)}}function c(e){try{a(r.throw(e))}catch(e){i(e)}}function a(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(u,c)}a((r=r.apply(e,t||[])).next())})},u=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(u=i[2&n[0]?"return":n[0]?"throw":"next"])&&!(u=u.call(i,n[1])).done)return u;switch(i=0,u&&(n=[0,u.value]),n[0]){case 0:case 1:u=n;break;case 4:return a.label++,{value:n[1],done:!1};case 5:a.label++,i=n[1],n=[0];continue;case 7:n=a.ops.pop(),a.trys.pop();continue;default:if(u=a.trys,!(u=u.length>0&&u[u.length-1])&&(6===n[0]||2===n[0])){a=0;continue}if(3===n[0]&&(!u||n[1]>u[0]&&n[1]<u[3])){a.label=n[1];break}if(6===n[0]&&a.label<u[1]){a.label=u[1],u=n;break}if(u&&a.label<u[2]){a.label=u[2],a.ops.push(n);break}u[2]&&a.ops.pop(),a.trys.pop();continue}n=t.call(e,a)}catch(e){n=[6,e],i=0}finally{o=u=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var o,i,u,c,a={label:0,sent:function(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]};return c={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c};Object.defineProperty(n,"__esModule",{value:!0});var c=e("spica/either"),a=e("spica/concat"),s=e("../../../../../lib/dom"),f=e("../../../../../lib/error"),p=e("../../../../data/model/domain/url");n.script=function(e,t,n,f,l){return void 0===l&&(l={request:r,evaluate:o}),i(this,void 0,void 0,function(){function r(e,t){return e.bind(f.either).bind(function(e){return l.evaluate(t,n.logger).fmap(function(t){return e.concat([t])})})}var o,i;return u(this,function(u){switch(u.label){case 0:return o=s.find(e.src,"script").filter(function(e){return!e.type||/(?:application|text)\/(?:java|ecma)script/i.test(e.type)}).filter(function(e){return!e.matches(n.ignore.trim()||"_")}).filter(function(e){return!e.hasAttribute("src")||!t.has(p.standardizeUrl(e.src))||e.matches(n.reload.trim()||"_")}),i=o.reduce(function(e,t){return a.concat(e,[l.request(t)])},[]),[4,Promise.all(i)];case 1:return[2,u.sent().reduce(function(e,t){return t.bind(function(t){return r(e,t)})},c.Right([]))]}})})},n.escape=function(e){var t=e.hasAttribute("src")?e.getAttribute("src"):null,n=e.innerHTML;return e.removeAttribute("src"),e.innerHTML="",function(){return e.innerHTML=" ",e.innerHTML=n,"string"==typeof t?void e.setAttribute("src",t):void 0}},n._request=r,n._evaluate=o},{"../../../../../lib/dom":117,"../../../../../lib/error":118,"../../../../data/model/domain/url":80,"spica/concat":6,"spica/either":8}],98:[function(e,t,n){"use strict";function r(e,t,n){return void 0===n&&(n={scroll:window.scrollTo}),o.Just(t.split("#").pop()||"").bind(function(e){return e.length>0?o.Just(e):o.Nothing}).bind(function(t){return u.find(e,"#"+t+', [name="'+t+'"]').reduce(function(e,t){return e.extract(function(){return o.Just(t)},o.Just)},o.Nothing)}).fmap(function(e){return void n.scroll.call(window,window.pageXOffset,window.pageYOffset+e.getBoundingClientRect().top|0)}).extract(function(){return!1},function(){return!0})}Object.defineProperty(n,"__esModule",{value:!0});var o=e("spica/maybe"),i=e("../../../event/router"),u=e("../../../../../lib/dom");n.scroll=function(e,t,n,o){function u(e){var t=e.top,n=e.left;n=void 0===n||n>=0?n:window.pageXOffset,t=void 0===t||t>=0?t:window.pageYOffset,o.scroll.call(window,n,t)}switch(void 0===o&&(o={hash:r,scroll:window.scrollTo,position:function(){return{top:0,left:0}}}),e){case i.RouterEventType.click:return void(o.hash(t,n.hash,o)||u(n));case i.RouterEventType.submit:return void u(n);case i.RouterEventType.popstate:return void u(o.position());default:throw new TypeError(e)}},n.hash=r},{"../../../../../lib/dom":117,"../../../event/router":84,"spica/maybe":13}],99:[function(e,t,n){"use strict";function r(e,t,n){return void t.map(function(t){return e.ownerDocument.importNode(t.cloneNode(!0),!0)}).forEach(function(t){return void e.insertBefore(t,n)})}function o(e){return void e.remove()}Object.defineProperty(n,"__esModule",{value:!0});var i=e("spica/either"),u=e("spica/concat");n.sync=function(e,t,n){function i(e){return e?e.parentElement:t}return void 0===n&&(n={before:r,remove:o}),void e.forEach(function(e){var t=e[0],r=e[1];return n.before(i(r),t.slice(-1).some(function(e){return!!r&&e.outerHTML===r.outerHTML})?t.slice(0,-1):t,r),r&&0===t.length?void n.remove(r):void 0})},n.pair=function(e,t,n){var r=function(e,t,n){return e.reduce(function(e,r){return 0===t.length?e.set(null,u.concat(e.get(null)||[],[r])):t.reduce(function(e,t){return e.bind(function(e){return!e.has(t)&&n(r,t)?(e.set(t,u.concat(e.get(null)||[],[r])),e.delete(null),i.Left(e)):i.Right(e)})},i.Right(e)).fmap(function(e){return e.set(null,u.concat(e.get(null)||[],[r]))}).extract(function(e){return e})},new Map)}(e,t,n);return t.filter(function(e){return!r.has(e)}).forEach(function(e){return void r.set(e,[])}),Array.from(r.entries()).map(function(e){var t=e[0];return[e[1],t]})}},{"spica/concat":6,"spica/either":8}],100:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.title=function(e){e.dst.title=e.src.title}},{}],101:[function(e,t,n){"use strict";function r(e,t){if(t.orig.href===t.dest.href)return!1;switch(e){case i.RouterEventType.click:case i.RouterEventType.submit:return!0;case i.RouterEventType.popstate:return!1;default:throw new TypeError(e)}}function o(e,t,n){switch(e){case i.RouterEventType.click:case i.RouterEventType.submit:return t.matches(n.trim()||"_");case i.RouterEventType.popstate:return!1;default:throw new TypeError(e)}}Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../../event/router");n.url=function(e,t,n,i,u){switch(!0){case o(n,i,u):return void window.history.replaceState(null,t,e.dest.href);case r(n,e):return void window.history.pushState(null,t,e.dest.href);default:return}},n._isRegisterable=r,n._isReplaceable=o},{"../../../event/router":84}],102:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),function(e){for(var t in e)n.hasOwnProperty(t)||(n[t]=e[t])}(e("../../data/store/state"))},{"../../data/store/state":81}],103:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=function(e){function t(t){return e.call(this,"Interface: "+t)||this}return r(t,e),t}(e("../../../lib/error").PjaxError);n.InterfaceError=o},{"../../../lib/error":118}],104:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("spica/supervisor"),i=e("../../../../lib/dom"),u=function(){return function(e,t,n){var u=this;this.sv=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t}(o.Supervisor)),this.close=function(){return void u.sv.terminate()},this.sv.register("",function(){return u.sv.events.exit.monitor([],i.delegate(e.documentElement,t,"click",function(e){e.currentTarget instanceof HTMLAnchorElement&&"string"==typeof e.currentTarget.href&&n(e)})),new Promise(function(){})},void 0),this.sv.cast("",void 0)}}();n.ClickView=u},{"../../../../lib/dom":117,"spica/supervisor":71}],105:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("spica/supervisor"),i=e("../../../data/model/domain/url"),u=e("../../../../lib/dom"),c=e("../../service/state/url"),a=function(){return function(e,t){var n=this;this.sv=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t}(o.Supervisor)),this.close=function(){return void n.sv.terminate()},this.sv.register("",function(){return n.sv.events.exit.monitor([],u.bind(e,"popstate",function(e){i.standardizeUrl(location.href)!==c.documentUrl.href&&t(e)})),new Promise(function(){})},void 0),this.sv.cast("",void 0)}}();n.NavigationView=a},{"../../../../lib/dom":117,"../../../data/model/domain/url":80,"../../service/state/url":116,"spica/supervisor":71}],106:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("spica/supervisor"),i=e("../../../../lib/dom"),u=function(){return function(e,t){var n=this;this.sv=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t}(o.Supervisor)),this.close=function(){return void n.sv.terminate()};var u=0;this.sv.register("",function(){return n.sv.events.exit.monitor([],i.bind(e,"scroll",function(e){return u=u>0?u:setTimeout(function(){u=0,t(e)},300)},{passive:!0})),new Promise(function(){})},void 0),this.sv.cast("",void 0)}}();n.ScrollView=u},{"../../../../lib/dom":117,"spica/supervisor":71}],107:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("spica/supervisor"),i=e("../../../../lib/dom"),u=function(){return function(e,t,n){var u=this;this.sv=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t}(o.Supervisor)),this.close=function(){return void u.sv.terminate()},this.sv.register("",function(){return u.sv.events.exit.monitor([],i.delegate(e.documentElement,t,"submit",function(e){e.currentTarget instanceof HTMLFormElement&&n(e)})),new Promise(function(){})},void 0),this.sv.cast("",void 0)}}();n.SubmitView=u},{"../../../../lib/dom":117,"spica/supervisor":71}],108:[function(e,t,n){"use strict";function r(e,t){var n=document.createElement("a");n.href=e,s.parse("").extract().body.appendChild(n),a.once(n,"click",t),n.click()}Object.defineProperty(n,"__esModule",{value:!0});var o=e("spica/assign"),i=e("../../application/api"),u=e("./state/process"),c=e("./router"),a=e("../../../lib/dom"),s=e("../../../lib/html"),f=function(){function e(){}return e.assign=function(e,t,n){return void 0===n&&(n={document:window.document}),void r(e,function(e){return void c.route(new i.Config(t),e,u.process,n)})},e.replace=function(e,t,n){return void 0===n&&(n={document:window.document}),void r(e,function(e){return void c.route(new i.Config(o.extend({},t,{replace:"*"})),e,u.process,n)})},e}();n.API=f},{"../../../lib/dom":117,"../../../lib/html":119,"../../application/api":76,"./router":111,"./state/process":113,"spica/assign":3}],109:[function(e,t,n){"use strict";function r(e){return e.which>1||e.metaKey||e.ctrlKey||e.shiftKey||e.altKey}function o(e,t){return void 0===t&&(t=new d.Url(b.documentUrl.href)),t.domain===e.domain}function i(e,t){return void 0===t&&(t=new d.Url(b.documentUrl.href)),t.domain===e.domain&&t.path===e.path&&t.fragment!==e.fragment}function u(){b.documentUrl.sync()}var c=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var a=e("./api"),s=e("spica/supervisor"),f=e("spica/cancellation"),p=e("spica/maybe"),l=e("../../application/api"),d=e("../../../lib/url"),h=e("../../data/model/domain/url"),v=e("../module/view/click"),y=e("../module/view/submit"),m=e("../module/view/navigation"),_=e("../module/view/scroll"),b=e("./state/url");e("./state/scroll-restoration");var w=e("./state/process"),q=e("./router"),O=e("../../application/api"),S=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return c(t,e),t}(s.Supervisor)),g=function(e){function t(t,n){void 0===n&&(n={document:window.document});var c=e.call(this)||this;c.option=t,c.io=n;var a=new l.Config(c.option);return S.terminate(""),S.register("",{init:function(e){return e},call:function(e,t){return t.register(new v.ClickView(c.io.document,a.link,function(e){return void p.Just(new d.Url(h.standardizeUrl(e._currentTarget.href))).bind(function(t){return o(t)&&!i(t)&&!r(e)&&a.filter(e._currentTarget)?p.Just(0):p.Nothing}).fmap(function(){return q.route(a,e,w.process,c.io)}).extract(u)}).close),t.register(new y.SubmitView(c.io.document,a.form,function(e){return void p.Just(new d.Url(h.standardizeUrl(e._currentTarget.action))).bind(function(e){return o(e)?p.Just(0):p.Nothing}).fmap(function(){return q.route(a,e,w.process,c.io)}).extract(u)}).close),t.register(new m.NavigationView(window,function(e){return void p.Just(new d.Url(h.standardizeUrl(window.location.href))).bind(function(e){return o(e)&&!i(e)?p.Just(O.loadTitle()):p.Nothing}).fmap(function(t){return t&&(n.document.title=t),q.route(a,e,w.process,c.io)}).extract(u)}).close),t.register(new _.ScrollView(window,function(){return void p.Just(new d.Url(h.standardizeUrl(window.location.href))).fmap(function(e){return b.documentUrl.href===e.href?void O.savePosition():void 0}).extract()}).close),new Promise(function(){})},exit:function(e,t){return void t.cancel()}},new f.Cancellation),S.cast("",void 0),c}return c(t,e),t.prototype.assign=function(e){return void a.API.assign(e,this.option,this.io)},t.prototype.replace=function(e){return void a.API.replace(e,this.option,this.io)},t}(a.API);n.GUI=g},{"../../../lib/url":122,"../../application/api":76,"../../data/model/domain/url":80,"../module/view/click":104,"../module/view/navigation":105,"../module/view/scroll":106,"../module/view/submit":107,"./api":108,"./router":111,"./state/process":113,"./state/scroll-restoration":115,"./state/url":116,"spica/cancellation":4,"spica/maybe":13,"spica/supervisor":71}],110:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=document.createElement("div");window.addEventListener("pjax:fetch",function(){return void document.documentElement.appendChild(r)}),window.addEventListener("pjax:fetch",function(){return r.style.width="5%"}),window.addEventListener("pjax:unload",function(){return r.style.width="80%"}),document.addEventListener("pjax:ready",function(){return r.style.width="90%"}),window.addEventListener("pjax:load",function(){return r.style.width="100%"}),window.addEventListener("pjax:load",function(){return void r.remove()}),n.progressbar=function(e){r.setAttribute("style",e)}},{}],111:[function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function u(e){try{a(r.next(e))}catch(e){i(e)}}function c(e){try{a(r.throw(e))}catch(e){i(e)}}function a(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(u,c)}a((r=r.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(u=i[2&n[0]?"return":n[0]?"throw":"next"])&&!(u=u.call(i,n[1])).done)return u;switch(i=0,u&&(n=[0,u.value]),n[0]){case 0:case 1:u=n;break;case 4:return a.label++,{value:n[1],done:!1};case 5:a.label++,i=n[1],n=[0];continue;case 7:n=a.ops.pop(),a.trys.pop();continue;default:if(u=a.trys,!(u=u.length>0&&u[u.length-1])&&(6===n[0]||2===n[0])){a=0;continue}if(3===n[0]&&(!u||n[1]>u[0]&&n[1]<u[3])){a.label=n[1];break}if(6===n[0]&&a.label<u[1]){a.label=u[1],u=n;break}if(u&&a.label<u[2]){a.label=u[2],a.ops.push(n);break}u[2]&&a.ops.pop(),a.trys.pop();continue}n=t.call(e,a)}catch(e){n=[6,e],i=0}finally{o=u=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var o,i,u,c,a={label:0,sent:function(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]};return c={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c};Object.defineProperty(n,"__esModule",{value:!0});var i=e("spica/cancellation"),u=e("../../application/api"),c=e("./state/url"),a=e("../service/state/env"),s=e("./progressbar"),f=e("../../../lib/dom"),p=e("../../data/model/domain/url"),l=e("../data/error");f.bind(window,"pjax:unload",function(){return window.history.scrollRestoration="auto"},!0),n.route=function(e,t,n,f){return r(this,void 0,void 0,function(){var r,d,h;return o(this,function(o){switch(o.label){case 0:return t.preventDefault(),n.cast("",new l.InterfaceError("Abort.")),r=new i.Cancellation,d=n.register("",function(e){throw void r.cancel(e)},void 0),[4,a.env];case 1:return h=o.sent()[0],window.history.scrollRestoration="manual",s.progressbar(e.progressbar),[2,u.route(e,t,{process:r,scripts:h},f).then(function(e){return e.fmap(function(e){return d(),e.filter(function(e){return e.hasAttribute("src")}).forEach(function(e){return void h.add(p.standardizeUrl(e.src))}),void c.documentUrl.sync()}).extract()}).catch(function(n){return d(),window.history.scrollRestoration="auto",c.documentUrl.sync(),!r.canceled||n instanceof Error&&"FatalError"===n.name?void e.fallback(t._currentTarget,n instanceof Error?n:new Error(n)):void 0})]}})})}},{"../../../lib/dom":117,"../../application/api":76,"../../data/model/domain/url":80,"../data/error":103,"../service/state/env":112,"./progressbar":110,"./state/url":116,"spica/cancellation":4}],112:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("./script");n.env=Promise.all([r.scripts])},{"./script":114}],113:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("spica/supervisor");n.process=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t}(o.Supervisor))},{"spica/supervisor":71}],114:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("../../../data/model/domain/url"),o=e("../../../../lib/dom");n.scripts=new Promise(setTimeout).then(function(){return o.find(document,"script").filter(function(e){return e.hasAttribute("src")}).reduce(function(e,t){return e.add(r.standardizeUrl(t.src))},new Set)})},{"../../../../lib/dom":117,"../../../data/model/domain/url":80}],115:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),e("../../../../lib/dom").bind(window,"unload",function(){return window.history.scrollRestoration="auto"},!1)},{"../../../../lib/dom":117}],116:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("../../../data/model/domain/url");n.documentUrl=new(function(){function e(){this.href=r.standardizeUrl(location.href)}return e.prototype.sync=function(){return this.href=r.standardizeUrl(location.href)},e}())},{"../../../data/model/domain/url":80}],117:[function(e,t,n){"use strict";function r(e,t){return Array.from(e.querySelectorAll(t||"_"))}function o(e,t,n,r){function o(e){e._currentTarget=e.currentTarget,"object"==typeof r&&r.passive&&(e.preventDefault=a.noop),n(e)}void 0===r&&(r=!1),e.addEventListener(t,o,u(r));var i=function(){return i=a.noop,void e.removeEventListener(t,o,u(r))};return function(){return void i()}}function i(e,t,n,r){void 0===r&&(r=!1);var i=o(e,t,function(e){i(),n(e)},r);return function(){return void i()}}function u(e){return s?e:"boolean"==typeof e?e:e.capture}var c=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e};Object.defineProperty(n,"__esModule",{value:!0});var a=e("./noop");n.find=r,n.bind=o,n.once=i,n.delegate=function(e,t,n,u,a){return void 0===a&&(a={}),o(e,n,function(o){var c=o.target.closest(t);c&&r(e,t).filter(function(e){return e===c}).forEach(function(e){return void i(e,n,function(e){e._currentTarget=e.currentTarget,u(e)},a)})},c({},a,{capture:!0}))},n.serialize=function(e){function t(e){return e.replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]?|[\uDC00-\uDFFF]/g,function(e){return 2===e.length?e:""})}return Array.from(e.elements).filter(function(e){if(e.disabled)return!1;switch(e.nodeName.toLowerCase()){case"input":switch(e.type.toLowerCase()){case"checkbox":case"radio":return e.checked;case"submit":case"button":case"image":case"reset":case"file":return!1;default:return!0}case"select":case"textarea":return!0;default:return!1}}).filter(function(e){return"string"==typeof e.name&&"string"==typeof e.value}).map(function(e){return[encodeURIComponent(t(e.name)),encodeURIComponent(t(e.value))].join("=")}).join("&")};var s=!1;try{document.createElement("div").addEventListener("test",function(){},{get capture(){return s=!0}})}catch(e){}},{"./noop":120}],118:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=function(e){function t(t){return e.call(this,"Pjax: "+t)||this}return r(t,e),t}(Error);n.PjaxError=o;var i=function(e){function t(t){var n=e.call(this,"Pjax: Fatal: "+t)||this;return n.name="FatalError",n}return r(t,e),t}(o);n.FatalError=i},{}],119:[function(e,t,n){"use strict";function r(e){return void o(e).forEach(function(e){var t=e[0],n=e[1];return t.textContent=n.textContent})}function o(e){return a.find(e,"noscript").filter(function(e){return e.children.length>0}).map(function(e){var t=e.cloneNode(!0);return t.textContent=e.innerHTML,[e,t]})}function i(e){try{var t=e('\n<html lang="en" class="html">\n  <head>\n    <link href="/">\n    <title>&amp;</title>\n    <noscript><style>/**/</style></noscript>\n  </head>\n  <body>\n    <noscript>noscript</noscript>\n    <a href="/"></a>\n    <script>document.head.remove();<\/script>\n  </body>\n</html>\n');switch(!1){case t.URL&&t.URL.startsWith(window.location.protocol+"//"+window.location.host):case"&"===t.title:case!!t.querySelector('html.html[lang="en"]'):case!!t.querySelector("head>link").href:case!!t.querySelector("body>a").href:case!t.querySelector("head>noscript>*"):case"document.head.remove();"===t.querySelector("script").innerHTML:case"<style>/**/</style>"===t.querySelector("head>noscript").textContent:case"noscript"===t.querySelector("body>noscript").textContent:throw void 0}return!0}catch(e){return!1}}Object.defineProperty(n,"__esModule",{value:!0});var u=e("spica/maybe"),c=e("spica/either"),a=e("./dom");n.parse=[function(e){var t=window.document.implementation.createHTMLDocument(""),n=a.find(function(e){var n=t.createElement("div");return n.innerHTML=e,n.firstElementChild?n.firstElementChild:n}(e.slice(0,e.search(/<\/title>/i)+8)),"title").reduce(function(e,t){return t.textContent||e},"");return"function"==typeof DOMParser&&(t.title=n),t.open(),t.write(e),t.close(),t.title!==n&&(t.title=t.querySelector("title").textContent||""),r(t),t},function(e){var t=(new DOMParser).parseFromString(e,"text/html");return r(t),t}].reduce(function(e,t){return e.bind(function(){return i(t)?c.Left(t):e})},c.Right(function(){return u.Nothing})).extract(function(e){return function(t){return u.Just(e(t))}}),n._fixNoscript=o},{"./dom":117,"spica/either":8,"spica/maybe":13}],120:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.noop=function(){}},{}],121:[function(e,t,n){"use strict";function r(e,t){var n=/\/|[^\/]+\/?/g,r=/\/(?=$|[?#])/;return a.Sequence.zip(a.Sequence.from(o(e)),a.Sequence.cycle([t])).map(function(e){var t=e[0],o=e[1];return[t.match(n)||[],t.match(r)?o.match(n)||[]:o.replace(r,"").match(n)||[]]}).filter(function(e){var t=e[0],n=e[1];return t.length<=n.length}).filter(function(e){var t=e[0],n=e[1];return a.Sequence.zip(a.Sequence.from(t),a.Sequence.from(n)).takeWhile(function(e){return i(e[0],e[1])}).extract().length===t.length}).take(1).extract().length>0}function o(e){return a.Sequence.from((e.match(/{.*?}|[^{]*/g)||[]).map(function(e){return"{"===e[0]?e.slice(1,-1).split(","):[e]})).mapM(a.Sequence.from).map(function(e){return e.join("")}).extract()}function i(e,t){e=e.replace(/[*]+/g,"*").replace(/[*]+[?]/g,"?");var n=Array.from(e).map(function(t,n){return"*"===t?[t,e.slice(n+1).match(/^[^?*\/]*/)[0]]:[t,""]}).reduce(function(e,t){var n=e[0],r=e[1],o=r[0],i=void 0===o?"":o,u=r.slice(1),c=e[2],a=t[0],s=t[1];if(!c)return[n,[i].concat(u),c];switch(a){case"?":return[n.concat([i]),u,c];case"*":var f=i.concat(u.join("")),p=s.split(/[?*]/,1)[0];return f.includes(p)?""===p?[n.concat(Array.from(f.replace(/\/$/,""))),Array.from(f.replace(/.*?(?=\/?$)/,"")),c]:[n.concat(Array.from(f.slice(0,f.indexOf(p)))),Array.from(f.slice(f.indexOf(p))),c]:[n,[i].concat(u),!c];default:return i===a?[n.concat([i]),u,c]:[n,[i].concat(u),!c]}},[Array.from(""),Array.from(t),!0]),r=n[1],o=n[2];return 0===r.length&&o}Object.defineProperty(n,"__esModule",{value:!0});var u=e("../layer/data/model/domain/url"),c=e("./url"),a=e("spica/sequence"),s=e("spica/flip");n.router=function(e){return function(t){var n=new c.Url(u.standardizeUrl(t)),o=n.path,i=n.pathname;return a.Sequence.from(Object.keys(e).sort().reverse()).filter(s.flip(r)(i)).map(function(t){return e[t]}).take(1).extract().pop()(o)}},n.compare=r,n.expand=o,n.match=i},{"../layer/data/model/domain/url":80,"./url":122,"spica/flip":11,"spica/sequence":69}],122:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e){this.parser=document.createElement("a"),this.URL,this.parser.href=e||location.href,this.parser.setAttribute("href",e||location.href),Object.freeze(this)}return Object.defineProperty(e.prototype,"href",{get:function(){return this.parser.href},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"domain",{get:function(){return this.protocol+"//"+this.host},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scheme",{get:function(){return this.parser.protocol.slice(0,-1)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"protocol",{get:function(){return this.parser.protocol},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"userinfo",{get:function(){return this.parser.href.match(/[^:\/?#]+:\/\/([^\/?#]*)@|$/).pop()||""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"host",{get:function(){return this.parser.host},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hostname",{get:function(){return this.parser.hostname},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"port",{get:function(){return this.parser.port},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return""+this.pathname+this.query},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pathname",{get:function(){return this.parser.pathname},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"query",{get:function(){return this.parser.search},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fragment",{get:function(){return this.parser.hash},enumerable:!0,configurable:!0}),e}();n.Url=r},{}],"pjax-api":[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),function(e){for(var t in e)n.hasOwnProperty(t)||(n[t]=e[t])}(e("./src/export"));var r=e("./src/export");n.default=r.default},{"./src/export":75}]},{},[1,2,"pjax-api"]);