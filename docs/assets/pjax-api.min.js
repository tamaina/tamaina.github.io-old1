/*! pjax-api v3.17.7 https://github.com/falsandtru/pjax-api | (c) 2017, falsandtru | (Apache-2.0 AND MPL-2.0) License */
require=function e(t,n,r){function o(u,c){if(!n[u]){if(!t[u]){var a="function"==typeof require&&require;if(!c&&a)return a(u,!0);if(i)return i(u,!0);var s=new Error("Cannot find module '"+u+"'");throw s.code="MODULE_NOT_FOUND",s}var f=n[u]={exports:{}};t[u][0].call(f.exports,function(e){var n=t[u][1][e];return o(n||e)},f,f.exports,e,t,n,r)}return n[u].exports}for(var i="function"==typeof require&&require,u=0;u<r.length;u++)o(r[u]);return o}({1:[function(e,t,n){},{}],2:[function(e,t,n){arguments[4][1][0].apply(n,arguments)},{dup:1}],3:[function(e,t,n){"use strict";function r(e){return function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];if(void 0===t||null===t)throw new TypeError("Spica: assign: Cannot walk on "+t+".");try{for(var i=o(n),u=i.next();!u.done;u=i.next()){var c=u.value;if(void 0!==c&&null!==c)try{for(var a=o(Object.keys(Object(c))),s=a.next();!s.done;s=a.next()){var f=s.value,l=Object.getOwnPropertyDescriptor(Object(c),f);void 0!==l&&l.enumerable&&e(f,Object(t),Object(c))}}catch(e){h={error:e}}finally{try{s&&!s.done&&(v=a.return)&&v.call(a)}finally{if(h)throw h.error}}}}catch(e){p={error:e}}finally{try{u&&!u.done&&(d=i.return)&&d.call(i)}finally{if(p)throw p.error}}return Object(t);var p,d,h,v}}var o=this&&this.__values||function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}};Object.defineProperty(n,"__esModule",{value:!0});var i=e("./type");n.assign=r(function(e,t,n){return t[e]=n[e]}),n.clone=r(function(e,t,r){switch(i.type(r[e])){case"Array":return t[e]=n.clone([],r[e]);case"Object":return t[e]=r[e]instanceof Object?n.clone({},r[e]):r[e];default:return t[e]=r[e]}}),n.extend=r(function(e,t,r){switch(i.type(r[e])){case"Array":return t[e]=n.extend([],r[e]);case"Object":switch(i.type(t[e])){case"Object":return t[e]=r[e]instanceof Object?n.extend(t[e],r[e]):r[e];default:return t[e]=r[e]instanceof Object?n.extend({},r[e]):r[e]}default:return t[e]=r[e]}})},{"./type":77}],4:[function(e,t,n){"use strict";var r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),u=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)u.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return u},o=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(r(arguments[t]));return e},i=this&&this.__values||function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}};Object.defineProperty(n,"__esModule",{value:!0});var u=e("./assign"),c=e("./equal"),a=function(){function e(e,t,n){void 0===t&&(t=function(){}),void 0===n&&(n={});var r=this;if(this.size=e,this.callback=t,this.opts={ignore:{delete:!1,clear:!1}},e>0==!1)throw new Error("Spica: Cache: Cache size must be greater than 0.");Object.freeze(u.extend(this.opts,n));var i=n.data||{stats:[[],[]],entries:[]},c=i.stats,a=i.entries,s=c[1].slice(0,e),f=c[0].slice(0,e-s.length);if(this.stats={LRU:f,LFU:s},this.store=new Map(a),o(c[1],c[0]).slice(s.length+f.length).forEach(function(e){return void r.store.delete(e)}),this.store.size!==s.length+f.length)throw new Error("Spica: Cache: Size of stats and entries is not matched.");if(!o(s,f).every(function(e){return r.store.has(e)}))throw new Error("Spica: Cache: Keys of stats and entries is not matched.")}return e.prototype.put=function(e,t,n){if(void 0===n&&(n=!0),!n&&this.store.has(e))return this.store.set(e,t),!0;if(this.access(e))return this.store.set(e,t),!0;var r=this.stats,o=r.LRU,i=r.LFU;if(o.length+i.length===this.size&&o.length<i.length){var u=i.pop(),c=this.store.get(u);this.store.delete(u),this.callback(u,c)}if(o.unshift(e),this.store.set(e,t),o.length+i.length>this.size){var a=o.pop(),c=this.store.get(a);this.store.delete(a),this.callback(a,c)}return!1},e.prototype.set=function(e,t,n){return this.put(e,t,n),t},e.prototype.get=function(e,t){return void 0===t&&(t=!0),t?(this.access(e),this.store.get(e)):this.store.get(e)},e.prototype.has=function(e){return this.store.has(e)},e.prototype.delete=function(e){if(!this.store.has(e))return!1;var t=this.stats,n=t.LRU,r=t.LFU;try{for(var o=i([r,n]),u=o.next();!u.done;u=o.next()){var a=u.value,s=c.findIndex(e,a);if(-1!==s){var f=this.store.get(e);return this.store.delete(a.splice(s,1)[0]),this.opts.ignore.delete?!0:(this.callback(e,f),!0)}}}catch(e){l={error:e}}finally{try{u&&!u.done&&(p=o.return)&&p.call(o)}finally{if(l)throw l.error}}return!1;var l,p},e.prototype.clear=function(){var e=this,t=this.store;this.store=new Map,this.stats={LRU:[],LFU:[]},this.opts.ignore.clear||o(t).forEach(function(t){var n=r(t,2),o=n[0],i=n[1];return void e.callback(o,i)})},e.prototype[Symbol.iterator]=function(){return this.store[Symbol.iterator]()},e.prototype.export=function(){return{stats:[this.stats.LRU.slice(),this.stats.LFU.slice()],entries:o(this)}},e.prototype.inspect=function(){var e=this.stats,t=e.LRU,n=e.LFU;return[t.slice(),n.slice()]},e.prototype.access=function(e){return this.accessLFU(e)||this.accessLRU(e)},e.prototype.accessLRU=function(e){if(!this.store.has(e))return!1;var t=this.stats.LRU,n=c.findIndex(e,t);if(-1===n)return!1;var r=this.stats.LFU;return r.unshift.apply(r,o(t.splice(n,1))),!0},e.prototype.accessLFU=function(e){if(!this.store.has(e))return!1;var t=this.stats.LFU,n=c.findIndex(e,t);return-1!==n&&(t.unshift.apply(t,o(t.splice(n,1))),!0)},e}();n.Cache=a},{"./assign":3,"./equal":10}],5:[function(e,t,n){"use strict";var r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),u=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)u.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return u},o=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(r(arguments[t]));return e};Object.defineProperty(n,"__esModule",{value:!0});var i=e("./exception"),u=e("./monad/maybe"),c=e("./monad/either"),a=function(){return function(e){void 0===e&&(e=[]);var t=this;this.done=!1,this.listeners=new Set,this.register=function(e){function n(t){try{e(t)}catch(t){i.causeAsyncException(t)}}return t.canceled?(n(t.reason),function(){}):t.done?function(){}:(t.listeners.add(n),function(){return t.done?void 0:void t.listeners.delete(n)})},this.cancel=function(e){t.done||(t.done=!0,t.canceled=!0,t.reason=e,Object.freeze(t.listeners),Object.freeze(t),t.listeners.forEach(function(t){return void t(e)}))},this.close=function(){t.done||(t.done=!0,Object.freeze(t.listeners),Object.freeze(t))},this.canceled=!1,this.promise=function(e){return t.canceled?new Promise(function(e,n){return void n(t.reason)}):Promise.resolve(e)},this.maybe=function(e){return t.canceled?u.Nothing:u.Just(e)},this.either=function(e){return t.canceled?c.Left(t.reason):c.Right(e)},o(e).forEach(function(e){return void e.register(t.cancel)})}}();n.Cancellation=a},{"./exception":11,"./monad/either":17,"./monad/maybe":21}],6:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.compose=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.reduce(function(e,t){return Object.getOwnPropertyNames(t.prototype).filter(function(t){return!(t in e.prototype)}).forEach(function(n){return e.prototype[n]=t.prototype[n]}),Object.getOwnPropertyNames(t).filter(function(t){return!(t in e)}).forEach(function(n){return e[n]=t[n]}),e},e)}},{}],7:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.concat=function(e,t){for(var n=0,r=t.length,o=e.length;n<r;++n)e[n+o]=t[n];return e}},{}],8:[function(e,t,n){"use strict";function r(e,t,n){return e.length<=t.length?e.apply(n,t.slice(0,e.length)):function(){for(var o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];return r(e,t.concat(o),n)}}Object.defineProperty(n,"__esModule",{value:!0}),n.curry=function(e,t){return 0===e.length?function(){return e.call(t)}:r(e,[],t)}},{}],9:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),function(e){for(var t in e)n.hasOwnProperty(t)||(n[t]=e[t])}(e("./monad/either"))},{"./monad/either":17}],10:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.findIndex=function(e,t){for(var n=e!=e,r=0;r<t.length;++r){var o=t[r];if(n?o!=o:o===e)return r}return-1}},{}],11:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.causeAsyncException=function(e){new Promise(function(t,n){return void n(e)})}},{}],12:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("./curry");n.flip=function(e){return r.curry(function(t,n){return e.length>1?e(n,t):e(n)(t)})}},{"./curry":8}],13:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("./concat"),o=function(){function e(){this.NIL}return e.prototype.push=function(e){return new i(e,this)},e.prototype.extend=function(e){return this.push(e())},e.prototype.array=function(){return[]},e}();n.HNil=o;var i=function(){function e(e,t){this.head=e,this.tail=t,this.CONS}return e.prototype.push=function(t){return new e(t,this)},e.prototype.walk=function(e){return e(this.head),this.tail},e.prototype.modify=function(e){return this.tail.push(e(this.head))},e.prototype.extend=function(e){return this.push(e(this.head))},e.prototype.compact=function(e){var t=this;return this.tail.modify(function(n){return e(t.head,n)})},e.prototype.reverse=function(){return this.array().reduce(function(e,t){return e.push(t)},new o)},e.prototype.tuple=function(){return this.array()},e.prototype.array=function(){return r.concat([this.head],this.tail.array())},e}()},{"./concat":7}],14:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),function(e){for(var t in e)n.hasOwnProperty(t)||(n[t]=e[t])}(e("./monad/maybe"))},{"./monad/maybe":21}],15:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("./functor"),i=e("../curry"),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t}(o.Functor);n.Applicative=u,function(e){function t(e,n){return n?e.bind(function(e){return n.fmap(function(t){return 0===e.length?e(t):i.curry(e)(t)})}):function(n){return t(e,n)}}e.ap=t}(u=n.Applicative||(n.Applicative={})),n.Applicative=u},{"../curry":8,"./functor":18}],16:[function(e,t,n){"use strict";function r(){throw new Error("Spica: Either: Invalid thunk call.")}var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var i=function(e){function t(t){var n=e.call(this,t)||this;return n.EITHER,n}return o(t,e),t.prototype.fmap=function(e){return this.bind(function(t){return new c(e(t))})},t.prototype.ap=function(e){return t.ap(this,e)},t.prototype.bind=function(e){var n=this;return new t(function(){var r=n.evaluate();if(r instanceof u)return r;if(r instanceof c)return e(r.extract());if(r instanceof t)return r.bind(e);throw new TypeError("Spica: Either: Invalid monad value.\n\t"+r)})},t.prototype.join=function(){return this.bind(function(e){return e})},t.prototype.extract=function(e,t){return t?this.fmap(t).extract(e):this.evaluate().extract(e)},t}(e("./monad").Monad);n.Either=i,function(e){function t(e){return new c(e)}e.pure=t,e.Return=t,e.sequence=function(t){return t.reduce(function(e,t){return e.bind(function(e){return t.fmap(function(t){return e.concat([t])})})},e.Return([]))}}(i=n.Either||(n.Either={})),n.Either=i;var u=function(e){function t(t){var n=e.call(this,r)||this;return n.a=t,n.LEFT,n}return o(t,e),t.prototype.bind=function(e){return this},t.prototype.extract=function(e){if(!e)throw this.a;return e(this.a)},t}(i);n.Left=u;var c=function(e){function t(t){var n=e.call(this,r)||this;return n.b=t,n.RIGHT,n}return o(t,e),t.prototype.bind=function(e){var t=this;return new i(function(){return e(t.extract())})},t.prototype.extract=function(e,t){return t?t(this.b):this.b},t}(i);n.Right=c},{"./monad":22}],17:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("./either.impl");!function(e){e.fmap=r.Either.fmap,e.pure=r.Either.pure,e.ap=r.Either.ap,e.Return=r.Either.Return,e.bind=r.Either.bind,e.sequence=r.Either.sequence}(n.Either||(n.Either={})),n.Left=function(e){return new r.Left(e)},n.Right=function(e){return new r.Right(e)}},{"./either.impl":16}],18:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t}(e("./lazy").Lazy);n.Functor=o,function(e){e.fmap=function(e,t){return t?e.fmap(t):function(t){return e.fmap(t)}}}(o=n.Functor||(n.Functor={})),n.Functor=o},{"./lazy":19}],19:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e){this.thunk=e}return e.prototype.evaluate=function(){return this.memory_=this.memory_||this.thunk()},e}();n.Lazy=r},{}],20:[function(e,t,n){"use strict";function r(){throw new Error("Spica: Maybe: Invalid thunk call.")}var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var i=function(e){function t(t){var n=e.call(this,t)||this;return n.MAYBE,n}return o(t,e),t.prototype.fmap=function(e){return this.bind(function(t){return new u(e(t))})},t.prototype.ap=function(e){return t.ap(this,e)},t.prototype.bind=function(e){var n=this;return new t(function(){var r=n.evaluate();if(r instanceof u)return e(r.extract());if(r instanceof c)return r;if(r instanceof t)return r.bind(e);throw new TypeError("Spica: Maybe: Invalid monad value.\n\t"+r)})},t.prototype.guard=function(e){return e?this:t.mzero},t.prototype.join=function(){return this.bind(function(e){return e})},t.prototype.extract=function(e,t){return t?this.fmap(t).extract(e):this.evaluate().extract(e)},t}(e("./monadplus").MonadPlus);n.Maybe=i,function(e){function t(e){return new u(e)}e.pure=t,e.Return=t,e.sequence=function(t){return t.reduce(function(e,t){return e.bind(function(e){return t.fmap(function(t){return e.concat([t])})})},e.Return([]))}}(i=n.Maybe||(n.Maybe={})),n.Maybe=i;var u=function(e){function t(t){var n=e.call(this,r)||this;return n.a=t,n.JUST,n}return o(t,e),t.prototype.bind=function(e){var t=this;return new i(function(){return e(t.extract())})},t.prototype.extract=function(e,t){return t?t(this.a):this.a},t}(i);n.Just=u;var c=function(e){function t(){var t=e.call(this,r)||this;return t.NOTHING,t}return o(t,e),t.prototype.bind=function(e){return this},t.prototype.extract=function(e){if(!e)throw void 0;return e()},t}(i);n.Nothing=c,function(e){e.mzero=new c,e.mplus=function(t,n){return new e(function(){return t.fmap(function(){return t}).extract(function(){return n})})}}(i=n.Maybe||(n.Maybe={})),n.Maybe=i},{"./monadplus":23}],21:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("./maybe.impl");!function(e){e.fmap=r.Maybe.fmap,e.pure=r.Maybe.pure,e.ap=r.Maybe.ap,e.Return=r.Maybe.Return,e.bind=r.Maybe.bind,e.sequence=r.Maybe.sequence,e.mzero=r.Maybe.mzero,e.mplus=r.Maybe.mplus}(n.Maybe||(n.Maybe={})),n.Just=function(e){return new r.Just(e)},n.Nothing=r.Maybe.mzero},{"./maybe.impl":20}],22:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t}(e("./applicative").Applicative);n.Monad=o,function(e){function t(e,n){return n?e.bind(n):function(n){return t(e,n)}}e.bind=t}(o=n.Monad||(n.Monad={})),n.Monad=o},{"./applicative":15}],23:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t}(e("./monad").Monad);n.MonadPlus=o,o=n.MonadPlus||(n.MonadPlus={}),n.MonadPlus=o},{"./monad":22}],24:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("./sequence/core");n.Sequence=r.Sequence;var o=e("./sequence/member/static/resume"),i=e("./sequence/member/static/from"),u=e("./sequence/member/static/cycle"),c=e("./sequence/member/static/random"),a=e("./sequence/member/static/concat"),s=e("./sequence/member/static/zip"),f=e("./sequence/member/static/difference"),l=e("./sequence/member/static/union"),p=e("./sequence/member/static/intersect"),d=e("./sequence/member/static/pure"),h=e("./sequence/member/static/return"),v=e("./sequence/member/static/sequence"),y=e("./sequence/member/static/mempty"),m=e("./sequence/member/static/mconcat"),_=e("./sequence/member/static/mappend"),b=e("./sequence/member/static/mzero"),w=e("./sequence/member/static/mplus"),S=e("./sequence/member/instance/extract"),q=e("./sequence/member/instance/iterate"),O=e("./sequence/member/instance/memoize"),g=e("./sequence/member/instance/reduce"),j=e("./sequence/member/instance/take"),P=e("./sequence/member/instance/drop"),x=e("./sequence/member/instance/takeWhile"),E=e("./sequence/member/instance/dropWhile"),k=e("./sequence/member/instance/takeUntil"),T=e("./sequence/member/instance/dropUntil"),M=e("./sequence/member/instance/sort"),R=e("./sequence/member/instance/unique"),L=e("./sequence/member/instance/fmap"),A=e("./sequence/member/instance/ap"),I=e("./sequence/member/instance/bind"),U=e("./sequence/member/instance/join"),z=e("./sequence/member/instance/mapM"),C=e("./sequence/member/instance/filterM"),F=e("./sequence/member/instance/map"),D=e("./sequence/member/instance/filter"),N=e("./sequence/member/instance/scan"),H=e("./sequence/member/instance/foldr"),W=e("./sequence/member/instance/group"),G=e("./sequence/member/instance/inits"),V=e("./sequence/member/instance/tails"),B=e("./sequence/member/instance/segs"),J=e("./sequence/member/instance/subsequences"),$=e("./sequence/member/instance/permutations");e("../compose").compose(r.Sequence,o.default,i.default,u.default,c.default,a.default,s.default,f.default,l.default,p.default,d.default,h.default,v.default,y.default,m.default,_.default,b.default,w.default,S.default,q.default,O.default,g.default,j.default,P.default,x.default,E.default,k.default,T.default,M.default,R.default,L.default,A.default,I.default,U.default,z.default,C.default,F.default,D.default,N.default,H.default,W.default,G.default,V.default,B.default,J.default,$.default)},{"../compose":6,"./sequence/core":25,"./sequence/member/instance/ap":26,"./sequence/member/instance/bind":27,"./sequence/member/instance/drop":28,"./sequence/member/instance/dropUntil":29,"./sequence/member/instance/dropWhile":30,"./sequence/member/instance/extract":31,"./sequence/member/instance/filter":32,"./sequence/member/instance/filterM":33,"./sequence/member/instance/fmap":34,"./sequence/member/instance/foldr":35,"./sequence/member/instance/group":36,"./sequence/member/instance/inits":37,"./sequence/member/instance/iterate":38,"./sequence/member/instance/join":39,"./sequence/member/instance/map":40,"./sequence/member/instance/mapM":41,"./sequence/member/instance/memoize":42,"./sequence/member/instance/permutations":43,"./sequence/member/instance/reduce":44,"./sequence/member/instance/scan":45,"./sequence/member/instance/segs":46,"./sequence/member/instance/sort":47,"./sequence/member/instance/subsequences":48,"./sequence/member/instance/tails":49,"./sequence/member/instance/take":50,"./sequence/member/instance/takeUntil":51,"./sequence/member/instance/takeWhile":52,"./sequence/member/instance/unique":53,"./sequence/member/static/concat":54,"./sequence/member/static/cycle":55,"./sequence/member/static/difference":56,"./sequence/member/static/from":57,"./sequence/member/static/intersect":58,"./sequence/member/static/mappend":59,"./sequence/member/static/mconcat":60,"./sequence/member/static/mempty":61,"./sequence/member/static/mplus":62,"./sequence/member/static/mzero":63,"./sequence/member/static/pure":64,"./sequence/member/static/random":65,"./sequence/member/static/resume":66,"./sequence/member/static/return":67,"./sequence/member/static/sequence":68,"./sequence/member/static/union":69,"./sequence/member/static/zip":70}],25:[function(e,t,n){"use strict";function r(){throw new Error("Spica: Sequence: Invalid thunk call.")}var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var i=function(e){function t(t){var n=e.call(this,r)||this;return n.cons=t,n}return o(t,e),t.prototype[Symbol.iterator]=function(){var e=this,n=function(){return e.iterate()};return{next:function(){var e=n();return n=t.Thunk.iterator(e),{done:!t.isIterable(e),value:t.Thunk.value(e)}}}},t}(e("../monadplus").MonadPlus);n.Sequence=i,i=n.Sequence||(n.Sequence={}),n.Sequence=i,function(e){!function(t){t.cons=function(t,n){switch(arguments.length){case 0:return[];case 1:return[t];case 2:return[t,n];default:throw e.Exception.invalidConsError(arguments)}}}(e.Data||(e.Data={}));var t;!function(e){e.value=function(e){return e[0]},e.iterator=function(e){return e[1]},e.index=function(e){return e[2]}}(t=e.Thunk||(e.Thunk={}));var n;!function(n){function r(n,o,i){return e.isIterable(n)?i(n,function(){return r(t.iterator(n)(),o,i)}):o(n)}n.done=function(){return[void 0,n.done,-1]},n.when=r}(n=e.Iterator||(e.Iterator={})),e.isIterable=function(e){return t.iterator(e)!==n.done};!function(e){e.invalidConsError=function(e){return console.error(e,e.length,e[0],e[1]),new TypeError("Spica: Sequence: Invalid parameters of cons.")},e.invalidDataError=function(e){return console.error(e),new TypeError("Spica: Sequence: Invalid data.")},e.invalidThunkError=function(e){return console.error(e),new TypeError("Spica: Sequence: Invalid thunk.")}}(e.Exception||(e.Exception={}))}(i=n.Sequence||(n.Sequence={})),n.Sequence=i},{"../monadplus":23}],26:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../core"),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.ap=function(e){return o.Sequence.ap(this,e)},t}(o.Sequence);n.default=i},{"../../core":25}],27:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../core"),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.bind=function(e){return o.Sequence.concat(this.fmap(e))},t}(o.Sequence);n.default=i},{"../../core":25}],28:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../core"),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.drop=function(e){var t=this;return new o.Sequence(function(n,r){return void 0===n&&(n=function(){return t.iterate()}),o.Sequence.Iterator.when(n(),function(){return r()},function(t,n){return o.Sequence.Thunk.index(t)<e?n():r(o.Sequence.Thunk.value(t),o.Sequence.Thunk.iterator(t))})})},t}(o.Sequence);n.default=i},{"../../core":25}],29:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../core"),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.dropUntil=function(e){var t=this;return new o.Sequence(function(n,r){return void 0===n&&(n=function(){return t.iterate()}),o.Sequence.Iterator.when(n(),function(){return r()},function(t,n){return e(o.Sequence.Thunk.value(t))?n():r(o.Sequence.Thunk.value(t),o.Sequence.Thunk.iterator(t))})})},t}(o.Sequence);n.default=i},{"../../core":25}],30:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../core"),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.dropWhile=function(e){var t=this;return new o.Sequence(function(n,r){return void 0===n&&(n=function(){return t.iterate()}),o.Sequence.Iterator.when(n(),function(){return r()},function(t,n){return e(o.Sequence.Thunk.value(t))?n():r(o.Sequence.Thunk.value(t),o.Sequence.Thunk.iterator(t))})})},t}(o.Sequence);n.default=i},{"../../core":25}],31:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../core"),i=e("../../../../concat"),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.extract=function(){for(var e=this,t=[],n=function(){return e.iterate()};;){var r=n();if(!o.Sequence.isIterable(r))return t;i.concat(t,[o.Sequence.Thunk.value(r)]),n=o.Sequence.Thunk.iterator(r)}},t}(o.Sequence);n.default=u},{"../../../../concat":7,"../../core":25}],32:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../core"),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.filter=function(e){var t=this;return new o.Sequence(function(n,r){return void 0===n&&(n=function(){return t.iterate()}),o.Sequence.Iterator.when(n(),function(){return r()},function(t,n){return e(o.Sequence.Thunk.value(t),o.Sequence.Thunk.index(t))?r(o.Sequence.Thunk.value(t),o.Sequence.Thunk.iterator(t)):n()})})},t}(o.Sequence);n.default=i},{"../../core":25}],33:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../core"),i=e("../../../../concat"),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.filterM=function(e){var t=this;return o.Sequence.from([0]).bind(function(){var n=t.extract();switch(n.length){case 0:return o.Sequence.from([[]]);default:var r=n.shift();return e(r).bind(function(t){return t?0===n.length?o.Sequence.from([[r]]):o.Sequence.from(n).filterM(e).fmap(function(e){return i.concat([r],e)}):0===n.length?o.Sequence.from([[]]):o.Sequence.from(n).filterM(e)})}})},t}(o.Sequence);n.default=u},{"../../../../concat":7,"../../core":25}],34:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../core"),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.fmap=function(e){var t=this;return new o.Sequence(function(n){return void 0===n&&(n=function(){return t.iterate()}),o.Sequence.Iterator.when(n(),function(){return o.Sequence.Data.cons()},function(t){return o.Sequence.Data.cons(e(o.Sequence.Thunk.value(t)),o.Sequence.Thunk.iterator(t))})})},t}(o.Sequence);n.default=i},{"../../core":25}],35:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../core"),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.foldr=function(e,t){var n=this;return new o.Sequence(function(r){return void 0===r&&(r=function(){return n.reduce().iterate()}),o.Sequence.Iterator.when(r(),function(){return o.Sequence.Data.cons(t)},function(n){return o.Sequence.Data.cons(e(o.Sequence.Thunk.value(n),o.Sequence.resume(o.Sequence.Thunk.iterator(n)).foldr(e,t)))})}).bind(function(e){return e})},t}(o.Sequence);n.default=i},{"../../core":25}],36:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),u=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)u.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return u};Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../core"),u=e("../../../../concat"),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.group=function(e){var t=this;return new i.Sequence(function(n,r){var c=o(void 0===n?[function(){return t.iterate()},[]]:n,2),a=c[0],s=c[1];return i.Sequence.Iterator.when(a(),function(){return 0===s.length?r():r(s)},function(t,n){return 0===s.length||e(s[0],i.Sequence.Thunk.value(t))?(u.concat(s,[i.Sequence.Thunk.value(t)]),n()):r(s,[i.Sequence.Thunk.iterator(t),u.concat([],[i.Sequence.Thunk.value(t)])])})})},t}(i.Sequence);n.default=c},{"../../../../concat":7,"../../core":25}],37:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../core"),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.inits=function(){return o.Sequence.mappend(o.Sequence.from([[]]),this.scan(function(e,t){return e.concat([t])},[]).dropWhile(function(e){return 0===e.length}))},t}(o.Sequence);n.default=i},{"../../core":25}],38:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../core"),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.iterate=function(){return this.iterate_()},t.prototype.iterate_=function(e,t){var n=this;void 0===t&&(t=0);var r=this.cons(e,o.Sequence.Data.cons);switch(r.length){case 0:return[void 0,o.Sequence.Iterator.done,-1];case 1:return[r[0],function(){return o.Sequence.Iterator.done()},t];case 2:return[r[0],function(){return n.iterate_(r[1],t+1)},t];default:throw o.Sequence.Exception.invalidDataError(r)}},t}(o.Sequence);n.default=i},{"../../core":25}],39:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../core"),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.join=function(){return o.Sequence.concat(this)},t}(o.Sequence);n.default=i},{"../../core":25}],40:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../core"),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.map=function(e){var t=this;return new o.Sequence(function(n){return void 0===n&&(n=function(){return t.iterate()}),o.Sequence.Iterator.when(n(),function(){return o.Sequence.Data.cons()},function(t){return o.Sequence.Data.cons(e(o.Sequence.Thunk.value(t),o.Sequence.Thunk.index(t)),o.Sequence.Thunk.iterator(t))})})},t}(o.Sequence);n.default=i},{"../../core":25}],41:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../core"),i=e("../../../../concat"),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.mapM=function(e){var t=this;return o.Sequence.from([0]).bind(function(){var n=t.extract();switch(n.length){case 0:return o.Sequence.mempty;default:var r=n.shift();return e(r).bind(function(t){return 0===n.length?o.Sequence.from([[t]]):o.Sequence.from(n).mapM(e).fmap(function(e){return i.concat([t],e)})})}})},t}(o.Sequence);n.default=u},{"../../../../concat":7,"../../core":25}],42:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),u=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)u.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return u};Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../core"),u=new WeakMap,c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.memoize=function(){var e=this;return new i.Sequence(function(t,n){var r=o(void 0===t?[0,u.get(e)||u.set(e,new Map).get(e)]:t,2),c=r[0],a=r[1];return i.Sequence.Iterator.when(a.get(c)||a.set(c,c>0&&a.has(c-1)?i.Sequence.Thunk.iterator(a.get(c-1))():e.iterate()).get(c),function(){return n()},function(e){return n(i.Sequence.Thunk.value(e),[c+1,a])})})},t}(i.Sequence);n.default=c},{"../../core":25}],43:[function(e,t,n){"use strict";function r(e,t){return u.Sequence.Iterator.when(e.iterate(),function(){return u.Sequence.mempty},function(e){return new u.Sequence(function(n,o){return u.Sequence.Iterator.when(e,function(){return o()},function(e){function n(e,t){return c(function(e){return e},e,t)[1]}function c(e,t,n){return u.Sequence.Iterator.when(t.iterate(),function(){return[s,n]},function(t){var r=u.Sequence.Thunk.value(t),o=i(c(function(t){return e(u.Sequence.mappend(u.Sequence.from([r]),t))},u.Sequence.resume(u.Sequence.Thunk.iterator(t)),n),2),s=o[0],f=o[1];return[u.Sequence.mappend(u.Sequence.from([r]),s),u.Sequence.mappend(u.Sequence.from([e(u.Sequence.mappend(u.Sequence.from([a]),u.Sequence.mappend(u.Sequence.from([r]),s))).extract()]),f)]})}var a=u.Sequence.Thunk.value(e),s=u.Sequence.resume(u.Sequence.Thunk.iterator(e)).memoize();return o(t.permutations().foldr(function(e,t){return n(u.Sequence.from(e),t)},r(s,u.Sequence.mappend(u.Sequence.from([a]),t))))})}).bind(function(e){return e})})}var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),u=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)u.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return u};Object.defineProperty(n,"__esModule",{value:!0});var u=e("../../core"),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.permutations=function(){var e=this;return u.Sequence.from([0]).bind(function(){var t=e.extract();return 0===t.length?u.Sequence.mempty:u.Sequence.from([t])}).bind(function(e){return u.Sequence.mappend(u.Sequence.from([e]),r(u.Sequence.from(e),u.Sequence.mempty))})},t}(u.Sequence);n.default=c},{"../../core":25}],44:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),u=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)u.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return u};Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../core"),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.reduce=function(){var e=this;return new i.Sequence(function(t,n){var r=o(void 0===t?[0,new Map]:t,2),u=r[0],c=r[1];return i.Sequence.Iterator.when(c.get(u)||c.set(u,u>0&&c.has(u-1)?i.Sequence.Thunk.iterator(c.get(u-1))():e.iterate()).get(u),function(){return n()},function(e){return n(i.Sequence.Thunk.value(e),[u+1,c])})})},t}(i.Sequence);n.default=u},{"../../core":25}],45:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),u=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)u.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return u};Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../core"),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.scan=function(e,t){var n=this;return new i.Sequence(function(r){var u=o(void 0===r?[t,function(){return n.iterate()},0]:r,3),c=u[0],a=u[1],s=u[2];return i.Sequence.Iterator.when(a(),function(){return 0===s?i.Sequence.Data.cons(t):i.Sequence.Data.cons()},function(t){return i.Sequence.Data.cons(c=e(c,i.Sequence.Thunk.value(t)),[c,i.Sequence.Thunk.iterator(t),i.Sequence.Thunk.index(t)+1])})})},t}(i.Sequence);n.default=u},{"../../core":25}],46:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../core"),i=e("../../../../concat"),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.segs=function(){return o.Sequence.mappend(this.foldr(function(e,t){return t.take(1).bind(function(n){return o.Sequence.mappend(o.Sequence.from([o.Sequence.mappend(o.Sequence.from([[e]]),o.Sequence.from(n).map(function(t){return i.concat([e],t)}))]),t)})},o.Sequence.from([o.Sequence.from([])])).bind(function(e){return e}),o.Sequence.from([[]]))},t}(o.Sequence);n.default=u},{"../../../../concat":7,"../../core":25}],47:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../core"),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.sort=function(e){return o.Sequence.from(this.extract().sort(e))},t}(o.Sequence);n.default=i},{"../../core":25}],48:[function(e,t,n){"use strict";function r(e){return i.Sequence.Iterator.when(e.iterate(),function(){return i.Sequence.mempty},function(e){return i.Sequence.mappend(i.Sequence.from([[i.Sequence.Thunk.value(e)]]),new i.Sequence(function(t,n){return i.Sequence.Iterator.when(e,function(){return n()},function(e){return n(r(i.Sequence.resume(i.Sequence.Thunk.iterator(e))).foldr(function(t,n){return i.Sequence.mappend(i.Sequence.mappend(i.Sequence.from([t]),i.Sequence.from([u.concat([i.Sequence.Thunk.value(e)],t)])),n)},i.Sequence.mempty))})}).bind(function(e){return e}))})}var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../core"),u=e("../../../../concat"),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.subsequences=function(){var e=this;return i.Sequence.mappend(i.Sequence.from([[]]),i.Sequence.from([0]).bind(function(){return r(e)}))},t}(i.Sequence);n.default=c},{"../../../../concat":7,"../../core":25}],49:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../core"),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.tails=function(){return o.Sequence.mappend(o.Sequence.from(this.extract().map(function(e,t,n){return n.slice(t)})),o.Sequence.from([[]]))},t}(o.Sequence);n.default=i},{"../../core":25}],50:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../core"),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.take=function(e){var t=this;return new o.Sequence(function(n,r){return void 0===n&&(n=function(){return t.iterate()}),o.Sequence.Iterator.when(e>0?n():o.Sequence.Iterator.done(),function(){return r()},function(t){return o.Sequence.Thunk.index(t)+1<e?r(o.Sequence.Thunk.value(t),o.Sequence.Thunk.iterator(t)):r(o.Sequence.Thunk.value(t))})})},t}(o.Sequence);n.default=i},{"../../core":25}],51:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../core"),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.takeUntil=function(e){var t=this;return new o.Sequence(function(n,r){return void 0===n&&(n=function(){return t.iterate()}),o.Sequence.Iterator.when(n(),function(){return r()},function(t){return e(o.Sequence.Thunk.value(t))?r(o.Sequence.Thunk.value(t)):r(o.Sequence.Thunk.value(t),o.Sequence.Thunk.iterator(t))})})},t}(o.Sequence);n.default=i},{"../../core":25}],52:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../core"),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.takeWhile=function(e){var t=this;return new o.Sequence(function(n,r){return void 0===n&&(n=function(){return t.iterate()}),o.Sequence.Iterator.when(n(),function(){return r()},function(t){return e(o.Sequence.Thunk.value(t))?r(o.Sequence.Thunk.value(t),o.Sequence.Thunk.iterator(t)):r()})})},t}(o.Sequence);n.default=i},{"../../core":25}],53:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.unique=function(){var e=new Set;return this.filter(function(t){return!e.has(t)&&!!e.add(t)})},t}(e("../../core").Sequence);n.default=o},{"../../core":25}],54:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),u=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)u.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return u};Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../core"),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.concat=function(e){return new i.Sequence(function(t,n){var r=o(void 0===t?[function(){return e.iterate()},i.Sequence.Iterator.done]:t,2),u=r[0],c=r[1];return i.Sequence.Iterator.when(u(),function(){return n()},function(e,t){return c=c===i.Sequence.Iterator.done?function(){return i.Sequence.Thunk.value(e).iterate()}:c,i.Sequence.Iterator.when(c(),function(){return c=i.Sequence.Iterator.done,t()},function(t){return n(i.Sequence.Thunk.value(t),[function(){return e},i.Sequence.Thunk.iterator(t)])})})})},t}(i.Sequence);n.default=u},{"../../core":25}],55:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),u=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)u.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return u};Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../core"),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.cycle=function(e){return new i.Sequence(function t(n,r){var i=o(void 0===n?[e[Symbol.iterator](),0]:n,2),u=i[0],c=i[1],a=u.next();return a.done?t([e[Symbol.iterator](),c+1],r):r(a.value,[u,c+1])}).reduce()},t}(i.Sequence);n.default=u},{"../../core":25}],56:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),u=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)u.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return u};Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../core"),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.difference=function(e,t,n){return new i.Sequence(function(r,u){var c=o(void 0===r?[function(){return e.iterate()},function(){return t.iterate()}]:r,2),a=c[0],s=c[1];return i.Sequence.Iterator.when(a(),function(){return i.Sequence.Iterator.when(s(),function(){return u()},function(e){return u(i.Sequence.Thunk.value(e),[i.Sequence.Iterator.done,i.Sequence.Thunk.iterator(e)])})},function(e,t){return i.Sequence.Iterator.when(s(),function(){return u(i.Sequence.Thunk.value(e),[i.Sequence.Thunk.iterator(e),i.Sequence.Iterator.done])},function(r){var o=n(i.Sequence.Thunk.value(e),i.Sequence.Thunk.value(r));return o<0?u(i.Sequence.Thunk.value(e),[i.Sequence.Thunk.iterator(e),function(){return r}]):o>0?u(i.Sequence.Thunk.value(r),[function(){return e},i.Sequence.Thunk.iterator(r)]):(s=function(){return i.Sequence.Thunk.iterator(r)()},t())})})})},t}(i.Sequence);n.default=u},{"../../core":25}],57:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),u=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)u.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return u};Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../core"),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.from=function(e){return new i.Sequence(function(t,n){var r=o(void 0===t?[e[Symbol.iterator](),0]:t,2),i=r[0],u=r[1],c=i.next();return c.done?n():n(c.value,[i,u+1])}).reduce()},t}(i.Sequence);n.default=u},{"../../core":25}],58:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),u=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)u.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return u};Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../core"),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.intersect=function(e,t,n){return new i.Sequence(function(r,u){var c=o(void 0===r?[function(){return e.iterate()},function(){return t.iterate()}]:r,2),a=c[0],s=c[1];return i.Sequence.Iterator.when(a(),function(){return u()},function(e,t){return i.Sequence.Iterator.when(s(),function(){return u()},function(r,o){var c=n(i.Sequence.Thunk.value(e),i.Sequence.Thunk.value(r));return c<0?(s=function(){return r},t()):c>0?o():u(i.Sequence.Thunk.value(e),[i.Sequence.Thunk.iterator(e),i.Sequence.Thunk.iterator(r)])})})})},t}(i.Sequence);n.default=u},{"../../core":25}],59:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../core"),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.mappend=function(e,t){return o.Sequence.mconcat([e,t])},t}(o.Sequence);n.default=i},{"../../core":25}],60:[function(e,t,n){"use strict";function r(e,t){return new c.Sequence(function(n,r){var o=i(void 0===n?[function(){return e.iterate()},function(){return t.iterate()}]:n,2),u=o[0],a=o[1];return c.Sequence.Iterator.when(u(),function(){return c.Sequence.Iterator.when(a(),function(){return r()},function(e){return r(c.Sequence.Thunk.value(e),[c.Sequence.Iterator.done,c.Sequence.Thunk.iterator(e)])})},function(e){return r(c.Sequence.Thunk.value(e),[c.Sequence.Thunk.iterator(e),a])})})}var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),u=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)u.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return u},u=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(i(arguments[t]));return e};Object.defineProperty(n,"__esModule",{value:!0});var c=e("../../core"),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.mconcat=function(e){return u(e).reduce(function(e,t){return r(e,t)},c.Sequence.mempty)},t}(c.Sequence);n.default=a},{"../../core":25}],61:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../core"),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.mempty=new o.Sequence(function(e,t){return t()}),t}(o.Sequence);n.default=i},{"../../core":25}],62:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../core"),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.mplus=o.Sequence.mappend,t}(o.Sequence);n.default=i},{"../../core":25}],63:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../core"),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.mzero=o.Sequence.mempty,t}(o.Sequence);n.default=i},{"../../core":25}],64:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../core"),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.pure=function(e){return new o.Sequence(function(t,n){return n(e)})},t}(o.Sequence);n.default=i},{"../../core":25}],65:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../core"),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.random=function(e){return void 0===e&&(e=function(){return Math.random()}),"function"==typeof e?o.Sequence.from(new o.Sequence(function(t,n){return n(e(),t)})):this.random().map(function(t){return e[t*e.length|0]})},t}(o.Sequence);n.default=i},{"../../core":25}],66:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../core"),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.resume=function(e){return new o.Sequence(function(t,n){return void 0===t&&(t=e),o.Sequence.Iterator.when(t(),function(){return n()},function(e){return n(o.Sequence.Thunk.value(e),o.Sequence.Thunk.iterator(e))})})},t}(o.Sequence);n.default=i},{"../../core":25}],67:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../core"),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.Return=function(e){return new o.Sequence(function(t,n){return n(e)})},t}(o.Sequence);n.default=i},{"../../core":25}],68:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../core"),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.sequence=function(e){return e.reduce(function(e,t){return e.fmap(function(e){return o.Sequence.mappend(e,t)})},o.Sequence.Return(o.Sequence.from([])))},t}(o.Sequence);n.default=i},{"../../core":25}],69:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),u=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)u.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return u};Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../core"),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.union=function(e,t,n){return new i.Sequence(function(r,u){var c=o(void 0===r?[function(){return e.iterate()},function(){return t.iterate()}]:r,2),a=c[0],s=c[1];return i.Sequence.Iterator.when(a(),function(){return i.Sequence.Iterator.when(s(),function(){return u()},function(e){return u(i.Sequence.Thunk.value(e),[i.Sequence.Iterator.done,i.Sequence.Thunk.iterator(e)])})},function(e){return i.Sequence.Iterator.when(s(),function(){return u(i.Sequence.Thunk.value(e),[i.Sequence.Thunk.iterator(e),i.Sequence.Iterator.done])},function(t){var r=n(i.Sequence.Thunk.value(e),i.Sequence.Thunk.value(t));return r<0?u(i.Sequence.Thunk.value(e),[i.Sequence.Thunk.iterator(e),function(){return t}]):r>0?u(i.Sequence.Thunk.value(t),[function(){return e},i.Sequence.Thunk.iterator(t)]):u(i.Sequence.Thunk.value(e),[i.Sequence.Thunk.iterator(e),i.Sequence.Thunk.iterator(t)])})})})},t}(i.Sequence);n.default=u},{"../../core":25}],70:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),u=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)u.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return u};Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../core"),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.zip=function(e,t){return new i.Sequence(function(n,r){var u=o(void 0===n?[function(){return e.iterate()},function(){return t.iterate()}]:n,2),c=u[0],a=u[1];return i.Sequence.Iterator.when(c(),function(){return r()},function(e){return i.Sequence.Iterator.when(a(),function(){return r()},function(t){return r([i.Sequence.Thunk.value(e),i.Sequence.Thunk.value(t)],[i.Sequence.Thunk.iterator(e),i.Sequence.Thunk.iterator(t)])})})})},t}(i.Sequence);n.default=u},{"../../core":25}],71:[function(e,t,n){"use strict";function r(e,t,n,r){return e.some(function(e){var o=e.type,i=e.namespace,u=e.listener;return o===t&&i.length===n.length&&i.every(function(e,t){return i[t]===n[t]})&&u===r})}function o(e,t){switch(typeof e){case"function":return;default:throw new TypeError("Spica: Observation: Invalid listener.\n\t"+t+" "+e)}}var i=this&&this.__values||function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}};Object.defineProperty(n,"__esModule",{value:!0});var u,c=e("./concat"),a=e("./equal"),s=e("./exception");!function(e){e.monitor="monitor",e.subscriber="subscriber"}(u=n.RegisterItemType||(n.RegisterItemType={}));var f=function(){function e(){this.relaySources=new WeakSet,this.node_={parent:void 0,children:new Map,childrenNames:[],items:[]}}return e.prototype.monitor=function(e,t,n){var i=this,c=(void 0===n?{}:n).once,a=void 0!==c&&c;o(t,e);var s=this.seekNode_(e).items;return r(s,u.monitor,e,t)?function(){}:(s.push({type:u.monitor,namespace:e,listener:t,options:{once:a}}),function(){return i.off(e,t,u.monitor)})},e.prototype.on=function(e,t,n){var i=this,c=(void 0===n?{}:n).once,a=void 0!==c&&c;o(t,e);var s=this.seekNode_(e).items;return r(s,u.subscriber,e,t)?function(){}:(s.push({type:u.subscriber,namespace:e,listener:t,options:{once:a}}),function(){return i.off(e,t)})},e.prototype.once=function(e,t){return o(t,e),this.on(e,t,{once:!0})},e.prototype.off=function(e,t,n){var r=this;switch(void 0===n&&(n=u.subscriber),typeof t){case"function":return void this.seekNode_(e).items.some(function(e,r,o){var i=e.type;if(e.listener!==t)return!1;if(i!==n)return!1;switch(r){case 0:return!void o.shift();case o.length-1:return!void o.pop();default:return!void o.splice(r,1)}});case"undefined":var i=this.seekNode_(e);return i.childrenNames.slice().forEach(function(t){r.off(e.concat([t]));var n=i.children.get(t);n&&(n.items.length+n.childrenNames.length>0||(i.children.delete(t),i.childrenNames.splice(a.findIndex(t,i.childrenNames),1)))}),void(i.items=i.items.filter(function(e){return e.type===u.monitor}));default:throw o(t,e)}},e.prototype.emit=function(e,t,n){this.drain_(e,t,n)},e.prototype.reflect=function(e,t){var n=[];return this.emit(e,t,function(e,t){return n=t}),n},e.prototype.relay=function(e){var t=this;if(this.relaySources.has(e))return function(){};this.relaySources.add(e);var n=e.monitor([],function(e,n){return void t.emit(n,e)});return function(){return t.relaySources.delete(e),n()}},e.prototype.drain_=function(e,t,n){var r=this,o=[];if(this.refsBelow_(this.seekNode_(e)).reduce(function(i,c){var a=c.type,f=c.listener,l=c.options.once;if(a===u.subscriber){l&&r.off(e,f);try{var p=f(t,e);n&&(o[o.length]=p)}catch(e){s.causeAsyncException(e)}}},void 0),this.refsAbove_(this.seekNode_(e)).reduce(function(n,o){var i=o.type,c=o.listener,a=o.options.once;if(i===u.monitor){a&&r.off(e,c,u.monitor);try{c(t,e)}catch(e){s.causeAsyncException(e)}}},void 0),n)try{n(t,o)}catch(e){s.causeAsyncException(e)}},e.prototype.refs=function(e){return this.refsBelow_(this.seekNode_(e))},e.prototype.refsAbove_=function(e){var t=e.parent,n=e.items;for(n=c.concat([],n);t;)n=c.concat(n,t.items),t=t.parent;return n},e.prototype.refsBelow_=function(e){var t=e.childrenNames,n=e.children,r=e.items;r=c.concat([],r);for(var o=0;o<t.length;++o){var i=t[o],u=this.refsBelow_(n.get(i));r=c.concat(r,u),0===u.length&&(n.delete(i),t.splice(a.findIndex(i,t),1),--o)}return r},e.prototype.seekNode_=function(e){var t=this.node_;try{for(var n=i(e),r=n.next();!r.done;r=n.next()){var o=r.value,u=t.children;u.has(o)||(t.childrenNames.push(o),u.set(o,{parent:t,children:new Map,childrenNames:[],items:[]})),t=u.get(o)}}catch(e){c={error:e}}finally{try{r&&!r.done&&(a=n.return)&&a.call(n)}finally{if(c)throw c.error}}return t;var c,a},e}();n.Observation=f},{"./concat":7,"./equal":10,"./exception":11}],72:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),function(e){for(var t in e)n.hasOwnProperty(t)||(n[t]=e[t])}(e("./monad/sequence"))},{"./monad/sequence":24}],73:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r="0".repeat(15),o=0;n.sqid=function(e){if(arguments.length>0){if("number"!=typeof e)throw new TypeError("Spica: sqid: A parameter value must be a number: "+e);if(e>=0==0)throw new TypeError("Spica: sqid: A parameter value must be a positive number: "+e);if(e%1!=0)throw new TypeError("Spica: sqid: A parameter value must be an integer: "+e)}return void 0===e?(r+ ++o).slice(-15):(r+e).slice(-15)}},{}],74:[function(e,t,n){"use strict";var r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),u=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)u.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return u},o=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(r(arguments[t]));return e};Object.defineProperty(n,"__esModule",{value:!0});var i=e("./observation"),u=e("./assign"),c=e("./tick"),a=e("./sqid"),s=e("./exception"),f=function(){function e(t){void 0===t&&(t={});var n=this;if(this.id=a.sqid(),this.settings={name:"",size:1/0,timeout:1/0,destructor:function(e){},scheduler:c.tick,resource:10},this.events_={init:new i.Observation,loss:new i.Observation,exit:new i.Observation},this.events=this.events_,this.workers=new Map,this.alive=!0,this.available=!0,this.messages=[],this.deliver=function(){for(var e,t,o=Date.now(),i=0,u=n.messages.length;n.available&&i<u;++i){var c=function(i,u){if(n.settings.resource-(Date.now()-o)>0==0)return{value:void n.schedule()};var c=r(n.messages[i],4),a=c[0],f=c[1],l=c[2],p=c[3],d=n.workers.has(a)&&Date.now()<=p?n.workers.get(a).call([f,p]):void 0;if(!d&&Date.now()<p)return e=i,t=u,"continue";if(0===i?n.messages.shift():n.messages.splice(i,1),--i,--u,d||n.events_.loss.emit([a],[a,f]),!d||d instanceof Error){try{l(void 0,new Error("Spica: Supervisor: A processing has failed."))}catch(e){s.causeAsyncException(e)}return e=i,t=u,"continue"}d.then(function(e){return n.available?void l(e):void l(void 0,new Error("Spica: Supervisor: A processing has failed."))},function(){return void l(void 0,new Error("Spica: Supervisor: A processing has failed."))}),e=i,t=u}(i,u);if(i=e,u=t,"object"==typeof c)return c.value}},Object.freeze(u.extend(this.settings,t)),this.name=this.settings.name,this.constructor===e)throw new Error("Spica: Supervisor: <"+this.id+"/"+this.name+">: Cannot instantiate abstract classes.");this.constructor.instances.add(this),this.scheduler=function(){return void(0,n.settings.scheduler)(n.deliver)}}return Object.defineProperty(e,"instances",{get:function(){return this.hasOwnProperty("instances_")?this.instances_:this.instances_=new Set},enumerable:!0,configurable:!0}),Object.defineProperty(e,"count",{get:function(){return this.instances.size},enumerable:!0,configurable:!0}),Object.defineProperty(e,"procs",{get:function(){return o(this.instances).reduce(function(e,t){return e+t.workers.size},0)},enumerable:!0,configurable:!0}),e.prototype.destructor=function(e){for(this.available=!1,this.workers.forEach(function(t){return void t.terminate(e)}),Object.freeze(this.workers);this.messages.length>0;){var t=r(this.messages.shift(),2),n=t[0],o=t[1];this.events_.loss.emit([n],[n,o])}Object.freeze(this.messages),this.alive=!1,this.constructor.instances.delete(this),Object.freeze(this),this.settings.destructor(e)},e.prototype.validate=function(){if(!this.available)throw new Error("Spica: Supervisor: <"+this.id+"/"+this.name+">: A supervisor is already terminated.")},e.prototype.register=function(e,t,n){var r=this;if(this.validate(),this.workers.has(e))throw new Error("Spica: Supervisor: <"+this.id+"/"+this.name+"/"+e+">: Cannot register a process multiply with the same name.");return this.schedule(),t="function"==typeof t?{init:function(e){return e},call:t,exit:function(e){}}:t,this.workers.set(e,new l(this,e,t,n,this.events_,function(){return void r.workers.delete(e)})).get(e).terminate},e.prototype.call=function(e,t,n,o){var i=this;for(void 0===o&&(o=this.settings.timeout),this.validate(),this.messages.push([e,t,n,Date.now()+o]);this.messages.length>this.settings.size;){var u=r(this.messages.shift(),3),c=u[0],a=u[1],f=u[2];this.events_.loss.emit([c],[c,a]);try{f(void 0,new Error("Spica: Supervisor: A message overflowed."))}catch(e){s.causeAsyncException(e)}}this.schedule(),o<=0||o!==1/0&&setTimeout(function(){return void i.schedule()},o+3)},e.prototype.cast=function(e,t,n){void 0===n&&(n=this.settings.timeout),this.validate();var r=this.workers.has(e)?this.workers.get(e).call([t,n]):void 0;return void 0===r&&this.events_.loss.emit([e],[e,t]),!(void 0===r||r instanceof Error)&&(r.catch(function(){}),!0)},e.prototype.refs=function(e){function t(e){return[e.name,e.process,e.state,e.terminate]}return this.validate(),void 0===e?o(this.workers.values()).map(t):this.workers.has(e)?[t(this.workers.get(e))]:[]},e.prototype.kill=function(e,t){return!!this.available&&(!!this.workers.has(e)&&this.workers.get(e).terminate(t))},e.prototype.terminate=function(e){return!!this.available&&(this.destructor(e),!0)},e.prototype.schedule=function(){0!==this.messages.length&&c.tick(this.scheduler,!0)},e}();n.Supervisor=f;var l=function(){function e(e,t,n,o,i,u){var c=this;this.sv=e,this.name=t,this.process=n,this.state=o,this.events=i,this.destructor_=u,this.alive=!0,this.available=!0,this.activated=!1,this.call=function(e){var t=r(e,2),n=t[0],o=t[1];if(c.available)try{return c.available=!1,c.activated||(c.activated=!0,c.events.init.emit([c.name],[c.name,c.process,c.state]),c.state=c.process.init(c.state)),new Promise(function(e,t){return isFinite(o)&&setTimeout(function(){return void t(new Error)},o-Date.now()),void Promise.resolve(c.process.call(n,c.state)).then(e,t)}).then(function(e){var t=r(e,2);return[t[0],t[1]]}).then(function(e){var t=r(e,2),n=t[0],o=t[1];return c.sv.schedule(),c.alive?(c.state=o,c.available=!0,n):Promise.reject(new Error)},function(e){throw c.sv.schedule(),c.terminate(e),e})}catch(e){return c.terminate(e),new Error}},this.terminate=function(e){return!!c.alive&&(c.destructor(e),!0)}}return e.prototype.destructor=function(e){if(this.alive=!1,this.available=!1,Object.freeze(this),this.destructor_(),this.activated)try{this.process.exit(e,this.state),this.events.exit.emit([this.name],[this.name,this.process,this.state,e])}catch(t){this.events.exit.emit([this.name],[this.name,this.process,this.state,e]),this.sv.terminate(t)}},e}()},{"./assign":3,"./exception":11,"./observation":71,"./sqid":73,"./tick":76}],75:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.throttle=function(e,t){function n(){var e=o;return o=[],e}var r=0,o=[];return function(i){o.push(i),r>0||(r=setTimeout(function(){r=0,t(o[o.length-1],n())},e))}}},{}],76:[function(e,t,n){"use strict";function r(){1===c.length&&s.then(o)}function o(){for(var e=i();;){try{for(;e.length>0;)e.shift()()}catch(e){u.causeAsyncException(e);continue}return}}function i(){var e=c;return c=[],a=new WeakSet,e}Object.defineProperty(n,"__esModule",{value:!0});var u=e("./exception"),c=[],a=new WeakSet;n.tick=function(e,t){if(void 0===t&&(t=!1),t){if(a.has(e))return;a.add(e)}c.push(e),r()};var s=Promise.resolve()},{"./exception":11}],77:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.type=function(e){var t=Object.prototype.toString.call(e).split(" ").pop().slice(0,-1);return"object"!=typeof e&&e instanceof Object==0||null===e?t.toLowerCase():t}},{}],78:[function(e,t,n){"use strict";var r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),u=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)u.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return u},o=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(r(arguments[t]));return e};Object.defineProperty(n,"__esModule",{value:!0}),n.uncurry=function(e){return function(t){return e.apply(void 0,o(t.slice(0,e.length)))}}},{}],79:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),function(e){for(var t in e)n.hasOwnProperty(t)||(n[t]=e[t])}(e("./src/export"));var r=e("./src/export");n.default=r.default},{"./src/export":82}],80:[function(e,t,n){"use strict";function r(e){var t=e.element;if(null!==t.parentElement&&a.has(t.parentElement))throw new Error("TypedDOM: Cannot add an element used in another typed dom.")}var o=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},i=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),u=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)u.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return u},u=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(i(arguments[t]));return e};Object.defineProperty(n,"__esModule",{value:!0});var c;!function(e){e.Void="void",e.Text="text",e.Collection="collection",e.Struct="struct"}(c||(c={}));var a=new WeakSet,s=function(){function e(e,t){function n(){for(;e.childNodes.length>0;)e.removeChild(e.firstChild)}function s(e,t){function n(e,t){e.innerHTML=e.innerHTML.replace(/^\s*\$scope(?!\w)/gm,"#"+t),u(e.querySelectorAll("*")).forEach(function(e){return void e.remove()})}if(e.match(/^[\w\-]+$/))return void Object.values(t).map(function(e){return e.element}).forEach(function(t){return t instanceof HTMLStyleElement&&void n(t,e)})}switch(this.element_=e,this.children_=t,this.type=void 0===this.children_?c.Void:"string"==typeof this.children_?c.Text:Array.isArray(this.children_)?c.Collection:c.Struct,this.tag,r(this),a.add(e),this.type){case c.Void:return;case c.Text:return n(),this.children_=document.createTextNode(""),this.element_.appendChild(this.children_),void(this.children=t);case c.Collection:return n(),this.children_=[],this.children=t,void s(this.element_.id,this.children_);case c.Struct:return n(),this.children_=function(e,t){return Object.defineProperties(t,Object.entries(t).reduce(function(t,n){var o=i(n,2),u=o[0],c=o[1];return r(c),e.appendChild(c.element),t[u]={configurable:!0,enumerable:!0,get:function(){return c},set:function(t){var n=c;t!==n&&(t.element_.parentElement===e||r(t),c=t,e.replaceChild(t.element,n.element))}},t},{}))}(this.element_,o({},t)),void s(this.element_.id,this.children_)}}return Object.defineProperty(e.prototype,"element",{get:function(){return this.element_},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"children",{get:function(){switch(this.type){case c.Text:return this.children_.data;default:return this.children_}},set:function(e){var t=this;switch(this.type){case c.Void:return;case c.Text:return void(this.children_.data=e);case c.Collection:return this.children_.reduce(function(e,t){var n=e.indexOf(t);return n>-1?e:(e.splice(n,1),t.element.remove(),e)},u(e)),this.children_=[],e.forEach(function(e,n){e.element_.parentElement===t.element_||r(e),t.children_[n]=e,t.element_.appendChild(e.element)}),void Object.freeze(this.children_);case c.Struct:return void Object.keys(this.children_).forEach(function(n){return t.children_[n]=e[n]})}},enumerable:!0,configurable:!0}),e}();n.El=s},{}],81:[function(e,t,n){"use strict";function r(e,t,n){var r=t();if(e!==r.tagName.toLowerCase())throw new Error('TypedDOM: Tag name must be "'+e+'" but "'+r.tagName.toLowerCase()+'".');return n?(Object.keys(n).forEach(function(e){return void r.setAttribute(e,n[e])}),r):r}var o=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),u=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)u.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return u},i=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(o(arguments[t]));return e};Object.defineProperty(n,"__esModule",{value:!0});var u=e("./builder");n.tags={a:0,applet:0,area:0,audio:0,base:0,basefont:0,blockquote:0,body:0,br:0,button:0,canvas:0,caption:0,col:0,colgroup:0,data:0,datalist:0,del:0,dir:0,div:0,dl:0,embed:0,fieldset:0,font:0,form:0,frame:0,frameset:0,h1:0,h2:0,h3:0,h4:0,h5:0,h6:0,head:0,hr:0,html:0,iframe:0,img:0,input:0,ins:0,isindex:0,label:0,legend:0,li:0,link:0,listing:0,map:0,marquee:0,menu:0,meta:0,meter:0,nextid:0,object:0,ol:0,optgroup:0,option:0,output:0,p:0,param:0,picture:0,pre:0,progress:0,q:0,script:0,select:0,source:0,span:0,style:0,table:0,tbody:0,td:0,template:0,textarea:0,tfoot:0,th:0,thead:0,time:0,title:0,tr:0,track:0,ul:0,video:0,"x-ms-webview":0,xmp:0,abbr:0,acronym:0,address:0,article:0,aside:0,b:0,bdo:0,big:0,center:0,circle:0,cite:0,clippath:0,code:0,dd:0,defs:0,desc:0,dfn:0,dt:0,ellipse:0,em:0,feblend:0,fecolormatrix:0,fecomponenttransfer:0,fecomposite:0,feconvolvematrix:0,fediffuselighting:0,fedisplacementmap:0,fedistantlight:0,feflood:0,fefunca:0,fefuncb:0,fefuncg:0,fefuncr:0,fegaussianblur:0,feimage:0,femerge:0,femergenode:0,femorphology:0,feoffset:0,fepointlight:0,fespecularlighting:0,fespotlight:0,fetile:0,feturbulence:0,figcaption:0,figure:0,filter:0,footer:0,foreignobject:0,g:0,header:0,hgroup:0,i:0,image:0,kbd:0,keygen:0,line:0,lineargradient:0,mark:0,marker:0,mask:0,metadata:0,nav:0,nobr:0,noframes:0,noscript:0,path:0,pattern:0,plaintext:0,polygon:0,polyline:0,radialgradient:0,rect:0,rt:0,ruby:0,s:0,samp:0,section:0,small:0,stop:0,strike:0,strong:0,sub:0,sup:0,svg:0,switch:0,symbol:0,text:0,textpath:0,tspan:0,tt:0,u:0,use:0,var:0,view:0,wbr:0},n.TypedHTML=i(Object.keys(n.tags),["create","any"]).reduce(function(e,t){return e[t]="create"===t?function(e,t,r,o){return void 0===t&&(t=function(){return document.createElement(e)}),void 0===r&&(r=function(){return document.createElement(e)}),void 0===o&&(o=function(){return document.createElement(e)}),n.TypedHTML.any(t,r,o,e)}:function(e,n,o,i){switch(void 0===i&&(i=t),i="any"===t?i:t,typeof e){case"undefined":return new u.El(r(i,function(){return document.createElement(i)}),void 0);case"function":return new u.El(r(i,e),void 0);case"string":return new u.El(r(i,n||function(){return document.createElement(i)}),e);case"object":return o="function"==typeof n?n:o||function(){return document.createElement(i)},Object.keys(e).slice(-1).every(function(t){return void 0===t||"object"==typeof e[t]})?new u.El(r(i,o),e):new u.El(r(i,o,e),n===o?void 0:n);default:throw new TypeError("TypedDOM: Invalid arguments: ["+e+", "+n+", "+o+"]")}},e},{})},{"./builder":80}],82:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("./dom/html");n.default=r.TypedHTML,n.TypedHTML=r.TypedHTML,function(e){for(var t in e)n.hasOwnProperty(t)||(n[t]=e[t])}(e("./util/dom"))},{"./dom/html":81,"./util/dom":83}],83:[function(e,t,n){"use strict";function r(e,t,n,r,c){return void 0===r&&(r=!1),void 0===c&&(c={}),"string"==typeof n?i(e,t,n,r,u({},"boolean"==typeof c?{capture:c}:c,{once:!0})):o(e,t,n,u({},"boolean"==typeof r?{capture:r}:r,{once:!0}))}function o(e,t,r,o){function i(e){"object"==typeof o&&(o.passive&&(e.preventDefault=s.noop),o.once&&c()),n.currentTargets.set(e,e.currentTarget),r(e)}function u(e){return f?e:"boolean"==typeof e?e:!!e.capture}void 0===o&&(o=!1),e.addEventListener(t,i,u(o));var c=function(){return c=s.noop,void e.removeEventListener(t,i,u(o))};return function(){return void c()}}function i(e,t,n,i,c){return void 0===c&&(c={}),o(e instanceof Document?e.documentElement:e,n,function(o){var u=o.target.closest(t);u&&a(e.querySelectorAll(t)).filter(function(e){return e===u}).forEach(function(e){return void r(e,n,function(e){i(e)},c)})},u({},c,{capture:!0}))}var u=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},c=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),u=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)u.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return u},a=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(c(arguments[t]));return e};Object.defineProperty(n,"__esModule",{value:!0});var s=e("./noop");n.currentTargets=new WeakMap,n.listen=function(e,t,n,r,u){return void 0===r&&(r=!1),void 0===u&&(u={}),"string"==typeof n?i(e,t,n,r,u):o(e,t,n,r)},n.once=r,n.bind=o,n.delegate=i;var f=!1;try{document.createElement("div").addEventListener("test",function(){},{get capture(){return f=!0}})}catch(e){}},{"./noop":84}],84:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.noop=function(){}},{}],85:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("./layer/interface/service/gui");n.default=r.GUI;var o=e("./layer/interface/service/gui");n.Pjax=o.GUI;var i=e("./lib/router");n.router=i.router},{"./layer/interface/service/gui":118,"./lib/router":129}],86:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("../domain/router/api"),o=e("../domain/event/router");n.RouterEvent=o.RouterEvent,n.RouterEventType=o.RouterEventType,n.RouterEventSource=o.RouterEventSource;var i=e("../domain/data/config");n.Config=i.Config,n.scope=i.scope,n.route=function(e,t,n,o){return r.route(new r.RouterEntity(e,t,new r.RouterEntityState(n.process,n.scripts)),o)}},{"../domain/data/config":90,"../domain/event/router":93,"../domain/router/api":94}],87:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("../domain/store/path");n.loadTitle=r.loadTitle,n.savePosition=r.savePosition},{"../domain/store/path":111}],88:[function(e,t,n){"use strict";function r(e){return e.trim().replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]?|[\uDC00-\uDFFF]/g,function(e){return 2===e.length?e:""}).replace(/%(?![0-9A-F]{2})|[^%\[\]]+/gi,encodeURI).replace(/\?[^#]+/,function(e){return"?"+e.slice(1).replace(/%[0-9A-F]{2}|[^=&]/gi,function(e){return e.length<3?encodeURIComponent(e):e})}).replace(/%[0-9A-F]{2}/gi,function(e){return e.toUpperCase()}).replace(/#.+/,e.slice(e.indexOf("#")))}function o(e){return u.href=e||location.href,u.href.replace(/^([^:/?#]+:\/\/[^/?#]*?):(?:80)?(?=$|[/?#])/,"$1").replace(/^([^:/?#]+:\/\/[^/?#]*)\/?/,"$1/").replace(/%[0-9A-F]{2}/gi,function(e){return e.toUpperCase()}).replace(/#.+/,e.slice(e.indexOf("#")))}Object.defineProperty(n,"__esModule",{value:!0});var i;i||(i={}),n.standardizeUrl=function(e){return r(o(e))},n._encode=r;var u=document.createElement("a")},{}],89:[function(e,t,n){"use strict";function r(){window.history.replaceState(i.extend(window.history.state||{},{title:document.title}),document.title)}function o(){window.history.replaceState(i.extend(window.history.state||{},{position:{top:window.pageYOffset,left:window.pageXOffset}}),document.title)}Object.defineProperty(n,"__esModule",{value:!0});var i=e("spica/assign");r(),o(),n.loadTitle=function(){return window.history.state.title||document.title},n.saveTitle=r,n.loadPosition=function(){return window.history.state.position||{top:window.pageYOffset,left:window.pageXOffset}},n.savePosition=o},{"spica/assign":3}],90:[function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function u(e){try{a(r.next(e))}catch(e){i(e)}}function c(e){try{a(r.throw(e))}catch(e){i(e)}}function a(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(u,c)}a((r=r.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(u=i[2&n[0]?"return":n[0]?"throw":"next"])&&!(u=u.call(i,n[1])).done)return u;switch(i=0,u&&(n=[0,u.value]),n[0]){case 0:case 1:u=n;break;case 4:return a.label++,{value:n[1],done:!1};case 5:a.label++,i=n[1],n=[0];continue;case 7:n=a.ops.pop(),a.trys.pop();continue;default:if(u=a.trys,!(u=u.length>0&&u[u.length-1])&&(6===n[0]||2===n[0])){a=0;continue}if(3===n[0]&&(!u||n[1]>u[0]&&n[1]<u[3])){a.label=n[1];break}if(6===n[0]&&a.label<u[1]){a.label=u[1],u=n;break}if(u&&a.label<u[2]){a.label=u[2],a.ops.push(n);break}u[2]&&a.ops.pop(),a.trys.pop();continue}n=t.call(e,a)}catch(e){n=[6,e],i=0}finally{o=u=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var o,i,u,c,a={label:0,sent:function(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]};return c={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c};Object.defineProperty(n,"__esModule",{value:!0});var i=e("spica/assign"),u=e("./config/scope");n.scope=u.scope;var c=function(){function e(e){this.areas=["body"],this.link="a",this.form="form:not([method])",this.replace="",this.fetch={timeout:3e3,wait:0},this.update={head:"base, meta, link",css:!0,script:!0,ignore:"",ignores:{extension:'[href^="chrome-extension://"]',security:'[src*=".scr.kaspersky-labs.com/"]'},reload:"",logger:""},this.sequence=new a,this.progressbar="display:none;position:absolute;bottom:0;left:0;width:0;height:2px;background:rgb(40, 105, 255);",this.scope={},Object.defineProperties(this.update,{ignore:{enumerable:!1,set:function(e){this.ignores._=e},get:function(){var e=this;return Object.keys(this.ignores).map(function(t){return e.ignores[t]}).filter(function(e){return e.trim().length>0}).join(",")}}}),i.extend(this,e),Object.freeze(this)}return e.prototype.filter=function(e){return e.matches(":not([target])")},e.prototype.rewrite=function(e,t){},e.prototype.fallback=function(e,t){if(e instanceof HTMLAnchorElement)window.location.assign(e.href);else if(e instanceof HTMLFormElement)window.location.assign(e.action);else{if(!(e instanceof Window))throw t;window.location.reload(!0)}},e}();n.Config=c;var a=function(){function e(){}return e.prototype.fetch=function(){return r(this,void 0,void 0,function(){return o(this,function(e){return[2,void 0]})})},e.prototype.unload=function(){return r(this,void 0,void 0,function(){return o(this,function(e){return[2,void 0]})})},e.prototype.ready=function(){return r(this,void 0,void 0,function(){return o(this,function(e){return[2,void 0]})})},e.prototype.load=function(){},e}();n.SequenceData||(n.SequenceData={})},{"./config/scope":91,"spica/assign":3}],91:[function(e,t,n){"use strict";var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e};Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../../../lib/router"),i=e("../../../domain/data/config"),u=e("spica/sequence"),c=e("spica/maybe"),a=e("spica/assign");n.scope=function(e,t){var n=r({"/":{}},e.scope);return u.Sequence.from(Object.keys(n).sort().reverse()).dropWhile(function(e){return!o.compare(e,t.orig)&&!o.compare(e,t.dest)}).take(1).filter(function(e){return!!o.compare(e,t.orig)&&o.compare(e,t.dest)}).map(function(e){return n[e]}).map(function(t){return t?c.Just(new i.Config(a.extend({},e,t))):c.Nothing}).extract().reduce(function(e,t){return t},c.Nothing)}},{"../../../../lib/router":129,"../../../domain/data/config":90,"spica/assign":3,"spica/maybe":14,"spica/sequence":72}],92:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=function(e){function t(t){return e.call(this,"Domain: "+t)||this}return r(t,e),t}(e("../../../lib/error").PjaxError);n.DomainError=o},{"../../../lib/error":127}],93:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("../../../lib/url"),o=e("../../data/model/domain/url"),i=e("../../../lib/dom"),u=e("typed-dom"),c=function(){return function(e){this.original=e,this.type=this.original.type.toLowerCase(),this.source=u.currentTargets.get(this.original),this.request=new f(this.source),this.location=new l(this.request.url),Object.freeze(this)}}();n.RouterEvent=c;var a;!function(e){e.Anchor=HTMLAnchorElement,e.Form=HTMLFormElement,e.Window=window.Window}(a=n.RouterEventSource||(n.RouterEventSource={}));!function(e){e.click="click",e.submit="submit",e.popstate="popstate"}(n.RouterEventType||(n.RouterEventType={}));var s;!function(e){e.GET="GET",e.POST="POST"}(s=n.RouterEventMethod||(n.RouterEventMethod={}));var f=function(){return function(e){var t=this;this.source=e,this.method=function(){if(t.source instanceof a.Anchor)return s.GET;if(t.source instanceof a.Form)return t.source.method.toUpperCase()===s.POST?s.POST:s.GET;if(t.source instanceof a.Window)return s.GET;throw new TypeError}(),this.url=function(){if(t.source instanceof a.Anchor)return o.standardizeUrl(t.source.href);if(t.source instanceof a.Form)return t.source.method.toUpperCase()===s.GET?o.standardizeUrl(t.source.action.split(/[?#]/)[0]+"?"+i.serialize(t.source)):o.standardizeUrl(t.source.action.split(/[?#]/)[0]);if(t.source instanceof a.Window)return o.standardizeUrl(window.location.href);throw new TypeError}(),this.data=t.source instanceof a.Form&&t.method===s.POST?new FormData(t.source):null,Object.freeze(this)}}();n.RouterEventRequest=f;var l=function(){return function(e){this.target=e,this.orig=new r.URL(o.standardizeUrl(window.location.href)),this.dest=new r.URL(this.target),Object.freeze(this)}}();n.RouterEventLocation=l},{"../../../lib/dom":126,"../../../lib/url":130,"../../data/model/domain/url":88,"typed-dom":79}],94:[function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function u(e){try{a(r.next(e))}catch(e){i(e)}}function c(e){try{a(r.throw(e))}catch(e){i(e)}}function a(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(u,c)}a((r=r.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(u=i[2&n[0]?"return":n[0]?"throw":"next"])&&!(u=u.call(i,n[1])).done)return u;switch(i=0,u&&(n=[0,u.value]),n[0]){case 0:case 1:u=n;break;case 4:return a.label++,{value:n[1],done:!1};case 5:a.label++,i=n[1],n=[0];continue;case 7:n=a.ops.pop(),a.trys.pop();continue;default:if(u=a.trys,!(u=u.length>0&&u[u.length-1])&&(6===n[0]||2===n[0])){a=0;continue}if(3===n[0]&&(!u||n[1]>u[0]&&n[1]<u[3])){a.label=n[1];break}if(6===n[0]&&a.label<u[1]){a.label=u[1],u=n;break}if(u&&a.label<u[2]){a.label=u[2],a.ops.push(n);break}u[2]&&a.ops.pop(),a.trys.pop();continue}n=t.call(e,a)}catch(e){n=[6,e],i=0}finally{o=u=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var o,i,u,c,a={label:0,sent:function(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]};return c={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c},i=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),u=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)u.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return u};Object.defineProperty(n,"__esModule",{value:!0});var u=e("spica/either"),c=e("./module/fetch"),a=e("./module/update"),s=e("./module/update/content"),f=e("../store/path"),l=e("../data/error"),p=e("./model/eav/entity");n.RouterEntity=p.RouterEntity,n.RouterEntityState=p.RouterEntityState,n.route=function(e,t){return r(this,void 0,void 0,function(){function n(e,t){return s.separate({src:e,dst:e},t).extract(function(){return!1},function(){return!0})}var p=this;return o(this,function(s){return[2,u.Right(void 0).bind(e.state.process.either).bind(function(){return n(t.document,e.config.areas)?u.Right(void 0):u.Left(new l.DomainError("Failed to match areas."))}).fmap(function(){return c.fetch(e.event.request,e.config,e.state.process)}).fmap(function(n){return r(p,void 0,void 0,function(){return o(this,function(r){switch(r.label){case 0:return[4,n];case 1:return[2,r.sent().fmap(function(n){var r=i(n,2),o=r[0],u=r[1];return a.update(e,o,u,{document:t.document,position:f.loadPosition})}).extract(u.Left)]}})})}).extract(u.Left)]})})}},{"../data/error":92,"../store/path":111,"./model/eav/entity":95,"./module/fetch":98,"./module/update":100,"./module/update/content":102,"spica/either":9}],95:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){return function(e,t,n){this.config=e,this.event=t,this.state=n,Object.freeze(this)}}();n.RouterEntity=r;var o=function(){return function(e,t){this.process=e,this.scripts=t,Object.freeze(this)}}();n.RouterEntityState=o},{}],96:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("../../../../../../lib/html"),o=e("../../../../../data/model/domain/url"),i=function(){return function(e){this.xhr=e,this.response=new function(e){var t=this;this.xhr=e,this.url=this.xhr.responseURL?o.standardizeUrl(this.xhr.responseURL):"",this.header=function(e){return t.xhr.getResponseHeader(e)},this.document="document"===this.xhr.responseType?this.xhr.responseXML:r.parse(this.xhr.responseText).extract(),Object.freeze(this)}(this.xhr),Object.freeze(this)}}();n.FetchResult=i},{"../../../../../../lib/html":128,"../../../../../data/model/domain/url":88}],97:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){return function(e){this.documents=e,Object.freeze(this.documents),Object.freeze(this)}}();n.UpdateSource=r},{}],98:[function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function u(e){try{a(r.next(e))}catch(e){i(e)}}function c(e){try{a(r.throw(e))}catch(e){i(e)}}function a(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(u,c)}a((r=r.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(u=i[2&n[0]?"return":n[0]?"throw":"next"])&&!(u=u.call(i,n[1])).done)return u;switch(i=0,u&&(n=[0,u.value]),n[0]){case 0:case 1:u=n;break;case 4:return a.label++,{value:n[1],done:!1};case 5:a.label++,i=n[1],n=[0];continue;case 7:n=a.ops.pop(),a.trys.pop();continue;default:if(u=a.trys,!(u=u.length>0&&u[u.length-1])&&(6===n[0]||2===n[0])){a=0;continue}if(3===n[0]&&(!u||n[1]>u[0]&&n[1]<u[3])){a.label=n[1];break}if(6===n[0]&&a.label<u[1]){a.label=u[1],u=n;break}if(u&&a.label<u[2]){a.label=u[2],a.ops.push(n);break}u[2]&&a.ops.pop(),a.trys.pop();continue}n=t.call(e,a)}catch(e){n=[6,e],i=0}finally{o=u=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var o,i,u,c,a={label:0,sent:function(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]};return c={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c},i=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),u=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)u.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return u};Object.defineProperty(n,"__esModule",{value:!0});var u=e("spica/either"),c=e("../module/fetch/xhr"),a=e("../../data/error"),s=e("../../../../lib/url");n.fetch=function(e,t,n){var f=e.method,l=e.url,p=e.data,d=t.fetch,h=d.timeout,v=d.wait,y=t.sequence;return r(this,void 0,void 0,function(){var e,t,r,d;return o(this,function(o){switch(o.label){case 0:return e=c.xhr(f,l,p,h,n),window.dispatchEvent(new Event("pjax:fetch")),[4,Promise.all([e,y.fetch(void 0,{path:new s.URL(l).path,method:f,data:p}),new Promise(function(e){return void setTimeout(e,v)})])];case 1:return t=i.apply(void 0,[o.sent(),2]),r=t[0],d=t[1],[2,r.bind(n.either).bind(function(e){return""===e.response.url||new s.URL(e.response.url).origin===new s.URL(l).origin?u.Right([e,d]):u.Left(new a.DomainError("Request is redirected to the different domain url "+new s.URL(e.response.url).href))})]}})})}},{"../../../../lib/url":130,"../../data/error":92,"../module/fetch/xhr":99,"spica/either":9}],99:[function(e,t,n){"use strict";function r(e){return u.Right(e).bind(function(e){return/2..|304/.test(""+e.status)?u.Right(e):u.Left(new a.DomainError("Faild to validate the status of response."))}).bind(function(e){return o(e.getResponseHeader("Content-Type"),"text/html")?u.Right(e):u.Left(new a.DomainError("Faild to validate the content type of response."))})}function o(e,t){function n(e){return e.split(";").map(function(e){return e.trim()}).filter(function(e){return e.length>0})}return i.Sequence.intersect(i.Sequence.from(n(e||"").sort()),i.Sequence.from(n(t).sort()),function(e,t){return e.localeCompare(t)}).take(1).extract().length>0}Object.defineProperty(n,"__esModule",{value:!0});var i=e("spica/sequence"),u=e("spica/either"),c=e("../../model/eav/value/fetch"),a=e("../../../data/error");n.xhr=function(e,t,n,o,i){var s=new XMLHttpRequest;return new Promise(function(f){return s.open(e,t,!0),s.responseType=/chrome|firefox/i.test(window.navigator.userAgent)&&!/edge/i.test(window.navigator.userAgent)?"document":"text",s.timeout=o,s.setRequestHeader("X-Pjax","1"),s.send(n),s.addEventListener("abort",function(){return void f(u.Left(new a.DomainError("Failed to request by abort.")))}),s.addEventListener("error",function(){return void f(u.Left(new a.DomainError("Failed to request by error.")))}),s.addEventListener("timeout",function(){return void f(u.Left(new a.DomainError("Failed to request by timeout.")))}),s.addEventListener("load",function(){return void r(s).extract(function(e){return void f(u.Left(e))},function(e){return void f(u.Right(new c.FetchResult(e)))})}),void i.register(function(){return void s.abort()})})},n.match=o},{"../../../data/error":92,"../../model/eav/value/fetch":96,"spica/either":9,"spica/sequence":72}],100:[function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function u(e){try{a(r.next(e))}catch(e){i(e)}}function c(e){try{a(r.throw(e))}catch(e){i(e)}}function a(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(u,c)}a((r=r.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(u=i[2&n[0]?"return":n[0]?"throw":"next"])&&!(u=u.call(i,n[1])).done)return u;switch(i=0,u&&(n=[0,u.value]),n[0]){case 0:case 1:u=n;break;case 4:return a.label++,{value:n[1],done:!1};case 5:a.label++,i=n[1],n=[0];continue;case 7:n=a.ops.pop(),a.trys.pop();continue;default:if(u=a.trys,!(u=u.length>0&&u[u.length-1])&&(6===n[0]||2===n[0])){a=0;continue}if(3===n[0]&&(!u||n[1]>u[0]&&n[1]<u[3])){a.label=n[1];break}if(6===n[0]&&a.label<u[1]){a.label=u[1],u=n;break}if(u&&a.label<u[2]){a.label=u[2],a.ops.push(n);break}u[2]&&a.ops.pop(),a.trys.pop();continue}n=t.call(e,a)}catch(e){n=[6,e],i=0}finally{o=u=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var o,i,u,c,a={label:0,sent:function(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]};return c={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c},i=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),u=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)u.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return u};Object.defineProperty(n,"__esModule",{value:!0});var u=e("spica/either"),c=e("spica/hlist"),a=e("../../event/router"),s=e("../model/eav/value/update"),f=e("../module/update/blur"),l=e("../module/update/url"),p=e("../module/update/title"),d=e("../module/update/head"),h=e("../module/update/content"),v=e("../module/update/css"),y=e("../module/update/script"),m=e("../module/update/focus"),_=e("../module/update/scroll"),b=e("../../store/path"),w=e("../../data/error");n.update=function(e,t,n,S){var q=e.event,O=e.config,g=e.state,j=t.response;return r(this,void 0,void 0,function(){var e,t,P=this;return o(this,function(x){return e=g.process,t=new s.UpdateSource({src:j.document,dst:S.document}).documents,[2,(new c.HNil).push(e.either(n)).modify(function(n){return n.fmap(function(n){return h.separate(t,O.areas).fmap(function(e){var n=i(e,1)[0];return void O.rewrite(t.src,n)}).extract(function(){return r(P,void 0,void 0,function(){return o(this,function(e){return[2,u.Left(new w.DomainError("Failed to separate areas."))]})})},function(){return r(P,void 0,void 0,function(){var t,r;return o(this,function(o){switch(o.label){case 0:return window.dispatchEvent(new Event("pjax:unload")),r=(t=e).either,[4,O.sequence.unload(n,j)];case 1:return[2,r.apply(t,[o.sent()])]}})})})})}).modify(function(n){return n.fmap(function(n){return r(P,void 0,void 0,function(){var s=this;return o(this,function(P){switch(P.label){case 0:return[4,n];case 1:return[2,P.sent().fmap(function(n){return(new c.HNil).extend(function(){return r(s,void 0,void 0,function(){return o(this,function(n){return[2,(f.blur(t.dst),l.url(new a.RouterEventLocation(j.url||q.location.dest.href),t.src.title,q.type,q.source,O.replace),p.title(t),b.saveTitle(),d.head({src:t.src.head,dst:t.dst.head},O.update.head,O.update.ignore),h.content(t,O.areas).fmap(function(e){var t=i(e,2),n=t[0],r=t[1];return[n,Promise.all(r)]}).fmap(e.either).extract(function(){return u.Left(new w.DomainError("Failed to update areas."))}))]})})}).extend(function(a){return r(s,void 0,void 0,function(){var s=this;return o(this,function(f){switch(f.label){case 0:return[4,a];case 1:return[2,f.sent().fmap(function(u){var a=i(u,1)[0];return Promise.all((new c.HNil).extend(function(){return r(s,void 0,void 0,function(){var n;return o(this,function(r){switch(r.label){case 0:return O.update.css&&v.css({src:t.src.head,dst:t.dst.head},O.update.ignore),O.update.css&&v.css({src:t.src.body,dst:t.dst.body},O.update.ignore),m.focus(t.dst),_.scroll(q.type,t.dst,{hash:q.location.dest.fragment,position:S.position}),b.savePosition(),O.update.script?[4,y.script(t,g.scripts,O.update,Math.max(10*O.fetch.timeout,1e4),e)]:[3,2];case 1:return n=r.sent(),[3,4];case 2:return[4,e.either([[],Promise.resolve([])])];case 3:n=r.sent(),r.label=4;case 4:return[2,n]}})})}).extend(function(){return r(s,void 0,void 0,function(){var t,r;return o(this,function(o){switch(o.label){case 0:return S.document.dispatchEvent(new Event("pjax:ready")),r=(t=e).either,[4,O.sequence.ready(n,a)];case 1:return[2,r.apply(t,[o.sent()])]}})})}).reverse().tuple()).then(function(e){var t=i(e,2),n=t[0],r=t[1];return n.bind(function(e){return r.fmap(function(t){return[e,t]})})})}).extract(u.Left)]}})})}).reverse().tuple()})]}})})})}).modify(function(t){return t.fmap(function(t){return r(P,void 0,void 0,function(){var n=this;return o(this,function(c){switch(c.label){case 0:return[4,t];case 1:return[2,c.sent().fmap(function(t){var u=i(t,2),c=u[0];return u[1].then(function(t){return c.then(function(u){return u.bind(function(u){var c=i(u,2)[1];return t.fmap(function(t){var u=i(t,2),a=i(u[0],2)[1],s=u[1];return r(n,void 0,void 0,function(){var t;return o(this,function(n){switch(n.label){case 0:return[4,a];case 1:return n.sent(),[4,c];case 2:return t=n.sent(),e.canceled?[2]:(window.dispatchEvent(new Event("pjax:load")),O.sequence.load(s,t),[2])}})})})}).extract(function(){})}),t.fmap(function(e){var t=i(e,1),n=i(t[0],2);return[n[0],n[1]]})})}).extract(u.Left)]}})})})}).head.extract(u.Left)]})})}},{"../../data/error":92,"../../event/router":93,"../../store/path":111,"../model/eav/value/update":97,"../module/update/blur":101,"../module/update/content":102,"../module/update/css":103,"../module/update/focus":104,"../module/update/head":105,"../module/update/script":106,"../module/update/scroll":107,"../module/update/title":109,"../module/update/url":110,"spica/either":9,"spica/hlist":13}],101:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.blur=function(e){e===window.document&&e.activeElement!==e.body&&(e.activeElement.blur(),e.body.focus())}},{}],102:[function(e,t,n){"use strict";function r(e,t){function n(e,t){function n(e){return c.Just(e).guard(function(e){return e.src.length>0&&e.src.length===e.dst.length}(e))}return o(t).map(function(t){return{src:f.find(e.src,t),dst:f.find(e.dst,t)}}).reduce(function(e,t){return e.bind(function(e){return n(t).fmap(function(t){return a.concat(e,[t])})})},c.Just([]))}return t.reduce(function(t,r){return c.Maybe.mplus(t,n(e,r).fmap(function(e){return[r,e]}))},c.Nothing)}function o(e){return(e.match(/(?:[^,\(\[]+|\(.*?\)|\[.*?\])+/g)||[]).map(function(e){return e.trim()})}function i(e){return Promise.race([new Promise(function(t){return void s.once(e,"load",t)}),new Promise(function(t){return void s.once(e,"abort",t)}),new Promise(function(t){return void s.once(e,"error",t)})])}var u=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),u=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)u.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return u};Object.defineProperty(n,"__esModule",{value:!0});var c=e("spica/maybe"),a=e("spica/concat"),s=e("typed-dom"),f=e("../../../../../lib/dom"),l=e("./script");n.content=function(e,t,n){function o(t){function r(e){var t=f.find(e.src,"script").map(l.escape).reduce(function(e,t){return function(){return e(),void t()}},function(){});n.replace(e.src,e.dst),t()}return t.src.map(function(n,r){return{src:e.dst.importNode(t.src[r].cloneNode(!0),!0),dst:t.dst[r]}}).map(function(e){return r(e),f.find(e.src,"img, iframe, frame").map(i)}).reduce(a.concat,[])}return void 0===n&&(n={replace:function(e,t){return void t.parentNode.replaceChild(e,t)}}),r(e,t).fmap(function(e){var t=u(e,2)[1];return[t.map(function(e){return e.dst}).reduce(a.concat,[]),t.map(o).reduce(a.concat,[])]})},n.separate=r,n._split=o,n._wait=i},{"../../../../../lib/dom":126,"./script":106,"spica/concat":7,"spica/maybe":14,"typed-dom":79}],103:[function(e,t,n){"use strict";function r(e,t){switch(e.tagName.toLowerCase()){case"link":return e.href===t.href;case"style":return e.innerHTML.trim()===t.innerHTML.trim();default:return!1}}Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../../../../lib/dom"),i=e("./sync");n.css=function(e,t){var n='link[rel~="stylesheet"], style';return void i.sync(i.pair(o.find(e.src,n).filter(function(e){return!e.matches(t.trim()||"_")}),o.find(e.dst,n).filter(function(e){return!e.matches(t.trim()||"_")}),r),e.dst)}},{"../../../../../lib/dom":126,"./sync":108}],104:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("../../../../../lib/dom");n.focus=function(e){return void r.find(e,"body, [autofocus]").slice(-1).filter(function(t){return e===window.document&&t!==e.activeElement}).forEach(function(e){return void e.focus()})}},{"../../../../../lib/dom":126}],105:[function(e,t,n){"use strict";function r(e,t){return e.outerHTML===t.outerHTML}Object.defineProperty(n,"__esModule",{value:!0});var o=e("./sync"),i=e("../../../../../lib/dom");n.head=function(e,t,n){return n+=t.indexOf("link")>-1?', link[rel~="stylesheet"]':"",void o.sync(o.pair(i.find(e.src,t).filter(function(e){return!e.matches(n.trim()||"_")}),i.find(e.dst,t).filter(function(e){return!e.matches(n.trim()||"_")}),r),e.dst)}},{"../../../../../lib/dom":126,"./sync":108}],106:[function(e,t,n){"use strict";function r(e,t){return u(this,void 0,void 0,function(){var n;return c(this,function(r){return e.hasAttribute("src")?"module"===e.type.toLowerCase()?[2,s.Right([e,""])]:((n=new XMLHttpRequest).open("GET",e.src,!0),n.timeout=t,n.send(),[2,new Promise(function(t){return["load","abort","error","timeout"].forEach(function(r){switch(r){case"load":return void n.addEventListener(r,function(){return void t(s.Right([e,n.response]))});default:return void n.addEventListener(r,function(){return void t(s.Left(new Error(e.src+": "+n.statusText)))})}})})]):[2,s.Right([e,e.text])]})})}function o(t,n,r,o,u,c){function a(){if(c.canceled)return c.either(t);try{if(new p.URL(d.standardizeUrl(window.location.href)).path!==y.path)throw new l.FatalError("Expired.");if(o.has(new p.URL(d.standardizeUrl(window.location.href)).href))throw new l.FatalError("Expired.");return(0,eval)(n),t.hasAttribute("src")&&t.dispatchEvent(new Event("load")),s.Right(t)}catch(e){return t.hasAttribute("src")&&t.dispatchEvent(new Event("error")),s.Left(new l.FatalError(e instanceof Error?e.message:e+""))}}var f=!!(t=t.ownerDocument===document?t:document.importNode(t.cloneNode(!0),!0)).parentElement&&t.parentElement.matches(r.trim()||"_"),h=document.querySelector(f?t.parentElement.id?"#"+t.parentElement.id:t.parentElement.tagName:"_")||document.body,v=i(t);h.appendChild(t),v(),!f&&t.remove();var y=new p.URL(d.standardizeUrl(window.location.href));return"module"===t.type.toLowerCase()?s.Right(u.then(function(){return Promise.resolve().then(function(){return e(t.src)})}).then(function(){return t.dispatchEvent(new Event("load")),s.Right(t)},function(e){return t.dispatchEvent(new Event("error")),s.Left(new l.FatalError(e instanceof Error?e.message:e+""))})):t.hasAttribute("defer")?s.Right(u.then(a)):t.hasAttribute("async")?s.Right(Promise.resolve().then(a)):s.Left(a())}function i(e){var t=e.hasAttribute("src")?e.getAttribute("src"):null,n=e.text;return e.removeAttribute("src"),e.text="",function(){return e.text=" ",e.text=n,"string"==typeof t?void e.setAttribute("src",t):void 0}}var u=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function u(e){try{a(r.next(e))}catch(e){i(e)}}function c(e){try{a(r.throw(e))}catch(e){i(e)}}function a(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(u,c)}a((r=r.apply(e,t||[])).next())})},c=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(u=i[2&n[0]?"return":n[0]?"throw":"next"])&&!(u=u.call(i,n[1])).done)return u;switch(i=0,u&&(n=[0,u.value]),n[0]){case 0:case 1:u=n;break;case 4:return a.label++,{value:n[1],done:!1};case 5:a.label++,i=n[1],n=[0];continue;case 7:n=a.ops.pop(),a.trys.pop();continue;default:if(u=a.trys,!(u=u.length>0&&u[u.length-1])&&(6===n[0]||2===n[0])){a=0;continue}if(3===n[0]&&(!u||n[1]>u[0]&&n[1]<u[3])){a.label=n[1];break}if(6===n[0]&&a.label<u[1]){a.label=u[1],u=n;break}if(u&&a.label<u[2]){a.label=u[2],a.ops.push(n);break}u[2]&&a.ops.pop(),a.trys.pop();continue}n=t.call(e,a)}catch(e){n=[6,e],i=0}finally{o=u=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var o,i,u,c,a={label:0,sent:function(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]};return c={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c},a=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),u=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)u.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return u};Object.defineProperty(n,"__esModule",{value:!0});var s=e("spica/either"),f=e("../../../../../lib/dom"),l=e("../../../../../lib/error"),p=e("../../../../../lib/url"),d=e("../../../../data/model/domain/url");n.script=function(e,t,n,i,l,h){return void 0===h&&(h={fetch:r,evaluate:o}),u(this,void 0,void 0,function(){function r(e){return e.map(function(e){return h.fetch(e,i)})}function o(e){return e.reduce(function(e,t){return t.bind(function(){return e})},e.reduce(function(e,r){return e.bind(l.either).bind(function(e){var o=a(e,2),i=o[0],u=o[1];return r.fmap(function(e){var r=a(e,2),o=r[0],i=r[1];return h.evaluate(o,i,n.logger,t,Promise.all(u),l)}).bind(function(e){return e.extract(function(e){return e.fmap(function(e){return[i.concat([e]),u]})},function(e){return s.Right([i,u.concat([e])])})})})},s.Right([[],[]]))).fmap(function(e){var t=a(e,2),n=t[0],r=t[1];return[n,Promise.all(r).then(function(e){return e.reduce(function(e,t){return e.bind(function(e){return t.fmap(function(t){return e.concat([t])})})},s.Right([])).extract()})]})}var u,v;return c(this,function(i){switch(i.label){case 0:return u=f.find(e.src,"script").filter(function(e){return!e.type||/(?:application|text)\/(?:java|ecma)script|module/i.test(e.type)}).filter(function(e){return!e.matches(n.ignore.trim()||"_")}).filter(function(e){return!e.hasAttribute("src")||!t.has(new p.URL(d.standardizeUrl(e.src)).href)||e.matches(n.reload.trim()||"_")}),v=o,[4,Promise.all(r(u))];case 1:return[2,v.apply(void 0,[i.sent()])]}})})},n._fetch=r,n._evaluate=o,n.escape=i},{"../../../../../lib/dom":126,"../../../../../lib/error":127,"../../../../../lib/url":130,"../../../../data/model/domain/url":88,"spica/either":9}],107:[function(e,t,n){"use strict";function r(e,t,n){void 0===n&&(n={scrollToElement:function(e){return void e.scrollIntoView()}});var r=t.slice(1);if(0===r.length)return!1;var o=e.getElementById(r)||e.getElementsByName(r)[0];return!!o&&(n.scrollToElement(o),!0)}Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../../event/router");n.scroll=function(e,t,n,i){switch(void 0===i&&(i={scrollToElement:function(e){return void e.scrollIntoView()},scrollToPosition:function(e){var t=e.top,n=e.left;return void window.scrollTo(n,t)},hash:r}),e){case o.RouterEventType.click:if(i.hash(t,n.hash,i))return;return void i.scrollToPosition({top:0,left:0});case o.RouterEventType.submit:return void i.scrollToPosition({top:0,left:0});case o.RouterEventType.popstate:return void i.scrollToPosition(n.position());default:throw new TypeError(e)}},n._hash=r},{"../../../event/router":93}],108:[function(e,t,n){"use strict";function r(e,t,n){return void t.map(function(t){return e.ownerDocument.importNode(t.cloneNode(!0),!0)}).forEach(function(t){return void e.insertBefore(t,n)})}function o(e){return void e.remove()}var i=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),u=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)u.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return u},u=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(i(arguments[t]));return e};Object.defineProperty(n,"__esModule",{value:!0});var c=e("spica/either"),a=e("spica/concat");n.sync=function(e,t,n){function u(e){return e?e.parentElement:t}return void 0===n&&(n={before:r,remove:o}),void e.forEach(function(e){var t=i(e,2),r=t[0],o=t[1];return n.before(u(o),r.slice(-1).some(function(e){return!!o&&e.outerHTML===o.outerHTML})?r.slice(0,-1):r,o),o&&0===r.length?void n.remove(o):void 0})},n.pair=function(e,t,n){var r=function(e,t,n){return e.reduce(function(e,r){return 0===t.length?e.set(null,a.concat(e.get(null)||[],[r])):t.reduce(function(e,t){return e.bind(function(e){return!e.has(t)&&n(r,t)?(e.set(t,a.concat(e.get(null)||[],[r])),e.delete(null),c.Left(e)):c.Right(e)})},c.Right(e)).fmap(function(e){return e.set(null,a.concat(e.get(null)||[],[r]))}).extract(function(e){return e})},new Map)}(e,t,n);return t.filter(function(e){return!r.has(e)}).forEach(function(e){return void r.set(e,[])}),u(r).map(function(e){var t=i(e,2),n=t[0];return[t[1],n]})}},{"spica/concat":7,"spica/either":9}],109:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.title=function(e){e.dst.title=e.src.title}},{}],110:[function(e,t,n){"use strict";function r(e,t){if(t.dest.href===t.orig.href)return!1;switch(e){case i.RouterEventType.click:case i.RouterEventType.submit:return!0;case i.RouterEventType.popstate:return!1;default:throw new TypeError(e)}}function o(e,t,n){switch(e){case i.RouterEventType.click:case i.RouterEventType.submit:return t.matches(n.trim()||"_");case i.RouterEventType.popstate:return!1;default:throw new TypeError(e)}}Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../../event/router");e("typed-dom").bind(document,"pjax:ready",function(){return void window.history.replaceState(window.history.state,window.document.title)}),n.url=function(e,t,n,i,u){switch(!0){case o(n,i,u):return void window.history.replaceState({},t,e.dest.href);case r(n,e):return void window.history.pushState({},t,e.dest.href);default:return}},n._isRegisterable=r,n._isReplaceable=o},{"../../../event/router":93,"typed-dom":79}],111:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),function(e){for(var t in e)n.hasOwnProperty(t)||(n[t]=e[t])}(e("../../data/store/state"))},{"../../data/store/state":89}],112:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=function(e){function t(t){return e.call(this,"Interface: "+t)||this}return r(t,e),t}(e("../../../lib/error").PjaxError);n.InterfaceError=o},{"../../../lib/error":127}],113:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("spica/supervisor"),i=e("typed-dom"),u=function(){return function(e,t,n,u){var c=this;this.sv=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t}(o.Supervisor)),this.sv.register("",function(){return c.sv.events.exit.monitor([],i.delegate(e,t,"click",function(e){e.currentTarget instanceof HTMLAnchorElement&&"string"==typeof e.currentTarget.href&&n(e)})),new Promise(function(){})},void 0),this.sv.cast("",void 0),u.register(function(){return c.sv.terminate()})}}();n.ClickView=u},{"spica/supervisor":74,"typed-dom":79}],114:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("spica/supervisor"),i=e("typed-dom"),u=e("../../../data/model/domain/url"),c=e("../../service/state/url"),a=function(){return function(e,t,n){var a=this;this.sv=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t}(o.Supervisor)),this.sv.register("",function(){return a.sv.events.exit.monitor([],i.bind(e,"popstate",function(n){u.standardizeUrl(e.location.href)!==c.docurl.href&&t(n)})),new Promise(function(){})},void 0),this.sv.cast("",void 0),n.register(function(){return a.sv.terminate()})}}();n.NavigationView=a},{"../../../data/model/domain/url":88,"../../service/state/url":125,"spica/supervisor":74,"typed-dom":79}],115:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("spica/supervisor"),i=e("typed-dom"),u=e("spica/throttle"),c=function(){return function(e,t,n){var c=this;this.active=!0,this.sv=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t}(o.Supervisor))({destructor:function(){return c.active=!1}}),this.sv.register("",function(){return c.sv.events.exit.monitor([],i.bind(e,"scroll",u.throttle(300,function(e){return c.active&&void t(e)}),{passive:!0})),new Promise(function(){})},void 0),this.sv.cast("",void 0),n.register(function(){return c.sv.terminate()})}}();n.ScrollView=c},{"spica/supervisor":74,"spica/throttle":75,"typed-dom":79}],116:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("spica/supervisor"),i=e("typed-dom"),u=function(){return function(e,t,n,u){var c=this;this.sv=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t}(o.Supervisor)),this.sv.register("",function(){return c.sv.events.exit.monitor([],i.delegate(e,t,"submit",function(e){e.currentTarget instanceof HTMLFormElement&&n(e)})),new Promise(function(){})},void 0),this.sv.cast("",void 0),u.register(function(){return c.sv.terminate()})}}();n.SubmitView=u},{"spica/supervisor":74,"typed-dom":79}],117:[function(e,t,n){"use strict";function r(e,t){var n=document.createElement("a");n.href=e,u.parse("").extract().body.appendChild(n),a.once(n,"click",t),n.click()}Object.defineProperty(n,"__esModule",{value:!0});var o=e("./router"),i=e("./state/process"),u=e("../../../lib/html"),c=e("spica/assign"),a=e("typed-dom"),s=function(){function e(){}return e.assign=function(e,t,n){return void 0===n&&(n={document:window.document,router:o.route}),void r(e,function(e){return void n.router(new o.Config(t),new o.RouterEvent(e),i.process,n)})},e.replace=function(e,t,n){return void 0===n&&(n={document:window.document,router:o.route}),void r(e,function(e){return void n.router(new o.Config(c.extend({},t,{replace:"*"})),new o.RouterEvent(e),i.process,n)})},e}();n.API=s},{"../../../lib/html":128,"./router":120,"./state/process":122,"spica/assign":3,"typed-dom":79}],118:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("./api"),i=e("spica/supervisor"),u=e("spica/cancellation"),c=e("../../../lib/url"),a=e("../../data/model/domain/url"),s=e("../module/view/click"),f=e("../module/view/submit"),l=e("../module/view/navigation"),p=e("../module/view/scroll"),d=e("./router"),h=e("./state/url");e("./state/scroll-restoration");var v=e("./state/process"),y=e("../../application/store"),m=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t}(i.Supervisor)),_=function(e){function t(t,n){void 0===n&&(n={document:window.document,router:d.route});var r=e.call(this)||this;r.option=t,r.io=n;var o=new d.Config(r.option);return m.kill(""),m.register("",{init:function(e){return e},call:function(e,t){return new s.ClickView(r.io.document,o.link,function(e){return void n.router(o,new d.RouterEvent(e),v.process,n)},t),new f.SubmitView(r.io.document,o.form,function(e){return void n.router(o,new d.RouterEvent(e),v.process,n)},t),new l.NavigationView(window,function(e){n.document.title=y.loadTitle(),n.router(o,new d.RouterEvent(e),v.process,n)},t),new p.ScrollView(window,function(){new c.URL(a.standardizeUrl(window.location.href)).href===h.docurl.href&&y.savePosition()},t),new Promise(function(){})},exit:function(e,t){return void t.cancel()}},new u.Cancellation),m.cast("",void 0),r}return r(t,e),t.prototype.assign=function(e){return void o.API.assign(e,this.option,this.io)},t.prototype.replace=function(e){return void o.API.replace(e,this.option,this.io)},t}(o.API);n.GUI=_},{"../../../lib/url":130,"../../application/store":87,"../../data/model/domain/url":88,"../module/view/click":113,"../module/view/navigation":114,"../module/view/scroll":115,"../module/view/submit":116,"./api":117,"./router":120,"./state/process":122,"./state/scroll-restoration":124,"./state/url":125,"spica/cancellation":5,"spica/supervisor":74}],119:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=document.createElement("div");window.addEventListener("pjax:fetch",function(){return void document.documentElement.appendChild(r)}),window.addEventListener("pjax:fetch",function(){return r.style.width="5%"}),window.addEventListener("pjax:unload",function(){return r.style.width="80%"}),document.addEventListener("pjax:ready",function(){return r.style.width="90%"}),window.addEventListener("pjax:load",function(){return r.style.width="100%"}),window.addEventListener("pjax:load",function(){return void r.remove()}),n.progressbar=function(e){r.setAttribute("style",e)}},{}],120:[function(e,t,n){"use strict";function r(e,t,n){function r(e){return new h.URL(f.docurl.href).origin===e.origin}function o(e){var t=new h.URL(f.docurl.href);return t.origin===e.origin&&t.path===e.path&&t.fragment!==e.fragment}switch(n.type){case s.RouterEventType.click:return r(e)&&!function(e){var t=new h.URL(f.docurl.href);return t.origin===e.origin&&t.path===e.path&&""!==e.fragment}(e)&&!o(e)&&!function(e){return e.hasAttribute("download")}(n.source)&&!function(e){return e.which>1||e.metaKey||e.ctrlKey||e.shiftKey||e.altKey}(n.original)&&t.filter(n.source);case s.RouterEventType.submit:return r(e);case s.RouterEventType.popstate:return r(e)&&!o(e);default:return!1}}var o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function u(e){try{a(r.next(e))}catch(e){i(e)}}function c(e){try{a(r.throw(e))}catch(e){i(e)}}function a(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(u,c)}a((r=r.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(u=i[2&n[0]?"return":n[0]?"throw":"next"])&&!(u=u.call(i,n[1])).done)return u;switch(i=0,u&&(n=[0,u.value]),n[0]){case 0:case 1:u=n;break;case 4:return a.label++,{value:n[1],done:!1};case 5:a.label++,i=n[1],n=[0];continue;case 7:n=a.ops.pop(),a.trys.pop();continue;default:if(u=a.trys,!(u=u.length>0&&u[u.length-1])&&(6===n[0]||2===n[0])){a=0;continue}if(3===n[0]&&(!u||n[1]>u[0]&&n[1]<u[3])){a.label=n[1];break}if(6===n[0]&&a.label<u[1]){a.label=u[1],u=n;break}if(u&&a.label<u[2]){a.label=u[2],a.ops.push(n);break}u[2]&&a.ops.pop(),a.trys.pop();continue}n=t.call(e,a)}catch(e){n=[6,e],i=0}finally{o=u=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var o,i,u,c,a={label:0,sent:function(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]};return c={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c},u=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),u=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)u.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return u};Object.defineProperty(n,"__esModule",{value:!0});var c=e("spica/cancellation"),a=e("typed-dom"),s=e("../../application/router");n.Config=s.Config,n.RouterEvent=s.RouterEvent,n.RouterEventSource=s.RouterEventSource;var f=e("./state/url"),l=e("../service/state/env"),p=e("./progressbar"),d=e("../data/error"),h=e("../../../lib/url"),v=e("../../data/model/domain/url"),y=e("spica/maybe");a.bind(window,"pjax:unload",function(){return window.history.scrollRestoration="auto"},!0),n.route=function(e,t,n,m){var _=this;return void y.Just(0).guard(r(new h.URL(t.request.url),e,t)).bind(function(){return s.scope(e,function(e){return{orig:e.orig.pathname,dest:e.dest.pathname}}(t.location))}).fmap(function(e){return o(_,void 0,void 0,function(){var r,y,_,b,w=this;return i(this,function(S){switch(S.label){case 0:return t.original.preventDefault(),n.cast("",new d.InterfaceError("Aborted.")),r=new c.Cancellation,y=n.register("",function(e){return y(),r.cancel(e),[void 0,void 0]},void 0),[4,l.env];case 1:return _=u.apply(void 0,[S.sent(),1]),b=_[0],window.history.scrollRestoration="manual",p.progressbar(e.progressbar),[2,s.route(e,t,{process:r,scripts:b},m).then(function(e){return e.fmap(function(e){var t=u(e,2),n=t[0],r=t[1];return o(w,void 0,void 0,function(){return i(this,function(e){switch(e.label){case 0:return y(),f.docurl.sync(),n.filter(function(e){return e.hasAttribute("src")}).forEach(function(e){return void b.add(new h.URL(v.standardizeUrl(e.src)).href)}),[4,r];case 1:return[2,void e.sent().filter(function(e){return e.hasAttribute("src")}).forEach(function(e){return void b.add(new h.URL(v.standardizeUrl(e.src)).href)})]}})})}).extract()}).catch(function(n){return y(),f.docurl.sync(),window.history.scrollRestoration="auto",!r.canceled||n instanceof Error&&"FatalError"===n.name?void e.fallback(a.currentTargets.get(t.original),n):void 0})]}})})}).extract(function(){return o(_,void 0,void 0,function(){return i(this,function(n){switch(f.docurl.sync(),t.type){case s.RouterEventType.click:case s.RouterEventType.submit:return[2];case s.RouterEventType.popstate:return[2,void e.fallback(t.source,new Error("Disabled."))]}return[2]})})})},n._validate=r},{"../../../lib/url":130,"../../application/router":86,"../../data/model/domain/url":88,"../data/error":112,"../service/state/env":121,"./progressbar":119,"./state/url":125,"spica/cancellation":5,"spica/maybe":14,"typed-dom":79}],121:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("./script");n.env=Promise.all([r.scripts,new Promise(setTimeout)])},{"./script":123}],122:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("spica/supervisor");n.process=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t}(o.Supervisor))},{"spica/supervisor":74}],123:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("../../../data/model/domain/url"),o=e("../../../../lib/url"),i=e("../../../../lib/dom"),u=e("typed-dom");n.scripts=new Set,u.bind(window,"pjax:unload",function(){return void i.find(document,"script").filter(function(e){return e.hasAttribute("src")}).forEach(function(e){return void n.scripts.add(new o.URL(r.standardizeUrl(e.src)).href)})})},{"../../../../lib/dom":126,"../../../../lib/url":130,"../../../data/model/domain/url":88,"typed-dom":79}],124:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),e("typed-dom").bind(window,"unload",function(){return window.history.scrollRestoration="auto"},!1)},{"typed-dom":79}],125:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("../../../data/model/domain/url"),o=e("typed-dom"),i=r.standardizeUrl(location.href);o.bind(window,"hashchange",function(){return void n.docurl.sync()}),n.docurl=new(function(){function e(){this.sync=function(){i=r.standardizeUrl(location.href)}}return Object.defineProperty(e.prototype,"href",{get:function(){return i},enumerable:!0,configurable:!0}),e}())},{"../../../data/model/domain/url":88,"typed-dom":79}],126:[function(e,t,n){"use strict";var r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),u=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)u.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return u},o=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(r(arguments[t]));return e};Object.defineProperty(n,"__esModule",{value:!0}),n.find=function(e,t){return o(e.querySelectorAll(t||"_"))},n.serialize=function(e){function t(e){return e.replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]?|[\uDC00-\uDFFF]/g,function(e){return 2===e.length?e:""})}return Array.from(e.elements).filter(function(e){if(e.disabled)return!1;switch(e.nodeName.toLowerCase()){case"input":switch(e.type.toLowerCase()){case"checkbox":case"radio":return e.checked;case"submit":case"button":case"image":case"reset":case"file":return!1;default:return!0}case"select":case"textarea":return!0;default:return!1}}).filter(function(e){return"string"==typeof e.name&&"string"==typeof e.value}).map(function(e){return[encodeURIComponent(t(e.name)),encodeURIComponent(t(e.value))].join("=")}).join("&")}},{}],127:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=function(e){function t(t){return e.call(this,"Pjax: "+t)||this}return r(t,e),t}(Error);n.PjaxError=o;var i=function(e){function t(t){var n=e.call(this,"Pjax: Fatal: "+t)||this;return n.name="FatalError",n}return r(t,e),t}(o);n.FatalError=i},{}],128:[function(e,t,n){"use strict";function r(e){return void o(e).forEach(function(e){var t=u(e,2),n=t[0],r=t[1];return n.textContent=r.textContent})}function o(e){return s.find(e,"noscript").filter(function(e){return e.children.length>0}).map(function(e){var t=e.cloneNode(!0);return t.textContent=e.innerHTML,[e,t]})}function i(e){try{var t=e('\n<html lang="en" class="html">\n  <head>\n    <link href="/">\n    <title>&amp;</title>\n    <noscript><style>/**/</style></noscript>\n  </head>\n  <body>\n    <noscript>noscript</noscript>\n    <a href="/"></a>\n    <script>document.head.remove();<\/script>\n    <img src="abc">\n  </body>\n</html>\n');switch(!1){case t.URL&&t.URL.startsWith(window.location.protocol+"//"+window.location.host):case"&"===t.title:case!!t.querySelector('html.html[lang="en"]'):case!!t.querySelector("head > link").href:case!!t.querySelector("body > a").href:case!t.querySelector("head > noscript > *"):case"document.head.remove();"===t.querySelector("script").innerHTML:case t.querySelector("img").src.endsWith("abc"):case"<style>/**/</style>"===t.querySelector("head > noscript").textContent:case"noscript"===t.querySelector("body > noscript").textContent:throw void 0}return!0}catch(e){return!1}}var u=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),u=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)u.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return u};Object.defineProperty(n,"__esModule",{value:!0});var c=e("spica/maybe"),a=e("spica/either"),s=e("./dom");n.parse=[function(e){var t=window.document.implementation.createHTMLDocument(""),n=s.find(function(e){var n=t.createElement("div");return n.innerHTML=e,n.firstElementChild?n.firstElementChild:n}(e.slice(0,e.search(/<\/title>/i)+8)),"title").reduce(function(e,t){return t.textContent||e},"");return"function"==typeof DOMParser&&(t.title=n),t.open(),t.write(e),t.close(),t.title!==n&&(t.title=t.querySelector("title").textContent||""),r(t),t},function(e){var t=(new DOMParser).parseFromString(e,"text/html");return r(t),t}].reduce(function(e,t){return e.bind(function(){return i(t)?a.Left(t):e})},a.Right(function(){return c.Nothing})).extract(function(e){return function(t){return c.Just(e(t))}}),n._fixNoscript=o},{"./dom":126,"spica/either":9,"spica/maybe":14}],129:[function(e,t,n){"use strict";function r(e,t){var n=/\/|[^/]+\/?/g,r=/\/$/;return f.Sequence.zip(f.Sequence.from(o(e)),f.Sequence.cycle([t])).map(function(e){var t=u(e,2),o=t[0],i=t[1];return[o.match(n)||[],o.match(r)?i.match(n)||[]:i.replace(r,"").match(n)||[]]}).filter(function(e){var t=u(e,2),n=t[0],r=t[1];return n.length<=r.length&&0===f.Sequence.zip(f.Sequence.from(n),f.Sequence.from(r)).dropWhile(l.uncurry(i)).take(1).extract().length}).take(1).extract().length>0}function o(e){if(e.match(/\*\*|[\[\]]/))throw new Error("Invalid pattern: "+e);return""===e?[e]:f.Sequence.from(e.match(/{[^{}]*}|.[^{]*/g)).map(function(e){return e.match(/^{[^{}]*}$/)?e.slice(1,-1).split(","):[e]}).mapM(f.Sequence.from).map(function(e){return e.join("")}).bind(function(t){return t===e?f.Sequence.from([t]):f.Sequence.from(o(t))}).unique().extract()}function i(e,t){function n(e,t){var r=u(c(e)),o=r[0],i=void 0===o?"":o,a=r.slice(1),s=u(c(t)),p=s[0],d=void 0===p?"":p,h=s.slice(1);switch(i){case"":return""===d;case"?":return""!==d&&"/"!==d&&n(a.join(""),h.join(""));case"*":return"/"===d?n(a.join(""),t):f.Sequence.zip(f.Sequence.cycle([a.join("")]),f.Sequence.from(t).tails().map(function(e){return e.join("")})).filter(l.uncurry(n)).take(1).extract().length>0;default:return d===i&&n(a.join(""),h.join(""))}}function r(e){var t=e.replace(/\*(\?+)\*?/g,"$1*");return t===e?t:r(t)}if("."===t[0]&&c("?*").includes(e[0]))return!1;var o=e+":"+t;return h.has(o)?h.get(o):h.set(o,n(r(e),t))}var u=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),u=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)u.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return u},c=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(u(arguments[t]));return e};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../layer/data/model/domain/url"),s=e("./url"),f=e("spica/sequence"),l=e("spica/uncurry"),p=e("spica/flip"),d=e("spica/cache");n.router=function(e){return function(t){var n=new s.URL(a.standardizeUrl(t)),o=n.path,i=n.pathname;return f.Sequence.from(Object.keys(e).filter(function(e){return"/"===u(e,1)[0]}).sort().reverse()).filter(p.flip(r)(i)).map(function(t){return e[t]}).take(1).extract().pop().call(e,o)}},n.compare=r,n._expand=o;var h=new d.Cache(100);n._match=i},{"../layer/data/model/domain/url":88,"./url":130,"spica/cache":4,"spica/flip":12,"spica/sequence":72,"spica/uncurry":78}],130:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e){this.parser=document.createElement("a"),this.URL,this.parser.href=e||location.href,Object.freeze(this)}return Object.defineProperty(e.prototype,"href",{get:function(){return this.parser.href},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"origin",{get:function(){return this.protocol+"//"+this.host},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"domain",{get:function(){return this.protocol+"//"+this.hostname},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scheme",{get:function(){return this.parser.protocol.slice(0,-1)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"protocol",{get:function(){return this.parser.protocol},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"userinfo",{get:function(){return this.parser.href.match(/[^:/?#]+:\/\/([^/?#]*)@|$/).pop()||""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"host",{get:function(){return this.parser.host},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hostname",{get:function(){return this.parser.hostname},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"port",{get:function(){return this.parser.port},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return""+this.pathname+this.query},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pathname",{get:function(){return this.parser.pathname},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"query",{get:function(){return this.parser.search},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fragment",{get:function(){return this.parser.href.replace(/^[^#]+/,"")},enumerable:!0,configurable:!0}),e}();n.URL=r},{}],"pjax-api":[function(e,t,n){arguments[4][79][0].apply(n,arguments)},{"./src/export":85,dup:79}]},{},[1,2,"pjax-api"]);