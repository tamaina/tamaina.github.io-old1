---
title: About maqz
description: 静的サイトビルダー maqzについて
layout: article
---

## 今のサイト作成に満足していますか？

### WordPressはどうですか？

markdownを使いたくありませんか？  
phpの脆弱性やサーバーの問題はどうでしょうか？  
カスタマイズ性はどうでしょう？  
一人でサイトを作成するには過剰すぎませんか？  
データベースを別に持つのに苦労します。

### Jekyllはどうですか？

node.jsを使いたくありませんか？  

### pugやejsがお好みですか？

いいでしょう。maqzでは、pugやejsを最大限に活用することができます。  
標準的なmaqzはpugで書かれていますが、これはejs等のほかのテンプレートエンジンも利用することができます。

### ページの表示速度を早めたいですよね。

つねに定型であるという特徴を生かし、[pjax-api](https://falsandtru.github.io/pjax-api/)で表示を高速化しています。  
workboxを利用して、ユーザーがオフラインであってもページを表示することができます。

### maqzという選択肢

maqzは、既存のパッケージを組み合わせたWebサイトビルドシステムです。  
何も特別なものはありません。このシステム自体はプログラミングに堪能な人ならば簡単に構築できるものです。  

つまりmaqzはいわゆる提案です。

maqzのシステムは、Wikiやブログを簡単に作成するのに最も適しています。  
それは、maqzがディレクトリ・ファイルの構造をデータとして扱い、インデックスを簡単に作成できるからです。  
ES6によって強化された配列操作を利用すれば、インデックスのコピー・ペースト作業はなくなります。

また、文書の生成以外にも、スタイル・スクリプト・画像の最適化も行うことができます。

## 概要

オレオレ静的サイトビルダーです。

markdown(パースにKramDownを利用)やpug、htmlを読み込んで、テンプレートに適用し、サイトを出力します。

ビルドにはタスク自動化ツールGruntを利用しています。

~~つまり大して自分でコードは書いてないです。~~

[GitHub](https://github.com/tamaina/tamaina.github.io)

## 説明書

- **[default.jsonの書き方](configulation)**
- **[文書の書き方](howtowrite)**
- **[ページ情報の使い方](pages)**
- **[テーマについて](theme)**


## 足りない機能

- なんやかやで自分の欲望を満たしたつもりです。
- スタイル指定がほとんどありません。
  * スタイル指定はstylusで指定します。
  * [tmin.xyz](//tmin.xyz)ではbootstrapを利用しているはずです。
  * scss面倒い……
- linterが全く整備されていません。
  * 面倒臭いし。動けばよかろうなのだ。

## 余分な機能

- pjaxが標準で適用されています。
- PWAに対応しているかもしれません。
  * manifest.jsonを勝手に出力します。。
  * Service Workerの自動更新に対応しています。
- AMPにその気になれば対応しています。
  * 作るとしたら多分、AMPのforkテーマを作ったほうが早い。
- ~~日本語ウェブフォントが標準で適用されています。~~ **v0.16.0以降はウェブフォントが無効になっています。**
- ~~browserify+uglify~~ **webpack**でjavascriptを纏めています。

## インストール

node.jsをインストールしてください。

```
npm install -g node-gyp
npm install -g grunt-cli
npm install
```

- **.config/default.json**を編集してください。

## ビルド

### ただビルドする

```
grunt filesPrebuilt default
```

### ブラウザで確認してみる

```
grunt server
```

正常にビルドできれば、`localhost:3000`に接続すると見ることができます。

このとき、debug_override.jsonの内容がdefault.jsonに上書きされます。

文書やテンプレートを更新すると、その都度ビルドし直します。


## ファイル

```
│ 
│
├─.config/default.json - サイトの大体の設定はここで行います。
├─────────────   pages - 基本的に文書はすべてここに格納します。
├─────────────   files - 添付ファイルはここに格納します。
│
├─── theme ┐           - スタイルやレイアウト、スクリプトが格納されています。
│          │
│          ├─  pug ┐   - htmlの素となるpugが保存されています。
│          │       │
│          │       ├── templates - レイアウトが格納されています。
│          │       │               default.pugを消してはいけません。
│          │       ├──     temp  - ビルドの際中間生成されるpugが格納されます。
│          │       └── includes  - 細かいファイルが格納されています。
│          │
│          ├─ styl ┐   - cssの素となるstylusが保存されています。
│          │       │
│          │
│          ├─ fonts┐   - サブセット前のフォントを格納しています。
│          │       │
│          │
│          ├─  js  ┐   - jsファイルが保存されています。
│          │       │
│          │       ├── main.js   - このファイルで一旦jsファイルを纏めています。
│          │       │               これをbrowserifyとuglifyに通してjsファイルを生成します。
│          │       │
│          │
│          └─ static ┐ - 変更が要らない静的なファイルを格納するフォルダです。
│                    │   ビルド時にdocs/にそのままコピーされます。
│                    │
│
├─── docs  ┐           - 出来上がったサイトです。これをデプロイしてください。
│          │             GitHub Pagesでは、設定でここをサイトにできます。
│          │             ※ただし、ユーザーページでは不可
│          │             ビルドするごとに消去されます。
│          │
│          ├─ assets ┐   - theme/static/からのコピーとビルドしたcss/jsを格納します。
│          │         │
│          │
│          ├─  files ┐   - files/はここにコピーされます。
│          │         │     .htaccessでキャッシュ時間を長くするのに別のディレクトリにしてたり。
│          │         
│          ├─  CNAME     - GitHub Pagesを利用すると自動的に生成されます。
│          │
│
├────────   .gitignore  ┐
├──────    .travis.yml  │
├─────    Gruntfile.js  │
├─────────     LICENSE  │  配布に際して必要なファイルです。
├─────    package.json  │
├─   package-lock.json  │
├────    pugfilters.js  ┘
├──  webpack.config.js   - webpack設定ファイル。
├────────   index.html  ┐  GitHub Pagesのユーザーページがmasterしか参照できない仕様
│────────     404.html  ┘  のためdocs/にリダイレクトします。
└────────    readme.md   - サイトと併せてお読みください。
```
